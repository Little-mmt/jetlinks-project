import{d as F,ad as J,k as S,ab as c,U as d,V as _,X as t,f as o,u as f,E as y,W as V,R as q,_ as r,$ as u,Z as T,F as w,a1 as L}from"./vue-1730252110824.js";import{X as U,h as $,o as g,Z as z,e as M,a0 as X,a1 as Z,a2 as W,ds as G,a3 as H}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import{a as K,d as Q,u as Y}from"./platform-1730252110824.js";const ee=["src"],te={style:{"font-size":"16px",width:"calc(100% - 90px)","margin-bottom":"18px"}},ae=r("div",{class:"card-item-content-text"}," 平台类型 ",-1),oe=r("div",{class:"card-item-content-text"}," 说明 ",-1),_e=F({__name:"index",setup(ne){const b=U();J();const m=S({}),k=S({}),x=[{title:"名称",dataIndex:"name",key:"name",ellipsis:!0,search:{type:"string"}},{title:"平台类型",dataIndex:"operatorName",key:"operatorName",search:{type:"select",options:[{label:"移动OneLink",value:"onelink"},{label:"电信Ctwing",value:"ctwing"},{label:"联通Unicom",value:"unicom"}]}},{title:"状态",dataIndex:"state",key:"state",scopedSlots:!0,width:120,search:{type:"select",options:[{label:"启用",value:"enabled"},{label:"禁用",value:"disabled"}]}},{title:"说明",dataIndex:"explain",key:"explain",ellipsis:!0},{title:"操作",key:"action",fixed:"right",width:120,scopedSlots:!0}],h=e=>{const p=Y(e);return p.then(l=>{var s;l.status===200&&(g("操作成功"),(s=m.value)==null||s.reload())}),p},C=(e,p)=>e?[{key:"update",text:"编辑",tooltip:{title:"编辑"},icon:"EditOutlined",onClick:()=>{b.jumpPage("iot-card/Platform/Detail",{id:e.id})}},{key:"action",text:e.state.value==="enabled"?"禁用":"启用",tooltip:{title:e.state.value==="enabled"?"禁用":"启用"},icon:e.state.value==="enabled"?"StopOutlined":"PlayCircleOutlined",popConfirm:{title:`确认${e.state.value==="enabled"?"禁用":"启用"}？`,okText:" 确定",cancelText:"取消",onConfirm:()=>e.state.value==="enabled"?h({id:e.id,config:{...e.config},state:"disabled",operatorName:e.operatorName}):h({id:e.id,config:{...e.config},state:"enabled",operatorName:e.operatorName})}},{key:"delete",text:"删除",tooltip:{title:e.state.value!=="enabled"?"删除":"请先禁用再删除"},disabled:e.state.value==="enabled",popConfirm:{title:"确认删除?",okText:" 确定",cancelText:"取消",onConfirm:()=>{const l=Q(e.id);return l.then(s=>{var i;s.status===200?(g("操作成功！"),(i=m.value)==null||i.reload()):g("操作失败！","error")}),l}},icon:"DeleteOutlined"}]:[],B=e=>{k.value=e},j=()=>{b.jumpPage("iot-card/Platform/Detail",{id:":id"})};return(e,p)=>{const l=c("pro-search"),s=c("AIcon"),i=z,v=M,P=c("Ellipsis"),N=X,I=Z,O=W,D=G,E=H,R=c("FullPage"),A=c("page-container");return d(),_(A,null,{default:t(()=>[o(l,{columns:x,target:"platform-search",onSearch:B}),o(R,null,{default:t(()=>[o(E,{ref_key:"platformRef",ref:m,columns:x,request:f(K),defaultParams:{sorts:[{name:"createTime",order:"desc"}]},params:f(k),gridColumn:3},{headerTitle:t(()=>[o(v,null,{default:t(()=>[o(i,{onClick:j,hasPermission:"iot-card/Platform:add",type:"primary"},{default:t(()=>[o(s,{type:"PlusOutlined"}),y("新增 ")]),_:1})]),_:1})]),card:t(n=>[o(O,V({value:n,actions:C(n,"card")},n,{status:n.state.value,statusText:n.state.text,statusNames:{enabled:"processing",disabled:"error"}}),{img:t(()=>[q(e.$slots,"img",{},()=>[r("img",{src:f($)("/iot-card/iot-card-bg.png")},null,8,ee)])]),content:t(()=>[r("h3",te,[o(P,null,{default:t(()=>[y(u(n.name),1)]),_:2},1024)]),o(I,null,{default:t(()=>[o(N,{span:12},{default:t(()=>[ae,r("div",null,u(n.operatorName),1)]),_:2},1024),o(N,{span:12},{default:t(()=>[oe,o(P,null,{default:t(()=>[y(u(n.explain),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),actions:t(a=>[o(i,{disabled:a.disabled,popConfirm:a.popConfirm,tooltip:{...a.tooltip},onClick:a.onClick,hasPermission:"iot-card/Platform:"+a.key},{default:t(()=>[a.key==="delete"?(d(),_(s,{key:0,type:"DeleteOutlined"})):(d(),T(w,{key:1},[o(s,{type:a.icon},null,8,["type"]),r("span",null,u(a==null?void 0:a.text),1)],64))]),_:2},1032,["disabled","popConfirm","tooltip","onClick","hasPermission"])]),_:2},1040,["value","actions","status","statusText"])]),state:t(n=>[o(D,{text:n.state.text,status:n.state.value==="disabled"?"error":"success"},null,8,["text","status"])]),action:t(n=>[o(v,{size:16},{default:t(()=>[(d(!0),T(w,null,L(C(n,"table"),a=>(d(),_(i,{key:a.key,disabled:a.disabled,popConfirm:a.popConfirm,tooltip:{...a.tooltip},onClick:a.onClick,type:"link",style:{padding:"0px"},hasPermission:"iot-card/Platform:"+a.key},{icon:t(()=>[o(s,{type:a.icon},null,8,["type"])]),_:2},1032,["disabled","popConfirm","tooltip","onClick","hasPermission"]))),128))]),_:2},1024)]),_:3},8,["request","params"])]),_:3})]),_:3})}}});export{_e as default};
