import{a6 as H,e as M,fz as T,dj as V,a7 as O,I as $,fI as q}from"./index-1731638920964.js";import{q as A}from"./scene-1731638920964.js";import{u as E}from"./scene-17316389209642.js";import{d as N,ai as J,e as P,k as b,w as j,u as f,U as i,V as d,X as y,f as x,G as R,E as U,$ as D,_ as z,Z as G,F as L}from"./vue-1731638920964.js";const X={style:{color:"grey","margin-left":"5px"}},Z=N({name:"NotifyBuildIn"}),ae=N({...Z,props:{value:{type:Object,default:()=>({source:"fixed",value:void 0,upperKey:void 0})},item:{type:Object,default:()=>{}},name:{type:Number,default:0}},emits:["update:value","change"],setup(u,{emit:_}){var k;const o=u,Y=E(),{data:I}=J(Y),h=P(()=>{var t;return((t=o.value)==null?void 0:t.source)||"fixed"}),g=b([]),m=b((k=o.value)==null?void 0:k.upperKey),B=t=>{_("update:value",{...o.value,source:t,value:void 0})},v=(t,a,n,e)=>{var c;const l=(c=e==null?void 0:e.triggerNode)==null?void 0:c.props;let r="";l&&l.metadata&&(r=l.column),_("update:value",{...o.value,value:t,upperKey:a}),_("change",{sendTo:(n==null?void 0:n[0])||t},r)},C=(t,a)=>{if(Array.isArray(t)&&t.length){const n=[];return t.map(e=>{if(e.children){const l=C(e.children,a);l.length&&n.push({...e,title:e.name,value:e.id,disabled:!0,children:l})}else(e.type===a||a==="double"&&["int","float","double","long"].includes(e.type))&&n.push(e)}),n}else return[]};return j(()=>h.value,t=>{if(t==="upper"){const n=o.name-1>=0?{action:o.name-1}:void 0;A(f(I),n).then(e=>{var l,r;if(e.status===200){const c=C(e.result,((l=o.item.expands)==null?void 0:l.businessType)||((r=o.item)==null?void 0:r.type));g.value=c}})}},{deep:!0,immediate:!0}),j(()=>o.value.upperKey,t=>{m.value=t},{immediate:!0}),(t,a)=>{const n=H,e=M,l=T,r=V,c=O,K=$,S=q;return i(),d(S,{compact:""},{default:y(()=>{var w;return[x(n,{options:[{label:"手动输入",value:"fixed"},{label:"内置参数",value:"upper"}],style:{width:"120px"},value:(w=u.value)==null?void 0:w.source,onChange:B},null,8,["value"]),f(h)==="upper"?(i(),d(l,{key:0,value:f(m),"onUpdate:value":a[0]||(a[0]=s=>R(m)?m.value=s:null),treeData:f(g),placeholder:"请选择参数",style:{width:"calc(100% - 120px)"},fieldNames:{label:"name",value:"id"},onChange:a[1]||(a[1]=(s,p,F)=>v(void 0,s,p,F))},{title:y(({fullName:s,description:p})=>[x(e,null,{default:y(()=>[U(D(s)+" ",1),z("span",X,D(p),1)]),_:2},1024)]),_:1},8,["value","treeData"])):(i(),G(L,{key:1},[u.item.type==="date"?(i(),d(r,{key:0,value:u.value.value,allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss",style:{width:"calc(100% - 120px)"},onChange:a[2]||(a[2]=(s,p)=>v(p))},null,8,["value"])):u.item.type==="number"?(i(),d(c,{key:1,value:u.value.value,allowClear:"",style:{width:"calc(100% - 120px)"},placeholder:`请输入${u.item.name}`,onChange:v},null,8,["value","placeholder"])):(i(),d(K,{key:2,value:u.value.value,allowClear:"",style:{width:"calc(100% - 120px)"},placeholder:`请输入${u.item.name}`,onChange:a[3]||(a[3]=s=>v(s.target.value))},null,8,["value","placeholder"]))],64))]}),_:1})}}});export{ae as _};
