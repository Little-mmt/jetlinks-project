import{aC as h,ah as D,ai as L,d as B,aa as J}from"./index-1731638920964.js";import"./index-1731638920964284.js";import"./index-1731638920964300.js";import N from"./JsonView-1731638920964.js";import{u as A}from"./utils-1731638920964.js";import{d as S,e as v,r as C,w as M,U as s,V as r,X as t,f as p,E as o,$ as i,u as b,Y as m}from"./vue-1731638920964.js";const P=S({name:"TagsModal"}),q=S({...P,props:{data:{type:Object,default:()=>({})},getPopupContainer:{type:Function,default:void 0},unitOptions:{type:Array,default:()=>[]},type:{type:String,default:void 0}},emits:["cancel"],setup(a,{emit:w}){const n=a,{settingData:j}=A(n.type),I=v(()=>{var d,e,c,f;const u={read:"读",write:"写",report:"上报"};return(f=(c=(e=(d=n.data)==null?void 0:d.expands)==null?void 0:e.type)==null?void 0:c.map)==null?void 0:f.call(c,T=>u[T]).join("、")}),_=v(()=>{var e,c;let u=(e=n.data.valueType)==null?void 0:e.unit;const d=(c=n.unitOptions)==null?void 0:c.find(f=>f.value===u);return d&&(u=d.label),u}),y=C({columns:[],dataSource:[]});C({columns:[{title:"指标标识",dataIndex:"id"},{title:"指标名称",dataIndex:"name"},{title:"指标治",dataIndex:"value"}],dataSource:[]});const V=v(()=>{var d;const u=h(((d=n.data)==null?void 0:d.expands)||{},["type","source"]);return Object.values(u).length}),O=u=>{var d,e;switch(u){case"enum":y.columns=[{title:"Value",dataIndex:"value"},{title:"Text",dataIndex:"text"}],y.dataSource=(d=n.data.valueType)==null?void 0:d.elements;break;case"object":y.columns=[{title:"标识",dataIndex:"id",width:50},{title:"名称",dataIndex:"name"},{title:"名称",dataIndex:"name"}],y.dataSource=(e=n.data.valueType)==null?void 0:e.properties;break;case"boolean":y.dataSource={...h(n.data.valueType,["type"])};break;case"array":y.dataSource=n.data.valueType.elementType;break}};M(()=>n.data.valueType.type,()=>{n.data.valueType.type,O(n.data.valueType.type)},{immediate:!0});const x=()=>{w("cancel")},g=()=>{x()};return(u,d)=>{const e=D,c=L,f=B,T=J;return s(),r(T,{visible:"",maskClosable:!1,title:"标签详情",getContainer:a.getPopupContainer,onCancel:x,onOk:g},{footer:t(()=>[p(f,{type:"primary",onClick:g},{default:t(()=>[o("确认")]),_:1})]),default:t(()=>[p(c,{column:1,labelStyle:{width:"72px",textAlign:"right",justifyContent:"end"}},{default:t(()=>{var k;return[p(e,{label:"标签标识"},{default:t(()=>[o(i(a.data.id),1)]),_:1}),p(e,{label:"标签名称"},{default:t(()=>[o(i(a.data.name),1)]),_:1}),p(e,{label:"标签类型"},{default:t(()=>[o(i(a.data.valueType.type),1)]),_:1}),["int","long","float","double"].includes(a.data.valueType.type)?(s(),r(e,{key:0,label:"单位"},{default:t(()=>[o(i(b(_)),1)]),_:1})):m("",!0),["float","double"].includes(a.data.valueType.type)?(s(),r(e,{key:1,label:"精度"},{default:t(()=>{var l;return[o(i((l=a.data.valueType)==null?void 0:l.scale),1)]}),_:1})):m("",!0),["string","password"].includes(a.data.valueType.type)?(s(),r(e,{key:2,label:"最大长度"},{default:t(()=>{var l;return[o(i((l=a.data.valueType)==null?void 0:l.maxLength),1)]}),_:1})):m("",!0),a.data.valueType.type==="file"?(s(),r(e,{key:3,label:"文件类型"},{default:t(()=>{var l;return[o(i((l=a.data.valueType)==null?void 0:l.bodyType),1)]}),_:1})):m("",!0),a.data.valueType.type==="date"?(s(),r(e,{key:4,label:"格式"},{default:t(()=>{var l;return[o(i((l=a.data.valueType)==null?void 0:l.format),1)]}),_:1})):m("",!0),["enum","object","boolean","array"].includes(a.data.valueType.type)?(s(),r(e,{key:5},{default:t(()=>[p(N,{value:b(y).dataSource},null,8,["value"])]),_:1})):m("",!0),p(e,{label:"读写类型"},{default:t(()=>[o(i(b(I)),1)]),_:1}),b(V)&&((k=a.data.expands)!=null&&k.storageType)?(s(),r(e,{key:6,label:"存储方式"},{default:t(()=>{var l;return[o(i(b(j)[(l=a.data.expands)==null?void 0:l.storageType]),1)]}),_:1})):m("",!0)]}),_:1})]),_:1},8,["getContainer"])}}});export{q as _};
