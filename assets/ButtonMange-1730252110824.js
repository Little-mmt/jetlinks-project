import{d as x,ac as B,r as h,k as d,w as P,ab as w,U as C,Z as M,f as a,X as i,E as V,u as o,_ as $,V as L,G as S,Y as T}from"./vue-1730252110824.js";import{gi as A,gl as E,o as I,Z as p,e as N,a3 as O,g as R}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import j from"./ButtonAddDialog-1730252110824.js";import"./index-1730252110824303.js";import"./PermissChoose-1730252110824.js";import"./permission-1730252110824.js";const J={class:"button-mange-container"},U={class:"dialog"},g="system/Menu",Z=x({__name:"ButtonMange",setup(q){const u=B(),_=h({id:u.params.id===":id"?"":u.params.id,...u.query}),k=d(""),y=d({}),r=d(!1),b=d("新增"),f=(t,e)=>{if(!_.id&&!k.value)return I("请先新增菜单基本信息","warning");y.value={...e},b.value=t,r.value=!0},c=d({}),n=h({columns:[{title:"编码",dataIndex:"id",key:"id",width:220},{title:"名称",dataIndex:"name",key:"name",width:300},{title:"说明",dataIndex:"description",key:"description",ellipsis:!0},{title:"操作",dataIndex:"action",key:"action",scopedSlots:!0,width:240}],tableData:[],getList:()=>{_.id&&A(_.id).then(t=>{var e;c.value=t.result,n.tableData=((e=t.result)==null?void 0:e.buttons)||[]})},clickDel:t=>{const e=c.value.buttons.filter(v=>v.id!==t.id),s={...c.value,buttons:e},m=E(s);return m.then(()=>{I("操作成功"),n.getList()}),m}});return n.getList(),P(()=>u.params.id,t=>{t&&(k.value=t)}),(t,e)=>{const s=w("AIcon"),m=N,v=O;return C(),M("div",J,[a(v,{ref:"tableRef",columns:o(n).columns,model:"TABLE",dataSource:o(n).tableData,noPagination:""},{headerTitle:i(()=>[a(p,{type:"primary",hasPermission:`${g}:update`,onClick:e[0]||(e[0]=l=>f("新增",{}))},{default:i(()=>[a(s,{type:"PlusOutlined"}),V("新增 ")]),_:1},8,["hasPermission"])]),action:i(l=>[a(m,{size:16},{default:i(()=>[a(p,{type:"link",hasPermission:`${g}:update`,tooltip:{title:"编辑"},onClick:D=>f("编辑",l)},{default:i(()=>[a(s,{type:"EditOutlined"})]),_:2},1032,["hasPermission","onClick"]),a(p,{type:"link",hasPermission:`${g}:view`,tooltip:{title:"查看"},onClick:D=>f("查看",l)},{default:i(()=>[a(s,{type:"SearchOutlined"})]),_:2},1032,["hasPermission","onClick"]),a(p,{type:"link",tooltip:{title:"删除"},popConfirm:{title:"确认删除",onConfirm:()=>o(n).clickDel(l)}},{default:i(()=>[a(s,{type:"DeleteOutlined"})]),_:2},1032,["popConfirm"])]),_:2},1024)]),_:1},8,["columns","dataSource"]),$("div",U,[o(r)?(C(),L(j,{key:0,visible:o(r),"onUpdate:visible":e[1]||(e[1]=l=>S(r)?r.value=l:null),"menu-info":o(c),mode:o(b),data:o(y),menuData:o(n).tableData,onConfirm:o(n).getList},null,8,["visible","menu-info","mode","data","menuData","onConfirm"])):T("",!0)])])}}});const oe=R(Z,[["__scopeId","data-v-46e02e6e"]]);export{oe as default};
