import{h as i,aC as m,a4 as u,a5 as g}from"./index-1730252110824.js";import{C as c}from"./config-17302521108242.js";import{g as f}from"./util-17302521108242.js";import{g as p}from"./util-17302521108243.js";import{c as h,u as d}from"./vue-1730252110824.js";const o=new Map;o.set("trigger","icon-chufagaojing");o.set("notify","icon-xiaoxitongzhi");o.set("device","icon-shebeishuchu");o.set("relieve","icon-jiechugaojing");o.set("delay","icon-yanchizhihang");const t=new Map;t.set("dingTalk",i("/scene/notify-item-img/dingtalk.png"));t.set("weixin",i("/scene/notify-item-img/weixin.png"));t.set("email",i("/scene/notify-item-img/email.png"));t.set("voice",i("/scene/notify-item-img/voice.png"));t.set("sms",i("/scene/notify-item-img/sms.png"));t.set("webhook",i("/scene/notify-item-img/webhook.png"));const I={READ_PROPERTY:"icon-zhihangdongzuodu",INVOKE_FUNCTION:"icon-zhihangdongzuoxie-1",WRITE_PROPERTY:"icon-zhihangdongzuoxie"},v=Symbol("check-filter-key"),j=async(e,n)=>{const r=await f(e,d(n));return function(a,s){return p(r,a,s)}},x=(e=!1)=>new Promise(async n=>{let r;const a=await c.getPlatformUsers({paging:!1,sorts:[{name:"name",order:"asc"}]});e&&(r=await c.getRelationUsers({paging:!1,sorts:[{name:"name",order:"asc"}]})),n({platform:a.result||[],relation:(r==null?void 0:r.result)||[]})}),C=e=>{var n;if((n=e.terms)!=null&&n.length){const r=e.terms[0],a=e.terms[1];return{...m(r,["terms"]),alarm:a.value.value}}return e},z=e=>{const{alarm:n,...r}=u(e);if(console.log("handleFilterTerms",e),e.hasOwnProperty("alarm")){const s=r.column.split(".")[0];return{terms:[r,{column:`${s}.alarmConfigId`,value:{source:"fixed",value:n},type:"and",termType:"eq"}]}}return e},l=e=>e.column?e.termType?e.value.value===void 0?Promise.reject(new Error("请选择或输入参数值")):g(e.value.value)&&e.value.value.some(n=>n===void 0)||e.value.value===void 0?Promise.reject(new Error("请选择或输入参数值")):Promise.resolve():Promise.reject(new Error("请选择操作符")):Promise.reject(new Error("请选择参数")),R=e=>{var n;if((n=e.terms)!=null&&n.length){const r=e.terms[0];return e.terms[1].value.value?l(r):Promise.reject(new Error("请选择告警配置"))}else return l(e)},b=()=>h(v,{});export{v as C,t as a,x as b,C as c,R as f,j as g,z as h,o as i,I as t,b as u};
