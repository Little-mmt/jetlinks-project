import{F as C,T as O,L as G,ap as L,aC as H,S as Q,o as h,I as R,v as ee,aD as se,a6 as ae,$ as te,aE as oe,as as le,a0 as ne,a1 as ie,g as de}from"./index-1731638920964.js";import{a as ce}from"./initHome-1731638920964.js";import{d as ue,k as m,ab as E,U as d,V as N,X as o,f as s,u as e,E as M,_ as n,Y as _,Z as u,a0 as P,af as re,ag as pe}from"./vue-1731638920964.js";const p=b=>(re("data-v-0f5fda47"),b=b(),pe(),b),_e=p(()=>n("span",null,"高德地图 web服务api",-1)),ge=["src"],me=p(()=>n("span",null,"高德地图 JSapi",-1)),fe=["src"],he=p(()=>n("span",null,"高德地图 密钥",-1)),ve=["src"],ye=p(()=>n("span",null,"base-path",-1)),be=p(()=>n("div",{style:{"word-break":"break-all"}},[n("div",null,"系统后台访问的url。"),n("div",null," 格式：{http/https}: //{前端所在服务器IP地址}:{前端暴露的服务端口}/api ")],-1)),ke=["src"],we={class:"upload-image-warp-logo"},Ke={class:"upload-image-border-logo"},je={class:"upload-image-content-logo"},Ue={key:0,class:"loading-logo"},xe={key:2,class:"upload-image-mask"},Se={key:3},ze={key:0},Ie={key:1},Le={key:0},Ne={class:"upload-loading-mask"},Pe=p(()=>n("div",{class:"upload-tips"},"推荐尺寸200*200",-1)),Te=p(()=>n("div",{class:"upload-tips"},"支持jpg,png",-1)),Be=p(()=>n("span",null,"浏览器页签",-1)),Ce=["src"],Oe={class:"upload-image-warp-logo"},Re={class:"upload-image-border-logo"},Ee={class:"upload-image-content-logo"},Me={key:0,class:"loading-icon"},$e={key:2,class:"upload-image-mask"},Ae={key:3},qe=p(()=>n("div",{class:"upload-tips"},"推荐尺寸64*64",-1)),Je=p(()=>n("div",{class:"upload-tips"},"支持ico格式",-1)),Ve={class:"upload-image-warp-back"},Fe={class:"upload-image-border-back"},Ye={class:"upload-image-content-back"},De={key:0,class:"loading-back"},Xe={key:2,class:"upload-image-mask"},We={key:3},Ze=p(()=>n("div",{class:"upload-tips"},"支持4M以内的图片:支持jpg、png",-1)),Ge=p(()=>n("div",{class:"upload-tips"},"建议尺寸1400x1080",-1)),He=ue({__name:"index",setup(b,{expose:$}){const T=m();C.useForm;const f=m(!1),j=m(!1),U=m(!1),g=m(["image/jpeg","image/png"]),k=m(["image/x-icon"]),x=m({[O]:G.get(O)}),a=m({title:"",headerTheme:"light",showRecordNumber:!1,recordNumber:"",apiKey:"",webKey:"",secretKey:"",basePath:`${window.location.origin}/api`,logo:"/logo.png",ico:"/favicon.ico",background:"/images/login.png"}),A=()=>new Promise(async(l,t)=>{var i;(i=T.value)==null||i.validate().then(async()=>{const r=[{scope:"front",properties:{...H(a.value,["apiKey","webKey","secretKey","base-path"])}},{scope:"amap",properties:{apiKey:a.value.apiKey,webKey:a.value.webKey,secretKey:a.value.secretKey}},{scope:"paths",properties:{"base-path":a.value.basePath}}];if((await ce(r)).status===200){l(!0),localStorage.setItem(Q.AMAP_KEY,a.value.apiKey);const w=document.querySelector('link[rel="icon"]');w!==null&&(w.href=a.value.ico)}else l(!1)}).catch(()=>{l(!1)})}),q=l=>{const t=g.value.includes(l.type);if(!t)return h("请上传.jpg.png.jfif.pjp.pjpeg.jpeg格式的图片","error"),!1;const i=l.size/1024/1024<4;return i||h("图片大小必须小于4M","error"),t&&i},J=l=>{var t,i;l.file.status==="uploading"&&(f.value=!0),l.file.status==="done"&&(l.file.url=(t=l.file.response)==null?void 0:t.result,f.value=!1,a.value.logo=(i=l.file.response)==null?void 0:i.result)},V=l=>{const t=k.value.includes(l.type);if(!t)return h("请上传ico格式的图片","error"),!1;const i=l.size/1024/1024<1;return i||h("支持1M以内的图片","error"),t&&i},F=l=>{var t,i;l.file.status==="uploading"&&(U.value=!0),l.file.status==="done"&&(l.file.url=(t=l.file.response)==null?void 0:t.result,U.value=!1,a.value.ico=(i=l.file.response)==null?void 0:i.result)},Y=l=>{const t=g.value.includes(l.type);if(!t)return h("请上传.jpg.png.jfif.pjp.pjpeg.jpeg格式的图片","error"),!1;const i=l.size/1024/1024<4;return i||h("图片大小必须小于4M","error"),t&&i},D=l=>{var t,i;l.file.status==="uploading"&&(j.value=!0),l.file.status==="done"&&(l.file.url=(t=l.file.response)==null?void 0:t.result,j.value=!1,a.value.background=(i=l.file.response)==null?void 0:i.result)};return $({submitBasic:A}),(l,t)=>{const i=R,r=ee,S=se,w=ae,v=te,X=oe,W=R,y=E("LoadingOutlined"),z=E("PlusOutlined"),I=le,K=ne,B=ie,Z=C;return d(),N(Z,{layout:"vertical",model:e(a),ref_key:"formBasicRef",ref:T},{default:o(()=>[s(B,{span:24,gutter:24},{default:o(()=>[s(K,{span:12},{default:o(()=>[s(r,{label:"系统名称",name:"title",rules:[{max:64,message:"最多可输入64位",trigger:"change"}]},{default:o(()=>[s(i,{value:e(a).title,"onUpdate:value":t[0]||(t[0]=c=>e(a).title=c),placeholder:"请输入系统名称"},null,8,["value"])]),_:1}),s(r,{label:"主题色",name:"headerTheme",rules:[{required:!0,message:"请选择主题色",trigger:"blur"}]},{default:o(()=>[s(w,{value:e(a).headerTheme,"onUpdate:value":t[1]||(t[1]=c=>e(a).headerTheme=c)},{default:o(()=>[s(S,{value:"light"},{default:o(()=>[M("白色")]),_:1}),s(S,{value:"dark"},{default:o(()=>[M("黑色")]),_:1})]),_:1},8,["value"])]),_:1}),s(r,null,{label:o(()=>[_e,s(v,{title:"开发者可通过接口使用各类型的地理数据服务,返回结果支持JSON和XML格式"},{default:o(()=>[n("img",{class:"img-style",src:"/images/init-home/mark.png"},null,8,ge)]),_:1})]),default:o(()=>[s(i,{value:e(a).webKey,"onUpdate:value":t[2]||(t[2]=c=>e(a).webKey=c),placeholder:"请输入高德WebApi Key"},null,8,["value"])]),_:1}),s(r,null,{label:o(()=>[me,s(v,{title:"提供浏览器精准定位"},{default:o(()=>[n("img",{class:"img-style",src:"/images/init-home/mark.png"},null,8,fe)]),_:1})]),default:o(()=>[s(i,{value:e(a).apiKey,"onUpdate:value":t[3]||(t[3]=c=>e(a).apiKey=c),placeholder:"请输入高德API Key"},null,8,["value"])]),_:1}),s(r,null,{label:o(()=>[he,s(v,{title:"降低明文传输被窃取的风险"},{default:o(()=>[n("img",{class:"img-style",src:"/images/init-home/mark.png"},null,8,ve)]),_:1})]),default:o(()=>[s(i,{value:e(a).secretKey,"onUpdate:value":t[4]||(t[4]=c=>e(a).secretKey=c),placeholder:"请输入高德API 密钥"},null,8,["value"])]),_:1}),s(r,{name:"basePath",rules:[{required:!0,message:"请输入base-path",trigger:"blur"}]},{label:o(()=>[ye,s(v,null,{title:o(()=>[be]),default:o(()=>[n("img",{class:"img-style",src:"/images/init-home/mark.png"},null,8,ke)]),_:1})]),default:o(()=>[s(i,{value:e(a).basePath,"onUpdate:value":t[5]||(t[5]=c=>e(a).basePath=c),placeholder:"格式：{http/https}: //{前端所在服务器IP地址}:{前端暴露的服务端口}/api"},null,8,["value"])]),_:1}),s(r,{name:"showRecordNumber",label:"展示备案号",required:!0},{default:o(()=>[s(X,{checked:e(a).showRecordNumber,"onUpdate:checked":t[6]||(t[6]=c=>e(a).showRecordNumber=c)},null,8,["checked"])]),_:1}),e(a).showRecordNumber?(d(),N(r,{key:0,name:"recordNumber",label:"备案号内容",rules:[{required:!0,message:"请输入备案号",trigger:"blur"}]},{default:o(()=>[s(W,{value:e(a).recordNumber,"onUpdate:value":t[7]||(t[7]=c=>e(a).recordNumber=c)},null,8,["value"])]),_:1})):_("",!0),s(B,{gutter:24,span:24},{default:o(()=>[s(K,null,{default:o(()=>[s(r,{label:"系统logo"},{default:o(()=>[n("div",we,[n("div",Ke,[s(I,{name:"file",action:e(L),headers:e(x),showUploadList:!1,beforeUpload:q,onChange:J,accept:e(g)&&e(g).length?e(g).toString():""},{default:o(()=>[n("div",je,[e(f)?(d(),u("div",Ue,[s(y,{style:{"font-size":"28px"}})])):_("",!0),e(a).logo?(d(),u("div",{key:1,class:"upload-image",style:P(e(a).logo?`background-image: url(${e(a).logo});`:"")},null,4)):_("",!0),e(a).logo?(d(),u("div",xe," 点击修改 ")):(d(),u("div",Se,[e(f)?(d(),u("div",ze,[s(y,{style:{"font-size":"28px"}})])):(d(),u("div",Ie,[s(z,{style:{"font-size":"28px"}})]))]))])]),_:1},8,["action","headers","accept"]),e(f)?(d(),u("div",Le,[n("div",Ne,[e(f)?(d(),N(y,{key:0,style:{"font-size":"28px"}})):_("",!0)])])):_("",!0)])]),Pe,Te]),_:1})]),_:1}),s(K,null,{default:o(()=>[s(r,null,{label:o(()=>[Be,s(v,{title:"浏览器tab页中显示的图片元素"},{default:o(()=>[n("img",{class:"img-style",src:"/images/init-home/mark.png"},null,8,Ce)]),_:1})]),default:o(()=>[n("div",Oe,[n("div",Re,[s(I,{name:"file",action:e(L),headers:e(x),showUploadList:!1,beforeUpload:V,onChange:F,accept:e(k)&&e(k).length?e(k).toString():""},{default:o(()=>[n("div",Ee,[e(U)?(d(),u("div",Me,[s(y,{style:{"font-size":"28px"}})])):_("",!0),e(a).ico?(d(),u("div",{key:1,class:"upload-image-icon",style:P(e(a).ico?`background-image: url(${e(a).ico});`:"")},null,4)):_("",!0),e(a).ico?(d(),u("div",$e," 点击修改 ")):(d(),u("div",Ae,[n("div",null,[s(z,{style:{"font-size":"28px"}})])]))])]),_:1},8,["action","headers","accept"])])]),qe,Je]),_:1})]),_:1})]),_:1})]),_:1}),s(K,{span:12},{default:o(()=>[s(r,{label:"登录背景图"},{default:o(()=>[n("div",Ve,[n("div",Fe,[s(I,{name:"file",action:e(L),headers:e(x),beforeUpload:Y,showUploadList:!1,onChange:D,accept:e(g)&&e(g).length?e(g).toString():""},{default:o(()=>[n("div",Ye,[e(j)?(d(),u("div",De,[s(y,{style:{"font-size":"28px"}})])):_("",!0),e(a).background?(d(),u("div",{key:1,class:"upload-image",style:P(e(a).background?`background-image: url(${e(a).background});`:"")},null,4)):_("",!0),e(a).background?(d(),u("div",Xe," 点击修改 ")):(d(),u("div",We,[n("div",null,[s(z,{style:{"font-size":"28px"}})])]))])]),_:1},8,["action","headers","accept"])])]),Ze,Ge]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const as=de(He,[["__scopeId","data-v-0f5fda47"]]);export{as as default};
