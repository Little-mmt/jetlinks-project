import{aH as x,v as P}from"./index-1730252110824.js";import{d as f,ai as y,k as u,U as d,Z as E,f as t,X as l,u as n,V as w,Y as C}from"./vue-1730252110824.js";import{u as S}from"./scene-17302521108242.js";import I from"./AddModal-1730252110824.js";import h from"./AddButton-1730252110824.js";import j from"./Title-17302521108242.js";import B from"./Terms-17302521108242.js";import{E as T,D as V}from"./util-17302521108242.js";import{_ as b}from"./CheckItem.vue_vue_type_script_setup_true_name_CheckItem_lang-1730252110824.js";const D={class:"device"},R=f({name:"SceneSaveDevice"}),X=f({...R,setup($,{expose:_}){const g=S(),{data:r}=y(g),s=u(!1),c=u(),v=[{validator(o,e){var i,a,p,m;if(e){if(!e.productId||["fixed","org"].includes(e.selector)&&!e.selectorValues||((i=e.operation)==null?void 0:i.operator)==="readProperty"&&!e.operation.readProperties.length||((a=e.operation)==null?void 0:a.operator)==="writeProperty"&&!Object.keys(e.operation.writeProperties).length||((p=e.operation)==null?void 0:p.operator)==="invokeFunction"&&!e.operation.functionId||((m=e.operation)==null?void 0:m.operator)==="reportEvent"&&!e.operation.eventId)return Promise.reject(new Error("该数据已发生变更，请重新配置"))}else return Promise.reject(new Error("请配置设备触发规则"));return Promise.resolve()}}],k=(o,e)=>{r.value.trigger.device=o,r.value.options.trigger=e,s.value=!1,T.emit(V,o)};return _({changePaneIndex:o=>{var e;return(e=c.value)==null?void 0:e.changePaneIndex(o)}}),(o,e)=>{const i=x,a=P;return d(),E("div",D,[t(a,{rules:v,name:["trigger","device"]},{label:l(()=>[t(i,{data:"触发规则",style:{"font-size":"14px"}})]),default:l(()=>[t(h,{style:{width:"100%"},onClick:e[0]||(e[0]=p=>s.value=!0)},{default:l(()=>[t(j,{options:n(r).options.trigger},null,8,["options"])]),_:1}),n(s)?(d(),w(I,{key:0,onCancel:e[1]||(e[1]=p=>s.value=!1),onSave:k,value:n(r).trigger.device,options:n(r).options.trigger},null,8,["value","options"])):C("",!0),t(b)]),_:1}),t(n(B),{ref_key:"termsRef",ref:c},null,512)])}}});export{X as _};
