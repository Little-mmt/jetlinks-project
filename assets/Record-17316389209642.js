import{g as B,X as Y,au as C,c$ as V,cY as D}from"./index-1731638920964.js";import{j as E}from"./log-17316389209643.js";import H from"./Duration-1731638920964.js";import{k,o as M,ab as N,U as e,Z as r,f as j,X as u,F as m,E as d,$ as p,u as c,Y as o,V as _,_ as q}from"./vue-1731638920964.js";const w={class:"tableBottom"},A={key:1},F={__name:"Record",props:{currentId:{type:String,default:""}},setup(g,{expose:h}){const y=g,l=k(),s=k([]),I=Y(),x=[{title:"告警时间",dataIndex:"alarmTime",key:"alarmTime"},{title:"处理时间",dataIndex:"handleTime",key:"handleTime"},{title:"告警持续时长",dataIndex:"duration",key:"duration"},{title:"处理类型",dataIndex:"handleType",key:"handleType"},{title:"处理结果",dataIndex:"description",key:"description"}],f=async()=>{var i;const a=await E({sorts:[{name:"createTime",order:"desc"}],terms:[{column:"alarmRecordId",termType:"eq",value:y.currentId,type:"and"}],pageIndex:0,pageSize:51});a.success&&(((i=a.result.data)==null?void 0:i.length)>50?(l.value=!0,s.value=a.result.data.slice(0,50)):(l.value=!1,s.value=a.result.data))},T=()=>{I.jumpPage("rule-engine/Alarm/Log/Record",{},{id:y.currentId})};return h({refreshRecord:()=>{f()}}),M(()=>{f()}),(a,i)=>{const v=N("Ellipsis"),b=V,R=D;return e(),r(m,null,[j(b,{dataSource:c(s),columns:x,pagination:!1,bordered:"",scroll:{y:"calc(100vh - 260px)"}},{bodyCell:u(({column:n,text:t,record:S})=>[["alarmTime","handleTime"].includes(n.dataIndex)?(e(),r(m,{key:0},[d(p(c(C)(t).format("YYYY-MM-DD HH:mm:ss")),1)],64)):o("",!0),n.dataIndex==="duration"?(e(),_(H,{key:1,data:S},null,8,["data"])):o("",!0),n.dataIndex==="handleType"?(e(),r(m,{key:2},[d(p(t==null?void 0:t.text),1)],64)):o("",!0),n.dataIndex==="description"?(e(),_(v,{key:3},{default:u(()=>[d(p(t||"--"),1)]),_:2},1024)):o("",!0)]),_:1},8,["dataSource","scroll"]),q("div",w,[c(l)?(e(),_(R,{key:0,class:"moreBtn",type:"link",onClick:T},{default:u(()=>[d("查看更多 >")]),_:1})):c(s).length?(e(),r("span",A,"已展示全部数据")):o("",!0)])],64)}}},U=B(F,[["__scopeId","data-v-adbc3546"]]);export{U as default};
