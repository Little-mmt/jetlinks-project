import{B as $,ay as r,k as O,T as d,L as V,o as f,dA as A,I as F,d as L,as as S,A as T,g as B}from"./index-1730252110824.js";import{d as g,k as m,U as C,V as I,X as p,f as u,u as l,G as P,E as k}from"./vue-1730252110824.js";const z=`${$}/file/upload`,J=e=>r.post("/protocol",e),M=e=>r.patch("/protocol",e),R=e=>r.post("/protocol/_query",e),D=e=>r.remove(`/protocol/${e}`),E=g({name:"FileUpload"}),K=g({...E,props:{modelValue:{type:String,default:()=>""}},emits:["update:modelValue","change"],setup(e,{emit:i}){var _;const v=e,h=(_=O().$state.configInfo.paths)==null?void 0:_["base-path"],c=m(v.modelValue),o=m(!1),y=s=>{const a=s.name.split("."),t=["jar","zip"].includes(a[a.length-1]);return t||(o.value=!1,f("请上传.zip.jar格式的文件","error")),t},j=async s=>{var a;if(s.file.status)if(o.value=!0,s.file.status==="done"){o.value=!1;const t=(a=s.file.response)==null?void 0:a.result,n=`${h||""}/file/${t.id}?accessKey=${t.others.accessKey}`;f("上传成功！","success"),c.value=n,i("update:modelValue",n),i("change",n)}else s.file.error?(A.error({message:"系统提示",description:"系统未知错误，请反馈给管理员"}),o.value=!1):s.file.response&&(o.value=!1)};return(s,a)=>{const t=F,n=L,U=S,b=T;return C(),I(b,{spinning:l(o)},{default:p(()=>[u(t,{placeholder:"请上传文件",value:l(c),"onUpdate:value":a[0]||(a[0]=x=>P(c)?c.value=x:null),style:{width:"calc(100% - 100px)"},disabled:!0},null,8,["value"]),u(U,{name:"file",accept:".jar, .zip",multiple:!0,action:l(z),headers:{[l(d)]:l(V).get(l(d))},onChange:j,showUploadList:!1,class:"upload-box",beforeUpload:y},{default:p(()=>[u(n,{type:"primary"},{default:p(()=>[k("上传jar包")]),_:1})]),_:1},8,["action","headers"])]),_:1},8,["spinning"])}}});const N=B(K,[["__scopeId","data-v-ae139521"]]),G=Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"}));export{N as F,G as a,R as l,D as r,J as s,M as u};
