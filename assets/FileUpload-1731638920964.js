import{k as U,T as r,L as C,o as w,dA as A,I as S,d as F,as as L,A as $,g as j}from"./index-1731638920964.js";import{F as k}from"./firmware-1731638920964.js";import{d as m,k as f,w as B,ab as K,U as N,V as E,X as d,f as u,u as s,G as O,_ as h,af as R,ag as J}from"./vue-1731638920964.js";const M=o=>(R("data-v-fb09ba7a"),o=o(),J(),o),T=M(()=>h("span",{class:"upload-text"},"上传文件",-1)),D=m({name:"FileUpload"}),G=m({...D,props:{modelValue:{type:String,default:()=>""}},emits:["update:modelValue","update:extraValue","change"],setup(o,{emit:c}){var i;const _=o,g=(i=U().$state.configInfo.paths)==null?void 0:i["base-path"],a=f(_.modelValue),t=f(!1),v=async e=>{var l;if(t.value=!0,e.file.status==="done"){t.value=!1;const n=(l=e.file.response)==null?void 0:l.result,p=`${g||""}/file/${n.id}?accessKey=${n.others.accessKey}`;w("上传成功！","success"),a.value=p,c("update:modelValue",p),c("update:extraValue",n)}else e.file.error?(A.error({message:"系统提示",description:"系统未知错误，请反馈给管理员"}),t.value=!1):e.file.response&&(t.value=!1)},V=()=>{c("update:modelValue",a.value)};return B(()=>_.modelValue,e=>{a.value=e}),(e,l)=>{const n=S,p=K("AIcon"),y=F,b=L,x=$;return N(),E(x,{spinning:s(t)},{default:d(()=>[u(n,{placeholder:"请上传文件",value:s(a),"onUpdate:value":l[0]||(l[0]=I=>O(a)?a.value=I:null),style:{width:"calc(100% - 110px)"},onChange:V},null,8,["value"]),u(b,{name:"file",multiple:!0,action:s(k),headers:{[s(r)]:s(C).get(s(r))},onChange:v,showUploadList:!1,class:"upload-box"},{default:d(()=>[u(y,{type:"primary"},{default:d(()=>[h("div",null,[u(p,{type:"UploadOutlined"}),T])]),_:1})]),_:1},8,["action","headers"])]),_:1},8,["spinning"])}}});const Y=j(G,[["__scopeId","data-v-fb09ba7a"]]);export{Y as default};
