import{g as M,ax as $,cY as A,aJ as F,aK as K,dE as U}from"./index-1730252110824.js";import"./index-1730252110824299.js";import{f as Y}from"./log-17302521108243.js";import q from"./Record-17302521108242.js";import z from"./Log-1730252110824.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-17302521108247.js";import{k as u,ab as k,U as n,Z as J,f as o,X as s,_ as a,$ as _,u as e,E as d,V as p,Y as C,G as P,F as X,d as Z}from"./vue-1730252110824.js";import"./Duration-1730252110824.js";import"./LogDetail-1730252110824.js";import"./index-1730252110824284.js";import"./vue-json-viewer-1730252110824.js";const H={class:"alarmInfo"},Q={class:"alarmTitle"},W={class:"alarmType"},ee={style:{"font-size":"12px","margin-left":"10px","margin-top":"5px"}},te={class:"alarmInfoRight"},ae=Z({name:"LogDrawer"}),oe=Object.assign(ae,{props:{logData:{type:Object,default:{}},typeMap:{type:Object,default:{}},levelMap:{type:Object,default:{}}},emits:["closeDrawer","refreshTable"],setup(f,{emit:v}){const g=f,r=u(!1),c=u(),t=u(g.logData),l=u("record"),T=()=>{v("closeDrawer")},B=()=>{r.value=!0},N=()=>{r.value=!1},V=async()=>{r.value=!1;const m=await Y({terms:[{column:"id",value:g.logData.id,type:"and"}]});m.success&&(t.value=m.result.data[0],l.value==="record"&&(c==null||c.value.refreshRecord())),v("refreshTable")};return(m,y)=>{const E=k("Ellipsis"),L=k("LevelIcon"),R=$,j=A,b=F,O=K,S=U;return n(),J(X,null,[o(S,{visible:!0,width:"1000",destroyInactiveTabPane:!0,onClose:T},{title:s(()=>{var i,x,h,w,I;return[a("div",H,[a("div",null,[a("div",Q,[a("span",W,_(f.typeMap.get((i=e(t))==null?void 0:i.targetType)),1),a("div",null,[o(E,{style:{"max-width":"200px"}},{default:s(()=>{var D;return[d(_((D=e(t))==null?void 0:D.alarmName),1)]}),_:1})]),o(L,{level:e(t).level},null,8,["level"])]),a("div",ee,_(((x=e(t))==null?void 0:x.description)||"暂无说明"),1)]),a("div",te,[a("div",null,[o(R,{status:(h=e(t))==null?void 0:h.state.value,statusNames:{warning:"error",normal:"default"}},null,8,["status"]),a("span",null,_((w=e(t))==null?void 0:w.state.text),1),((I=e(t))==null?void 0:I.state.value)==="warning"?(n(),p(j,{key:0,type:"link",onClick:B},{default:s(()=>[d("处理")]),_:1})):C("",!0)])])])]}),default:s(()=>[o(O,{value:e(l),"onUpdate:value":y[0]||(y[0]=i=>P(l)?l.value=i:null),"button-style":"solid",style:{margin:"20px 0"}},{default:s(()=>[o(b,{value:"record"},{default:s(()=>[d("处理记录")]),_:1}),o(b,{value:"logs"},{default:s(()=>[d("告警日志")]),_:1})]),_:1},8,["value"]),e(l)==="record"?(n(),p(q,{key:0,currentId:e(t).id,ref_key:"RecordRef",ref:c},null,8,["currentId"])):(n(),p(z,{key:1,currentId:e(t).id,configId:e(t).alarmConfigId},null,8,["currentId","configId"]))]),_:1}),e(r)?(n(),p(G,{key:0,onCloseSolve:N,onRefresh:V,data:e(t)},null,8,["data"])):C("",!0)],64)}}}),fe=M(oe,[["__scopeId","data-v-3f8d0bf4"]]);export{fe as default};
