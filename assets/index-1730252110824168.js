import{d as x,ac as C,k as d,e as k,w as T,ab as b,u as t,U as v,Z as I,_ as o,f as u,X as S,V as A,Y as m,a4 as h}from"./vue-1730252110824.js";import{cA as L,I as q,dg as B,g as N}from"./index-1730252110824.js";import"./index-1730252110824281.js";import{c as V}from"./channel-17302521108242.js";const K={key:0,class:"left-warp"},j={class:"channel-tree"},E={class:"channel-tree-query"},F={class:"channel-tree-content"},O=x({__name:"index",props:{onSelect:{type:Function},onTreeLoad:{type:Function},deviceData:{}},setup(f){const e=f,y=C(),n=d([]),r=d([]),c=d(!1),p=k(()=>{var a;return y.query.type==="gb28181-2016"&&((a=n.value[0])==null?void 0:a.children.length)}),_=async(a,s)=>{const{result:l}=await V.queryTree(a,s);n.value=[{id:e.deviceData.id,name:e.deviceData.name,children:l||[]}],c.value=n.value[0].children.length>10},D=L(a=>{_(e.deviceData.id,{terms:[{column:"name",termType:"like",value:`%${a.target.value}%`}]})},300);return T(()=>e.deviceData,()=>{n.value=[{id:e.deviceData.id,name:e.deviceData.name,children:[]}],r.value=[e.deviceData.id],_(e.deviceData.id,{})},{deep:!0}),(a,s)=>{const l=b("AIcon"),g=q,w=B;return t(p)?(v(),I("div",K,[o("div",{class:h(["left-content",{active:t(c)}])},[o("div",j,[o("div",E,[u(g,{onChange:t(D),placeholder:"请输入目录名称"},{suffix:S(()=>[u(l,{type:"SearchOutlined"})]),_:1},8,["onChange"])]),o("div",F,[t(p)?(v(),A(w,{key:0,defaultExpandAll:"",height:500,selectedKeys:t(r),treeData:t(n),onSelect:i=>{i.length&&(r.value=i,e.onSelect&&e.onSelect(i[0]))},fieldNames:{key:"id",title:"name"},showLine:{showLeafIcon:!1},"show-icon":!0},null,8,["selectedKeys","treeData","onSelect"])):m("",!0)])])],2),o("div",{class:h(["left-warp--btn",{active:!t(c)}]),onClick:s[0]||(s[0]=i=>c.value=!t(c))},[u(l,{type:"LeftOutlined"})],2)])):m("",!0)}}});const U=N(O,[["__scopeId","data-v-2b1867fc"]]);export{U as default};
