import{g as j,X as A,ah as B,ai as T,dE as U}from"./index-1731638920964.js";import"./index-1731638920964299.js";import"./index-1731638920964300.js";import{d as k}from"./device-17316389209643.js";import{P as L}from"./const-1731638920964.js";import{k as N,e as M,o as R,ab as S,U as I,V as y,X as d,_ as v,f as m,E as f,$ as l,u as t,Y as g,af as X,ag as q}from"./vue-1731638920964.js";const Y=w=>(X("data-v-b11606d3"),w=w(),q(),w),z={class:"deviceName"},F={class:"deviceId"},G=Y(()=>v("span",null," 设备ID： ",-1)),H={class:"password"},J={__name:"index",props:{deviceId:{type:Object}},setup(w){const P=w,E=A(),e=N(),h=N(!1),C=M(()=>{var n,r,o,c,p;let i=((n=e.value)==null?void 0:n.provider)==="onvif"?(o=(r=e.value)==null?void 0:r.others)==null?void 0:o.onvifPassword:(p=(c=e.value)==null?void 0:c.others)==null?void 0:p.access_pwd;if(h.value)return i;{let u="";for(let a=0;a<i.length;a++)u+="*";return u}}),O=i=>{E.jumpPage("device/Instance/Detail",{id:P.deviceId})},V=async()=>{var r,o,c,p,u,a;const i={paging:!1,sorts:[{name:"createTime",order:"desc"}],terms:[{column:"id",value:(r=e.value)==null?void 0:r.productId}]},n=await k.queryProductList(i);n.success&&(e.value.productName=(c=(o=n.result)==null?void 0:o[0])==null?void 0:c.name,e.value.provider!=="media-plugin"&&(e.value.others.access_pwd=e.value.others.access_pwd?e.value.others.access_pwd:(a=(u=(p=n.result)==null?void 0:p[0])==null?void 0:u.configuration)==null?void 0:a.access_pwd))},$=async()=>{const i=await k.detail(P.deviceId);i.success&&(e.value=i.result,await V())};return R(()=>{$()}),(i,n)=>{const r=S("Ellipsis"),o=B,c=S("AIcon"),p=T,u=U;return I(),y(u,{visible:"",placement:"right",width:600,closable:!1,onClose:n[1]||(n[1]=a=>i.$emit("closeDrawer"))},{title:d(()=>{var a;return[v("div",z,[m(r,{style:{"max-width":"400px"}},{default:d(()=>{var b;return[f(l((b=t(e))==null?void 0:b.name),1)]}),_:1})]),v("div",F,[G,v("a",{onClick:O},l((a=t(e))==null?void 0:a.id),1)])]}),default:d(()=>[v("div",null,[m(p,{bordered:"",column:1},{default:d(()=>{var a,b,x;return[m(o,{label:"接入方式"},{default:d(()=>{var s;return[f(l((s=t(L).find(_=>{var D;return _.value===((D=t(e))==null?void 0:D.provider)}))==null?void 0:s.label),1)]}),_:1}),m(o,{label:"所属产品"},{default:d(()=>{var s;return[f(l((s=t(e))==null?void 0:s.productName),1)]}),_:1}),((a=t(e))==null?void 0:a.provider)==="onvif"?(I(),y(o,{key:0,label:"接入地址"},{default:d(()=>{var s,_;return[f(l((_=(s=t(e))==null?void 0:s.others)==null?void 0:_.onvifUrl),1)]}),_:1})):g("",!0),((b=t(e))==null?void 0:b.provider)==="onvif"?(I(),y(o,{key:1,label:"接入账户"},{default:d(()=>{var s,_;return[f(l((_=(s=t(e))==null?void 0:s.others)==null?void 0:_.onvifUsername),1)]}),_:1})):g("",!0),["onvif","gb28181-2016"].includes((x=t(e))==null?void 0:x.provider)?(I(),y(o,{key:2,label:"接入密码"},{default:d(()=>[v("div",H,[v("span",null,l(t(C)),1),m(c,{type:t(h)?"EyeInvisibleOutlined":"EyeOutlined",onClick:n[0]||(n[0]=s=>h.value=!t(h)),class:"passwordIcon"},null,8,["type"])])]),_:1})):g("",!0),m(o,{label:"说明"},{default:d(()=>{var s;return[f(l(((s=t(e))==null?void 0:s.description)||"--"),1)]}),_:1})]}),_:1})])]),_:1})}}},te=j(J,[["__scopeId","data-v-b11606d3"]]);export{te as default};
