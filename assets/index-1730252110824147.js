import{d as fe,ac as He,k as w,ai as je,r as ce,o as ze,w as H,ab as B,U as p,V as m,X as t,f as a,_ as A,u as e,E as T,Y as g,Z as G,F as Qe,a1 as Ke,G as $e,a4 as Je,a8 as Be,$ as Ge}from"./vue-1730252110824.js";import{a4 as S,i as Z,o as de,I as Ze,v as Xe,a0 as We,a6 as Ye,$ as et,aJ as tt,aK as at,a1 as ot,af as st,Z as rt,a7 as lt,w as nt,dD as ut,ec as it,K as ct,M as dt,d as pt,F as ft,a9 as mt,aI as gt,g as _t}from"./index-1730252110824.js";import"./index-1730252110824288.js";import"./index-1730252110824276.js";import"./index-1730252110824279.js";import{g as vt,s as yt,u as ht,a as Ct,b as Tt,c as bt,d as It,e as wt,f as Et}from"./type-17302521108244.js";import{u as Pt,_ as Ut}from"./LocalAddressSelect.vue_vue_type_script_setup_true_lang-1730252110824.js";const me={delimited:"",lang:"",script:"",size:"",length:"4",offset:void 0,little:void 0},ge={parserType:void 0,port:void 0,host:void 0,publicPort:"",publicHost:"",remoteHost:"",remotePort:"",secure:!1,username:"",password:"",topicPrefix:"",maxMessageSize:8192,certId:void 0,privateKeyAlias:"",clientId:"",parserConfiguration:me},St={name:"",type:"UDP",shareCluster:!0,description:""},j={serverId:void 0,configuration:ge},Rt=["TCP_SERVER","WEB_SOCKET_SERVER","HTTP_SERVER","MQTT_SERVER"],kt=["UDP","COAP_SERVER"],z=["COAP_SERVER","MQTT_SERVER","WEB_SOCKET_SERVER","TCP_SERVER","UDP","HTTP_SERVER"],Ft={parserType:["TCP_SERVER"],port:z,host:z,publicPort:z,publicHost:z,serverId:["MQTT_CLIENT"],remoteHost:["MQTT_CLIENT"],remotePort:["MQTT_CLIENT"],secure:["UDP","COAP_SERVER"],username:["MQTT_CLIENT"],password:["MQTT_CLIENT"],topicPrefix:["MQTT_CLIENT"],maxMessageSize:["MQTT_SERVER","MQTT_CLIENT"],clientId:["MQTT_CLIENT"],delimited:["DELIMITED"],lang:["SCRIPT"],script:["SCRIPT"],size:["FIXED_LENGTH"],length:["LENGTH_FIELD"],offset:["LENGTH_FIELD"],little:["LENGTH_FIELD"]},At=[{value:"DIRECT",label:"不处理"},{value:"DELIMITED",label:"分隔符"},{value:"SCRIPT",label:"自定义脚本"},{value:"FIXED_LENGTH",label:"固定长度"},{value:"LENGTH_FIELD",label:"长度字段"}],Nt=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"8",label:"8"}],Lt=[{label:"大端",value:"false"},{label:"小端",value:"true"}],C=(L,b)=>Ft[L].includes(b),N={regIpv4:new RegExp(/^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))\.){3}(([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/),regIPv6:new RegExp(/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/),regDomain:new RegExp(/^[a-zA-Z0-9]+([\-\.]{1}[a-zA-Z0-9]+)*\.[a-zA-Z]{2,}$/),regOnlyNumber:new RegExp(/^\d+$/)},pe=(L,b)=>new Promise(async(P,O)=>{const E=b.replace(/^(https?|ftp):\/\/(www\.)?/i,"");return N.regIpv4.test(b)||N.regIPv6.test(b)||N.regDomain.test(E)?P(""):b?O("请输入正确的IP地址或者域名"):P("")}),Ot=(L,b)=>new Promise(async(P,O)=>/^[1-9]\d*$/.test(b.toString())&&b>0&&b<=65535?P(""):O(L.message)),v={name:[{required:!0,message:"请输入名称"},{max:64,message:"最多可输入64个字符"}],type:[{required:!0,message:"请选择类型"}],shareCluster:[{required:!0,message:"请选择集群"}],serverId:[{required:!0,message:"请选择节点名称"}],host:[{required:!0,message:"请选择本地地址"}],port:[{required:!0,message:"请选择本地端口"}],publicHost:[{required:!0,message:"请输入公网地址"},{validator:pe,message:"请输入正确的IP地址或者域名"}],publicPort:[{required:!0,message:"请输入公网端口"},{pattern:N.regOnlyNumber,message:"请输入1-65535之间的正整数"}],remoteHost:[{required:!0,message:"请输入远程地址"},{validator:pe,message:"请输入正确格式的域名或ip"}],remotePort:[{required:!0,message:"输入远程端口"},{pattern:N.regOnlyNumber,message:"请输入1-65535之间的正整数"}],clientId:[{required:!0,message:"请输入ClientId"},{max:64,message:"最多可输入64个字符"}],username:[{required:!0,message:"请输入用户名"},{max:64,message:"最多可输入64个字符"}],password:[{required:!0,message:"请输入密码"},{max:64,message:"最多可输入64个字符"}],topicPrefix:[{max:64,message:"最多可输入64个字符"}],maxMessageSize:[{required:!0,message:"请输入最大消息长度"}],secure:[{required:!0}],certId:[{required:!0,message:"请选择证书"}],privateKeyAlias:[{required:!0,message:"请输入私钥别名"},{max:64,message:"最多可输入64个字符"}],parserType:[{required:!0,message:"请选择粘拆包规则"}],delimited:[{required:!0,message:"请输入分隔符"},{max:64,message:"最多可输入64个字符"}],lang:[{required:!0,message:"请选择脚本语言"},{max:64,message:"最多可输入64个字符"}],script:[{required:!0,message:"请输入脚本"}],size:[{required:!0,message:"请输入长度值"},{validator:Ot,message:"请输入0~65535之间的正整数",trigger:"change"}],length:[{required:!0,message:"请选择长度"}],offset:[{pattern:N.regOnlyNumber,message:"请输入0-65535之间的正整数"}]},Vt={class:"container"},xt={key:0,style:{border:"1px #d9d9d9 solid","margin-bottom":"12px"}},Mt={class:"collapse-header"},Dt={class:"form2-row"},qt={class:"form2-row"},Ht={style:{width:"100%",height:"400px"}},jt={class:"footer"},zt=fe({name:"AccessNetwork"}),Qt=fe({...zt,setup(L){const b=He(),P=b.query.type,O=P?"false":b.query.view,U=b.params.id,E=w(["1"]),V=w(!1),X=w(),W=w(),I=w(!0),Q=Pt(),{configRef:Y,resourcesClusters:ee}=je(Q),c=w({...St}),_e=w([]),K=w([]),M=w([]),$=w([]),te=w([]),ae=w([]),oe=ce({typescript:""}),ve=(o,s)=>{s.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!1}),s.languages.typescript.javascriptDefaults.setCompilerOptions({allowJs:!0,checkJs:!0,allowNonTsExtensions:!0,target:s.languages.typescript.ScriptTarget.ESNext,strictNullChecks:!1,strictPropertyInitialization:!0,strictFunctionTypes:!0,strictBindCallApply:!0,useDefineForClassFields:!0,moduleResolution:s.languages.typescript.ModuleResolutionKind.NodeJs,module:s.languages.typescript.ModuleKind.CommonJS,typeRoots:["types"],lib:["esnext"]})},_=ce({cluster:[{...S(j),id:"1"}]}),ye=o=>{let s=_.cluster.indexOf(o);s!==-1&&_.cluster.splice(s,1)},he=()=>{const o=Date.now();_.cluster.push({...S(j),id:o}),E.value=[...E.value,o.toString()]},k=(o,s)=>s.label.toLowerCase().indexOf(o.toLowerCase())>=0,Ce=(o,s)=>JSON.stringify(s.label).indexOf(o)>=0,Te=(o,s)=>{let i=s;Rt.includes(s)?i="TCP":kt.includes(s)&&(i="UDP");const n=o==null?void 0:o.filter(u=>Object.keys(u.ports).includes(i));return n==null?void 0:n.map(u=>(u.ports=u.ports[i],u))},J=(o,s=0)=>{var h;if(!o)return;const i=c.value.type,n=_.cluster[s].configuration.host,f=Te(S(o),i).find(y=>y.host===n);$.value[s]=(h=f==null?void 0:f.ports)==null?void 0:h.map(y=>({label:y,value:y}))},se=o=>{I.value=o,E.value=["1"],_.cluster=[{...S(j),id:"1"}]},be=o=>{if(le(),_.cluster=[{...S(j),id:"1"}],o!=="MQTT_CLIENT"){const{configuration:s}=_.cluster[0];o&&(s.host="0.0.0.0")}else Z&&(c.value.shareCluster=!1,se(c.value.shareCluster));o==="TCP_SERVER"&&vt().then(s=>{s.status===200&&(oe.typescript=s.result)})},D=()=>{var n,u;const{cluster:o}=_,s=o==null?void 0:o.map(f=>f.serverId),i=I.value?(n=Y.value||[])==null?void 0:n.filter(f=>!s.includes(f.clusterNodeId)):(u=ae.value)==null?void 0:u.filter(f=>!s.includes(f.id));o.forEach((f,h)=>{K.value[h]=i==null?void 0:i.map(y=>I.value?{value:y.clusterNodeId,label:y.clusterNodeId}:{value:y.id,label:y.name}),f.serverId&&K.value[h].push({value:f.serverId,label:f.serverId})})},Ie=async(o,s)=>{const{configuration:i}=_.cluster[s];i.host=void 0,i.port=void 0,_e.value[s]=[],o&&D()},re=(o,s,i,n)=>{var u,f,h;if((u=_.cluster)!=null&&u[i]){const{configuration:y}=(f=_.cluster)==null?void 0:f[i];n||(y.port=void 0);const R=(h=ee.value)==null?void 0:h[o||""];R&&J(R,i)}},we=(o,s)=>{const i=_.cluster[s].configuration;i.parserConfiguration=S(me),o==="SCRIPT"&&(i.parserConfiguration.lang="javascript")},Ee=(o,s)=>{if(!o){const i=_.cluster[s].configuration;i.certId=void 0,i.privateKeyAlias=""}},Pe=async()=>{var u,f,h,y;await((u=X.value)==null?void 0:u.validate());const o=await((f=W.value)==null?void 0:f.validate().catch(R=>{R.errorFields.forEach(q=>{const F=_.cluster[q.name[1]].id;E.value.includes(F)||E.value.push(F)})}));if(!(o!=null&&o.cluster))return de("请新增或完善配置","error");const{configuration:s}=o==null?void 0:o.cluster[0],i=I.value?{...c.value,configuration:s}:{...c.value,...o};V.value=!0;const n=U===":id"?await yt(i).catch(()=>{}):await ht({...i,id:U}).catch(()=>{});V.value=!1,(n==null?void 0:n.status)===200&&(de("操作成功","success"),history.back(),window.onTabSaveSuccess&&(h=n.result)!=null&&h.id&&Ct((y=n.result)==null?void 0:y.id).then(()=>{window.onTabSaveSuccess(n),setTimeout(()=>window.close(),300)}))},Ue=async()=>{const o=await Tt();o.status===200&&(M.value=o.result.map(s=>({label:s.name,value:s.id})),!M.value.every(s=>s.value==="UDP")&&!P&&(c.value.type=M.value[0].value))},Se=async()=>{const o=await bt();o.status===200&&(te.value=o.result.map(s=>({value:s.id,label:s.name})))},le=()=>{It().then(o=>{var s,i;if(o.status===200){Q.setConfigRef(o.result||[]);const n=(i=(s=o.result)==null?void 0:s[0])==null?void 0:i.clusterNodeId,u=S(ee.value||{});u[n]=o.result,Q.setResourcesClusters(u),J(o.result)}})},Re=()=>{wt().then(o=>{o.status===200&&(ae.value=o.result)})},ke=()=>{U!==":id"&&(V.value=!0,Et(U).then(o=>{if(o.status===200){const s=o.result,{configuration:i,cluster:n}=s;c.value={...s},I.value=s.shareCluster,E.value=["1"],s.shareCluster?_.cluster[0].configuration={...S(ge),...i}:_.cluster=n,_.cluster.length===1&&(_.cluster[0].id="1")}}),V.value=!1)};return ze(()=>{Ue(),Se(),le(),Z&&Re(),ke()}),H(()=>c.value.shareCluster,o=>{const{cluster:s}=_;s&&(o&&(s[0].configuration.host="0.0.0.0"),D())},{deep:!0,immediate:!0}),H(()=>I.value,o=>{c.value.shareCluster=o,o?J(Y.value):$.value[0]=[],D()},{deep:!0}),H(()=>{var o;return(o=_.cluster)==null?void 0:o.length},()=>{D()},{deep:!0,immediate:!0}),H(()=>P,o=>{if(o){const{cluster:s}=_;c.value.type=o,s[0].configuration.host="0.0.0.0"}},{deep:!0,immediate:!0}),(o,s)=>{const i=Ze,n=Xe,u=We,f=Ye,h=B("AIcon"),y=et,R=tt,q=at,F=ot,Fe=st,ne=rt,x=lt,Ae=nt,ue=ut,Ne=it,Le=ct,Oe=dt,Ve=pt,ie=ft,xe=mt,Me=gt,De=B("FullPage"),qe=B("page-container");return p(),m(qe,null,{default:t(()=>[a(De,null,{default:t(()=>[a(Me,null,{default:t(()=>[A("div",Vt,[a(ie,{model:e(c),ref_key:"formRef1",ref:X,name:"basic",autocomplete:"off",layout:"vertical"},{default:t(()=>[a(F,{gutter:[24,0]},{default:t(()=>[a(u,{span:12},{default:t(()=>[a(n,{label:"名称",name:"name",rules:e(v).name},{default:t(()=>[a(i,{value:e(c).name,"onUpdate:value":s[0]||(s[0]=r=>e(c).name=r),placeholder:"请输入名称"},null,8,["value"])]),_:1},8,["rules"])]),_:1}),a(u,{span:12},{default:t(()=>[a(n,{label:"类型",name:"type",rules:e(v).type},{default:t(()=>[a(f,{value:e(c).type,"onUpdate:value":s[1]||(s[1]=r=>e(c).type=r),options:e(M),placeholder:"请选择类型",allowClear:"","show-search":"","filter-option":k,onChange:be,disabled:!!e(P)||e(U)!==":id"},null,8,["value","options","disabled"])]),_:1},8,["rules"])]),_:1}),e(Z)?(p(),m(u,{key:0,span:24},{default:t(()=>[a(n,{name:"shareCluster",rules:e(v).shareCluster},{label:t(()=>[T(" 集群 "),a(y,{title:"共享配置:集群下所有节点共用同一配置,独立配置:集群下不同节点使用不同配置"},{default:t(()=>[a(h,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})]),default:t(()=>[a(q,{value:e(c).shareCluster,"onUpdate:value":s[2]||(s[2]=r=>e(c).shareCluster=r),"button-style":"solid",onChange:s[3]||(s[3]=r=>se(e(c).shareCluster))},{default:t(()=>[a(R,{value:!0,disabled:e(c).type==="MQTT_CLIENT"},{default:t(()=>[T("共享配置")]),_:1},8,["disabled"]),a(R,{value:!1},{default:t(()=>[T("独立配置")]),_:1})]),_:1},8,["value"])]),_:1},8,["rules"])]),_:1})):g("",!0)]),_:1}),!e(I)&&e(_).cluster.length===0?(p(),G("div",xt,[a(Fe,{style:{"margin-top":"12px"}})])):g("",!0),a(ie,{ref_key:"formRef2",ref:W,layout:"vertical",name:"dynamic_form_nest_item",model:e(_),class:"form2"},{default:t(()=>[(p(!0),G(Qe,null,Ke(e(_).cluster,(r,d)=>(p(),G("div",{key:r.id},[a(Oe,{activeKey:e(E),"onUpdate:activeKey":s[4]||(s[4]=l=>$e(E)?E.value=l:null),class:Je([e(c).shareCluster?"collapse-panel":"collapse"]),ghost:e(c).shareCluster,collapsible:"header"},{default:t(()=>[(p(),m(Le,{key:d+1,"show-arrow":!e(c).shareCluster},Be({default:t(()=>[a(F,{gutter:[24,0]},{default:t(()=>[e(I)?g("",!0):(p(),m(u,{key:0,span:12},{default:t(()=>[a(n,{name:["cluster",d,"serverId"],label:"节点名称",rules:e(v).serverId},{default:t(()=>[a(f,{value:r.serverId,"onUpdate:value":l=>r.serverId=l,options:e(K)[d],placeholder:"请选择节点名称",allowClear:"","show-search":"","filter-option":k,onChange:l=>Ie(r.serverId,d)},null,8,["value","onUpdate:value","options","filter-option","onChange"])]),_:2},1032,["name","rules"])]),_:2},1024)),e(C)("host",e(c).type)?(p(),m(u,{key:1,span:12},{default:t(()=>[a(n,{name:["cluster",d,"configuration","host"],rules:e(v).host},{label:t(()=>[T(" 本地地址 "),a(y,{title:"绑定到服务器上的网卡地址,绑定到所有网卡:0.0.0.0"},{default:t(()=>[a(h,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})]),default:t(()=>[a(Ut,{value:r.configuration.host,"onUpdate:value":l=>r.configuration.host=l,serverId:r.serverId,shareCluster:e(I),onChange:l=>re(r.serverId,l,d),onValueChange:l=>re(r.serverId,l,d,!0)},null,8,["value","onUpdate:value","serverId","shareCluster","onChange","onValueChange"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("port",e(c).type)?(p(),m(u,{key:2,span:12},{default:t(()=>[a(n,{name:["cluster",d,"configuration","port"],rules:e(v).port},{label:t(()=>[T(" 本地端口 "),a(y,{title:"监听指定端口的请求"},{default:t(()=>[a(h,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})]),default:t(()=>[a(f,{value:r.configuration.port,"onUpdate:value":l=>r.configuration.port=l,options:e($)[d],placeholder:"请选择本地端口",allowClear:"","show-search":"","filter-option":Ce},null,8,["value","onUpdate:value","options","filter-option"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("publicHost",e(c).type)?(p(),m(u,{key:3,span:12},{default:t(()=>[a(n,{name:["cluster",d,"configuration","publicHost"],rules:e(v).publicHost},{label:t(()=>[T(" 公网地址 "),a(y,{title:"对外提供访问的地址,内网环境时填写服务器的内网IP地址"},{default:t(()=>[a(h,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})]),default:t(()=>[a(i,{value:r.configuration.publicHost,"onUpdate:value":l=>r.configuration.publicHost=l,placeholder:"请输入公网地址",allowClear:""},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("publicPort",e(c).type)?(p(),m(u,{key:4,span:12},{default:t(()=>[a(n,{name:["cluster",d,"configuration","publicPort"],rules:e(v).publicPort},{label:t(()=>[T(" 公网端口 "),a(y,{title:"对外提供访问的端口"},{default:t(()=>[a(h,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})]),default:t(()=>[a(x,{style:{width:"100%"},placeholder:"请输入端口",value:r.configuration.publicPort,"onUpdate:value":l=>r.configuration.publicPort=l,min:1,max:65535},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("remoteHost",e(c).type)?(p(),m(u,{key:5,span:12},{default:t(()=>[a(n,{name:["cluster",d,"configuration","remoteHost"],rules:e(v).remoteHost,label:"远程地址"},{default:t(()=>[a(i,{placeholder:"请输入远程地址",value:r.configuration.remoteHost,"onUpdate:value":l=>r.configuration.remoteHost=l},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("remotePort",e(c).type)?(p(),m(u,{key:6,span:12},{default:t(()=>[a(n,{label:"远程端口",name:["cluster",d,"configuration","remotePort"],rules:e(v).remotePort},{default:t(()=>[a(x,{style:{width:"100%"},placeholder:"请输入远程端口",value:r.configuration.remotePort,"onUpdate:value":l=>r.configuration.remotePort=l,min:1,max:65535},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("clientId",e(c).type)?(p(),m(u,{key:7,span:12},{default:t(()=>[a(n,{label:"clientId",name:["cluster",d,"configuration","clientId"],rules:e(v).clientId},{default:t(()=>[a(i,{value:r.configuration.clientId,"onUpdate:value":l=>r.configuration.clientId=l,placeholder:"请输入ClientId"},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("username",e(c).type)?(p(),m(u,{key:8,span:12},{default:t(()=>[a(n,{label:"用户名",name:["cluster",d,"configuration","username"],rules:e(v).username},{default:t(()=>[a(i,{value:r.configuration.username,"onUpdate:value":l=>r.configuration.username=l,placeholder:"请输入用户名"},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("password",e(c).type)?(p(),m(u,{key:9,span:12},{default:t(()=>[a(n,{label:"密码",name:["cluster",d,"configuration","password"],rules:e(v).password},{default:t(()=>[a(Ae,{value:r.configuration.password,"onUpdate:value":l=>r.configuration.password=l,placeholder:"请输入密码"},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("topicPrefix",e(c).type)?(p(),m(u,{key:10,span:12},{default:t(()=>[a(n,{name:["cluster",d,"configuration","topicPrefix"],rules:e(v).topicPrefix},{label:t(()=>[T(" 订阅前缀 "),a(y,{title:"当连接的服务为EMQ时,可能需要使用共享的订阅前缀,如:$queue或$share"},{default:t(()=>[a(h,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})]),default:t(()=>[a(i,{value:r.configuration.topicPrefix,"onUpdate:value":l=>r.configuration.topicPrefix=l,placeholder:"请输入订阅前缀"},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("maxMessageSize",e(c).type)?(p(),m(u,{key:11,span:12},{default:t(()=>[a(n,{name:["cluster",d,"configuration","maxMessageSize"],rules:e(v).maxMessageSize},{label:t(()=>[T(" 最大消息长度 "),a(y,{title:"单次收发消息的最大长度,单位:字节;设置过大可能会影响性能"},{default:t(()=>[a(h,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})]),default:t(()=>[a(x,{style:{width:"100%"},value:r.configuration.maxMessageSize,"onUpdate:value":l=>r.configuration.maxMessageSize=l,placeholder:"请输入最大消息长度",min:1024,max:1073741824},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),a(u,{span:24},{default:t(()=>[a(n,{label:e(C)("secure",e(c).type)?"开启DTLS":"开启TLS",name:["cluster",d,"configuration","secure"],rules:e(v).secure,onChange:l=>Ee(r.configuration.secure,d)},{default:t(()=>[a(q,{value:r.configuration.secure,"onUpdate:value":l=>r.configuration.secure=l},{default:t(()=>[a(ue,{value:!0},{default:t(()=>[T("是")]),_:1}),a(ue,{value:!1},{default:t(()=>[T("否")]),_:1})]),_:2},1032,["value","onUpdate:value"])]),_:2},1032,["label","name","rules","onChange"])]),_:2},1024),A("div",Dt,[r.configuration.secure?(p(),m(u,{key:0,span:12},{default:t(()=>[a(n,{label:"证书",name:["cluster",d,"configuration","certId"],rules:e(v).certId,class:"form2-left"},{default:t(()=>[a(f,{value:r.configuration.certId,"onUpdate:value":l=>r.configuration.certId=l,options:e(te),placeholder:"请选择证书",allowClear:"","show-search":"","filter-option":k},null,8,["value","onUpdate:value","options","filter-option"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),r.configuration.secure?(p(),m(u,{key:1,span:12},{default:t(()=>[a(n,{label:"私钥别名",name:["cluster",d,"configuration","privateKeyAlias"],rules:e(v).privateKeyAlias,class:"form2-right"},{default:t(()=>[a(i,{value:r.configuration.privateKeyAlias,"onUpdate:value":l=>r.configuration.privateKeyAlias=l,placeholder:"请输入私钥别名"},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0)]),e(C)("parserType",e(c).type)?(p(),m(u,{key:12,span:24},{default:t(()=>[a(n,{name:["cluster",d,"configuration","parserType"],rules:e(v).parserType},{label:t(()=>[T(" 粘拆包规则 "),a(y,{title:"处理TCP粘拆包的方式"},{default:t(()=>[a(h,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})]),default:t(()=>[a(f,{style:{width:"48.5%"},value:r.configuration.parserType,"onUpdate:value":l=>r.configuration.parserType=l,options:e(At),placeholder:"请选择粘拆包规则",allowClear:"","show-search":"","filter-option":k,onChange:l=>we(r.configuration.parserType,d)},null,8,["value","onUpdate:value","options","filter-option","onChange"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),A("div",qt,[e(C)("delimited",r.configuration.parserType)?(p(),m(u,{key:0,span:12},{default:t(()=>[a(n,{label:"分隔符",name:["cluster",d,"configuration","parserConfiguration","delimited"],rules:e(v).delimited,class:"form2-left"},{default:t(()=>[a(i,{value:r.configuration.parserConfiguration.delimited,"onUpdate:value":l=>r.configuration.parserConfiguration.delimited=l,placeholder:"请输入分隔符"},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("script",r.configuration.parserType)?(p(),m(u,{key:1,span:24},{default:t(()=>[a(n,{label:"解析脚本",name:["cluster",d,"configuration","parserConfiguration","script"],rules:e(v).script,class:"form2-left form2-right"},{default:t(()=>[A("div",Ht,[a(Ne,{theme:"vs",modelValue:r.configuration.parserConfiguration.script,"onUpdate:modelValue":l=>r.configuration.parserConfiguration.script=l,language:"javascript",init:ve,registrationTypescript:e(oe)},null,8,["modelValue","onUpdate:modelValue","init","registrationTypescript"])])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("size",r.configuration.parserType)?(p(),m(u,{key:2,span:12},{default:t(()=>[a(n,{label:"长度值",name:["cluster",d,"configuration","parserConfiguration","size"],rules:e(v).size,class:"form2-left"},{default:t(()=>[a(x,{style:{width:"100%"},value:r.configuration.parserConfiguration.size,"onUpdate:value":l=>r.configuration.parserConfiguration.size=l,placeholder:"请输入长度值"},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("length",r.configuration.parserType)?(p(),m(u,{key:3,span:12},{default:t(()=>[a(n,{label:"字节长度",name:["cluster",d,"configuration","parserConfiguration","length"],rules:e(v).length,class:"form2-left"},{default:t(()=>[a(f,{style:{width:"100%"},value:r.configuration.parserConfiguration.length,"onUpdate:value":l=>r.configuration.parserConfiguration.length=l,options:e(Nt),placeholder:"请选择长度",allowClear:"","show-search":"","filter-option":k},null,8,["value","onUpdate:value","options","filter-option"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("offset",r.configuration.parserType)?(p(),m(u,{key:4,span:12},{default:t(()=>[a(n,{label:"偏移量",name:["cluster",d,"configuration","parserConfiguration","offset"],rules:e(v).offset,class:"form2-right"},{default:t(()=>[a(x,{style:{width:"100%"},value:r.configuration.parserConfiguration.offset,"onUpdate:value":l=>r.configuration.parserConfiguration.offset=l,placeholder:"请输入偏移量",min:0,max:65535},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])]),_:2},1024)):g("",!0),e(C)("little",r.configuration.parserType)?(p(),m(u,{key:5,span:12},{default:t(()=>[a(n,{label:"大小端",name:["cluster",d,"configuration","parserConfiguration","little"],class:"form2-left"},{default:t(()=>[a(f,{style:{width:"100%"},value:r.configuration.parserConfiguration.little,"onUpdate:value":l=>r.configuration.parserConfiguration.little=l,options:e(Lt),placeholder:"请选择大小端",allowClear:"","show-search":"","filter-option":k},null,8,["value","onUpdate:value","options","filter-option"])]),_:2},1032,["name"])]),_:2},1024)):g("",!0)])]),_:2},1024)]),_:2},[e(I)?void 0:{name:"header",fn:t(()=>[A("div",Mt,Ge(r.serverId?r.serverId:e(c).shareCluster?"":`#${d+1}.配置信息`),1)]),key:"0"},e(I)?void 0:{name:"extra",fn:t(()=>[a(ne,{danger:"",popConfirm:{title:"确认删除？",onConfirm:()=>ye(r)}},{default:t(()=>[T("删除")]),_:2},1032,["popConfirm"])]),key:"1"}]),1032,["show-arrow"]))]),_:2},1032,["activeKey","class","ghost"])]))),128)),e(I)?g("",!0):(p(),m(n,{key:0},{default:t(()=>[a(Ve,{type:"primary",block:"",ghost:"",onClick:he},{default:t(()=>[a(h,{type:"PlusOutlined"}),T(" 新增 ")]),_:1})]),_:1}))]),_:1},8,["model"]),a(F,{gutter:[24,0]},{default:t(()=>[a(u,{span:24},{default:t(()=>[a(n,{label:"说明",name:"description"},{default:t(()=>[a(xe,{value:e(c).description,"onUpdate:value":s[5]||(s[5]=r=>e(c).description=r),"show-count":"",maxlength:200,rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),A("div",jt,[e(O)==="false"?(p(),m(ne,{key:0,type:"primary",onClick:Pe,loading:e(V),hasPermission:`link/Type:${e(U)!==":id"?"update":"add"}`},{default:t(()=>[T(" 保存 ")]),_:1},8,["loading","hasPermission"])):g("",!0)])]),_:1})]),_:1})]),_:1})}}});const Wt=_t(Qt,[["__scopeId","data-v-f5c7ffc4"]]);export{Wt as default};
