import{h as T,ab as j,a4 as k,ac as A,x as L,a0 as B,a1 as E,a2 as J,a3 as N,g as q}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import"./index-1730252110824287.js";import{d as g,k as F,e as U,ab as V,U as $,Z as z,f as s,X as n,u as l,R as O,_ as c,$ as p,F as Q,af as X,ag as Z}from"./vue-1730252110824.js";const y=i=>(X("data-v-2324736b"),i=i(),Z(),i),G=["src"],H={style:{"font-size":"16px","font-weight":"600"}},M=y(()=>c("div",{class:"card-item-content-text"}," 设备类型 ",-1)),W=y(()=>c("div",{class:"card-item-content-text"}," 产品名称 ",-1)),Y=g({name:"DeviceSelectList"}),P=g({...Y,props:{rowKeys:{type:Array,default:()=>[]},productId:{type:String,default:""}},emits:["update"],setup(i,{emit:x}){const r=i,u=F({}),w=U(()=>r.rowKeys.map(e=>e.value)),_=[{title:"ID",dataIndex:"id",width:300,ellipsis:!0,fixed:"left",search:{type:"string"}},{title:"设备名称",dataIndex:"name",width:200,ellipsis:!0,search:{type:"string",first:!0}},{title:"创建时间",dataIndex:"createTime",width:200,search:{type:"date"}},{title:"状态",dataIndex:"state",width:90,search:{type:"select",options:[{label:"禁用",value:"notActive"},{label:"离线",value:"offline"},{label:"在线",value:"online"}]}}],I=e=>{u.value=e},b=e=>{const t=[];r.rowKeys&&r.rowKeys.forEach(d=>{t.push({name:"id",value:d})}),t.push({name:"createTime",order:"desc"});const o=[...e.terms,{terms:[{column:"productId",value:r.productId}]}];return j({...e,terms:o,sorts:t})},S=e=>{const t=k(r.rowKeys),o=t.findIndex(d=>d.value===e.id);o!==-1?t.splice(o,1):t.push({name:e.name,value:e.id}),x("update",t)};return(e,t)=>{const o=A,d=L,C=V("Ellipsis"),m=B,D=E,K=J,R=N;return $(),z(Q,null,[s(o,{columns:_,type:"simple",onSearch:I,class:"scene-search",target:"scene-triggrt-device-device"}),s(d,{style:{margin:"0"}}),s(R,{ref:"actionRef",model:"CARD",columns:_,request:b,gridColumn:2,params:l(u),bodyStyle:{paddingRight:0,paddingLeft:0}},{card:n(a=>{var v,h;return[s(K,{value:a,active:l(w).includes(a.id),status:(v=a.state)==null?void 0:v.value,statusText:(h=a.state)==null?void 0:h.text,statusNames:{online:"processing",offline:"error",notActive:"warning"},onClick:S},{img:n(()=>[O(e.$slots,"img",{},()=>[c("img",{width:"80",height:"80",src:a.photoUrl||l(T)("/device/instance/device-card.png")},null,8,G)],!0)]),content:n(()=>[s(C,{style:{width:"calc(100% - 100px)"}},{default:n(()=>[c("span",H,p(a.name),1)]),_:2},1024),s(D,null,{default:n(()=>[s(m,{span:12},{default:n(()=>{var f;return[M,c("div",null,p((f=a.deviceType)==null?void 0:f.text),1)]}),_:2},1024),s(m,{span:12},{default:n(()=>[W,c("div",null,p(a.productName),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value","active","status","statusText"])]}),_:3},8,["params"])],64)}}});const de=q(P,[["__scopeId","data-v-2324736b"]]);export{de as default};
