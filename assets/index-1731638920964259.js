import{X as F,K as M,M as j,g as L}from"./index-1731638920964.js";import"./index-1731638920964276.js";import{f as R}from"./noticeRule-1731638920964.js";import A from"./index-1731638920964256.js";import{d as E,k as u,o as O,ab as v,U as n,V as f,X as a,f as d,_ as s,E as b,u as C,G as P,a0 as U,Z as h,F as I,a1 as N,$ as X,Y as $}from"./vue-1731638920964.js";import"./index-1731638920964291.js";import"./index-1731638920964277.js";import"./index-1731638920964258.js";import"./index-1731638920964286.js";import"./NotifyWay-17316389209642.js";import"./data-17316389209647.js";import"./NotifyConfig-17316389209642.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import"./config-17316389209642.js";import"./const-17316389209642.js";import"./NotifyTemplate-17316389209642.js";import"./template-1731638920964.js";import"./VariableDefinitions.vue_vue_type_script_setup_true_lang-17316389209642.js";import"./BuildIn.vue_vue_type_script_setup_true_name_NotifyBuildIn_lang-17316389209642.js";import"./Tag.vue_vue_type_script_setup_true_lang-17316389209642.js";import"./InputFile.vue_vue_type_script_setup_true_lang-17316389209642.js";import"./index-1731638920964257.js";import"./index-1731638920964255.js";import"./user-17316389209642.js";import"./index-1731638920964254.js";const q={class:"content"},z={style:{"margin-bottom":"15px"}},D={class:"alert"},G={class:"content-collapse"},T={key:0,style:{"margin-left":"10px"},class:"alert"},Y=E({__name:"index",setup(Z){const S=F();let c=[];const y=[{provider:"alarm",name:"告警",children:[{provider:"alarm-product",name:"产品告警"},{provider:"alarm-device",name:"设备告警"},{provider:"alarm-org",name:"组织告警"},{provider:"alarm-other",name:"其他告警"}]},{provider:"system-monitor",name:"系统监控",children:[{provider:"system-event",name:"系统运行异常"}]},{provider:"system-business",name:"业务监控",children:[{provider:"device-transparent-codec",name:"透传消息解析异常"}]}],K=[{provider:"workflow-notification",name:"工作流通知",children:[{provider:"workflow-task-todo",name:"待办通知"},{provider:"workflow-task-reject",name:"驳回通知"},{provider:"workflow-task-cc",name:"抄送通知"},{provider:"workflow-process-finish",name:"办结通知"},{provider:"workflow-process-repealed",name:"关闭通知"},{provider:"workflow-task-transfer-todo",name:"转办通知"}]}],i=u();u([]);const k=u([]),g=()=>{R().then(m=>{if(m.status===200){const p=c.map(e=>{const o=e.children.map(r=>{const _=(m.result||[]).find(l=>(l==null?void 0:l.provider)===(r==null?void 0:r.provider));return{...r,..._}});return{...e,children:o}}).filter(e=>{var o;return(o=e.children.filter(r=>r==null?void 0:r.id))==null?void 0:o.length}).map(e=>({...e,children:e.children.filter(o=>o==null?void 0:o.id)}));k.value=p}})},V=()=>{g()};return O(()=>{S.hasMenu("process")?(c=[...y,...K],i.value=["alarm","system-monitor","system-business","workflow-notification"]):(c=[...y],i.value=["alarm","system-monitor","system-business"]),g()}),(m,p)=>{const e=v("AIcon"),o=M,r=j,_=v("FullPage"),l=v("page-container");return n(),f(l,null,{default:a(()=>[d(_,null,{default:a(()=>[s("div",q,[s("div",z,[s("div",D,[d(e,{type:"InfoCircleOutlined"}),b(" 启用通知类型后，你可以为每种通知类型配置不同的通知方式、通知模板、接收人。 ")])]),s("div",G,[d(r,{bordered:!1,activeKey:C(i),"onUpdate:activeKey":p[0]||(p[0]=t=>P(i)?i.value=t:null),"expand-icon-position":"right"},{expandIcon:a(({isActive:t})=>[d(e,{type:"CaretRightOutlined",style:U({transform:`rotate(${t?90:0}deg)`})},null,8,["style"])]),default:a(()=>[(n(!0),h(I,null,N(C(k),t=>(n(),f(o,{key:t.provider},{header:a(()=>[s("div",null,[b(X(t.name)+" ",1),t.provider==="alarm"?(n(),h("span",T,"注意：接收人需要有告警配置页面查询权限，才能收到告警类通知")):$("",!0)])]),default:a(()=>[s("div",null,[(n(!0),h(I,null,N(t.children,(w,B)=>{var x;return n(),f(A,{key:w.provider,data:w,onRefresh:V,isLast:B===((x=t.children)==null?void 0:x.length),provider:t.provider},null,8,["data","isLast","provider"])}),128))])]),_:2},1024))),128))]),_:1},8,["activeKey"])])])]),_:1})]),_:1})}}});const Ne=L(Y,[["__scopeId","data-v-0e0b30b8"]]);export{Ne as default};
