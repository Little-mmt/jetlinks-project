import{X as j,h as q,au as F,o as p,Z as R,fP as $,fQ as H,a2 as J,a3 as X}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import Z from"./index-1730252110824179.js";import{f as z,g as k,h as L}from"./auto-1730252110824.js";import{d as Q,k as h,ab as r,U as m,Z as x,f as a,X as t,u as d,E as T,W as U,R as W,_ as i,$ as u,V as D,F as w,Y as G}from"./vue-1730252110824.js";const K=["src"],ee={style:{"font-size":"16px","font-weight":"700"}},te=i("div",{class:"card-item-content-text"}," 计划ID ",-1),ae=i("div",{class:"card-item-content-text"}," 创建时间 ",-1),ne=i("div",{class:"card-item-content-text"}," 抓拍保存周期（天） ",-1),fe=Q({__name:"index",setup(se){const _=h(!1),C=h(),f=j(),y=h(),v=[{title:"ID",dataIndex:"id",key:"id",width:200,fixed:"left",search:{type:"string"},ellipsis:!0},{title:"名称",dataIndex:"name",key:"name",search:{type:"string",first:!0},ellipsis:!0},{title:"状态",dataIndex:"state",key:"state",width:100,search:{type:"select",options:[{label:"正常",value:"enabled"},{label:"禁用",value:"disabled"}]}}],I=(e,O)=>e?[{key:"update",text:"编辑",tooltip:{title:"编辑"},icon:"EditOutlined",onClick:()=>{f.jumpPage("media/TimingCapture/Plan/Detail",{id:e.id},{type:"edit"})}},{key:"action",text:e.state.value==="enabled"?"禁用":"启用",tooltip:{title:e.state.value==="enabled"?"禁用":"启用"},icon:e.state.value==="enabled"?"StopOutlined":"CheckCircleOutlined",popConfirm:{title:`确认${e.state.value==="enabled"?"禁用":"启用"}?`,onConfirm:()=>{let s;return e.state.value==="enabled"?s=k(e.id,{state:"disabled"}):s=k(e.id,{state:"enabled"}),s.then(c=>{var o;c&&c.status===200?(p("操作成功！"),(o=y.value)==null||o.reload()):p("操作失败！","error")}),s}}},{key:"delete",text:"删除",tooltip:{title:e.state.value==="enabled"?"正常计划无法删除":"删除"},disabled:e.state.value==="enabled",popConfirm:{title:"确认删除?",onConfirm:()=>{const s=L(e.id);return s.then(c=>{var o;c.status===200?(p("操作成功！"),(o=y.value)==null||o.reload()):p("操作失败！","error")}),s}},icon:"DeleteOutlined"}]:[],S=()=>{_.value=!0},B=e=>{C.value=e},P=e=>{f.jumpPage("media/TimingCapture/Plan/Detail",{id:e.id},{type:"view"})},A=e=>{_.value=!1,e&&f.jumpPage("media/TimingCapture/Plan/Detail",{id:e},{type:"edit"})};return(e,O)=>{const b=r("pro-search"),s=r("AIcon"),c=R,o=r("Ellipsis"),g=$,V=H,E=J,M=X,N=r("FullPage"),Y=r("page-container");return m(),x(w,null,[a(Y,null,{default:t(()=>[a(b,{columns:v,target:"timing-capture-plan",onSearch:B}),a(N,null,{default:t(()=>[a(M,{ref_key:"tableRef",ref:y,columns:v,request:d(z),model:"CARD",gridColumn:2,defaultParams:{sorts:[{name:"createTime",order:"desc"}],terms:[{column:"type",value:"screenshot",termType:"eq"}]},params:d(C)},{headerTitle:t(()=>[a(c,{type:"primary",onClick:S,hasPermission:"media/TimingCapture/Plan:add"},{icon:t(()=>[a(s,{type:"PlusOutlined"})]),default:t(()=>[T(" 新增计划 ")]),_:1})]),card:t(n=>[a(E,U({value:n,actions:I(n,"card"),onClick:()=>P(n)},n,{showStatus:!0,status:n.state.value,statusText:n.state.value==="enabled"?"正常":"禁用",statusNames:{enabled:"processing",disabled:"error"}}),{img:t(()=>[W(e.$slots,"img",{},()=>[i("img",{src:d(q)("/device-media.png")},null,8,K)])]),content:t(()=>[a(o,{style:{width:"calc(100% - 100px)"}},{default:t(()=>[i("span",ee,u(n.name),1)]),_:2},1024),a(V,{gutter:16,style:{"margin-top":"10px"}},{default:t(()=>[a(g,{span:8},{default:t(()=>[te,a(o,{style:{width:"calc(100% - 20px)"}},{default:t(()=>[i("div",null,u(n.id),1)]),_:2},1024)]),_:2},1024),a(g,{span:8},{default:t(()=>[ae,i("span",null,u(d(F)(n==null?void 0:n.createTime).format("YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024),a(g,{span:8},{default:t(()=>[ne,a(o,{style:{width:"calc(100% - 20px)"}},{default:t(()=>[T(u(n==null?void 0:n.saveDays),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),actions:t(l=>[a(c,{disabled:l.disabled,popConfirm:l.popConfirm,tooltip:{...l.tooltip},onClick:l.onClick,hasPermission:"media/TimingCapture/Plan:"+l.key},{default:t(()=>[l.key==="delete"?(m(),D(s,{key:0,type:"DeleteOutlined"})):(m(),x(w,{key:1},[a(s,{type:l.icon},null,8,["type"]),i("span",null,u(l==null?void 0:l.text),1)],64))]),_:2},1032,["disabled","popConfirm","tooltip","onClick","hasPermission"])]),_:2},1040,["value","actions","onClick","status","statusText"])]),_:3},8,["request","params"])]),_:3})]),_:3}),d(_)?(m(),D(Z,{key:0,onCloseModal:A})):G("",!0)],64)}}});export{fe as default};
