import{aA as i,aB as P,a5 as g}from"./index-1731638920964.js";import{k as o,b as h}from"./vue-1731638920964.js";const d={immediate:!0,formatName:"result"},E=(t,u=d)=>{const f=o(u.defaultValue),s=o(!1),a={...d,...u};async function r(...v){var c,n,m;if(t&&i(t)){s.value=!0;try{const e=await t.apply(this,v);if(s.value=!1,e!=null&&e.success){const y=await((c=a.onSuccess)==null?void 0:c.call(a,e));f.value=y||P(e,a.formatName)}else(n=a.onError)==null||n.call(a,e)}catch(e){s.value=!1,(m=a.onError)==null||m.call(a,e)}}}function l(){a.defaultParams?g(a.defaultParams)?r(...a.defaultParams):r(a.defaultParams):r()}return a.immediate&&l(),h(()=>{t&&i(t)}),{data:f,loading:s,run:r,reload:l}};export{E as u};
