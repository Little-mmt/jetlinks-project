import{T as d,L as k,B as A,o as c,d as I,as as j,I as x}from"./index-1730252110824.js";import{d as L,k as _,ab as S,U as p,V as r,X as u,f,u as o,E as U,G as b}from"./vue-1730252110824.js";const T=L({__name:"InputFile",props:{id:{type:String,default:""},value:{type:String,default:""}},emits:["update:value"],setup(g,{emit:i}){const s=_(g.value||void 0),n=_(!1),m=e=>{var t,a;if(e.file.status==="uploading"&&(n.value=!0),e.file.status==="done"){e.file.url=(t=e.file.response)==null?void 0:t.result,n.value=!1;const l=(a=e.file.response)==null?void 0:a.result;i("update:value",l)}},v=e=>{const t=e.type==="image/jpeg"||e.type==="image/png";t||c("请上传正确格式图片","error");const a=e.size/1024/1024<4;return a||c("图片大小必须小于4M","error"),t&&a},h=e=>{i("update:value",e.target.value)};return(e,t)=>{const a=S("AIcon"),l=I,y=j,B=x;return p(),r(B,{allowClear:"",placeholder:"请上传文件",value:o(s),"onUpdate:value":t[0]||(t[0]=C=>b(s)?s.value=C:null),onChange:h},{addonAfter:u(()=>[f(y,{name:"file",showUploadList:!1,accept:"image/jpeg,image/png",disabled:o(n),headers:{[o(d)]:o(k).get(o(d))},action:`${o(A)}/file/static`,onChange:m,onBeforeUpload:v},{default:u(()=>[f(l,{type:"link",style:{height:"30px"}},{default:u(()=>[o(n)?(p(),r(a,{key:0,type:"LoadingOutlined"})):(p(),r(a,{key:1,type:"PlusOutlined"})),U(" 上传附件 ")]),_:1})]),_:1},8,["disabled","headers","action"])]),_:1},8,["value"])}}});export{T as _};
