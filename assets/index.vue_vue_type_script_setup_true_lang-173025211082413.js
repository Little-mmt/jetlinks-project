import{em as Y,e1 as q,o as z,en as G,Z as H,$ as K,e as W,ah as ee,ai as te}from"./index-1730252110824.js";import"./index-1730252110824284.js";import{u as ne}from"./instance-1730252110824.js";import{_ as oe}from"./Save.vue_vue_type_script_setup_true_lang-1730252110824.js";import{d as re,k as A,w as se,ab as D,u as i,U as s,Z as _,_ as I,f as r,X as n,E as y,V as d,Y as g,F,a1 as J,$ as v}from"./vue-1730252110824.js";const ae={key:0,style:{"margin-top":"20px"}},ie={style:{display:"flex","margin-bottom":"20px","align-items":"center"}},ue=I("div",{style:{"font-size":"16px","font-weight":"700"}},"配置",-1),le={style:{"font-size":"15px"}},ce={key:0},pe={key:1},de={key:2},fe={key:3},ve=re({__name:"index",setup(_e){const t=ne(),m=A(!1),x=A([]);se(()=>t.current.id,a=>{a&&Y(a).then(o=>{o.status===200&&(x.value=o==null?void 0:o.result)})},{immediate:!0});const V=a=>{var o,u,h,l,b;return((o=t.current)==null?void 0:o.cachedConfiguration)&&((u=t.current)==null?void 0:u.cachedConfiguration[a])!==void 0&&((h=t.current)==null?void 0:h.configuration)&&((l=t.current)==null?void 0:l.configuration[a])!==((b=t.current)==null?void 0:b.cachedConfiguration[a])},M=()=>{if(t.current.id){const a=q(t.current.id);return a.then(o=>{o.status===200&&(z("操作成功"),t.refresh(t.current.id))}),a}},Z=()=>{if(t.current.id){const a=G(t.current.id);return a.then(o=>{o.status===200&&(z("恢复默认配置成功"),t.refresh(t.current.id))}),a}},L=()=>{m.value=!1,t.current.id&&t.refresh(t.current.id)};return(a,o)=>{const u=D("AIcon"),h=H,l=K,b=W,B=D("Ellipsis"),R=ee,U=te;return i(x).length?(s(),_("div",ae,[I("div",ie,[ue,r(b,null,{default:n(()=>{var f;return[r(h,{type:"link",onClick:o[0]||(o[0]=e=>m.value=!0),hasPermission:"device/Instance:update"},{icon:n(()=>[r(u,{type:"EditOutlined"})]),default:n(()=>[y(" 编辑 ")]),_:1}),((f=i(t).detail.current)==null?void 0:f.value)!=="notActive"?(s(),d(h,{key:0,type:"link",popConfirm:{title:"确认重新应用该配置？",onConfirm:M},hasPermission:"device/Instance:update"},{default:n(()=>[r(u,{type:"CheckOutlined"}),y("应用配置"),r(l,{title:"修改配置后需重新应用后才能生效。"},{default:n(()=>[r(u,{type:"QuestionCircleOutlined"})]),_:1})]),_:1},8,["popConfirm"])):g("",!0),i(t).detail.aloneConfiguration?(s(),d(h,{key:1,type:"link",popConfirm:{title:"确认恢复默认配置？",onConfirm:Z},hasPermission:"device/Instance:update"},{default:n(()=>[r(u,{type:"SyncOutlined"}),y("恢复默认"),r(l,{title:"该设备单独编辑过配置信息，点击此将恢复成默认的配置信息，请谨慎操作。"},{default:n(()=>[r(u,{type:"QuestionCircleOutlined"})]),_:1})]),_:1},8,["popConfirm"])):g("",!0)]}),_:1})]),(s(!0),_(F,null,J(i(x),f=>(s(),d(U,{bordered:"",size:"small",key:f.name},{title:n(()=>[I("h4",le,v(f.name),1)]),default:n(()=>[(s(!0),_(F,null,J(f.properties,e=>(s(),d(R,{key:e.property},{label:n(()=>[r(B,{style:{"margin-right":"5px"}},{default:n(()=>[y(v(e.name)+" ",1),e.description?(s(),d(l,{key:0,title:e.description},{default:n(()=>[r(u,{type:"QuestionCircleOutlined"})]),_:2},1032,["title"])):g("",!0)]),_:2},1024)]),default:n(()=>{var $,E,S,w,P,Q,j;return[e.type.type==="password"&&((S=(E=($=i(t).current)==null?void 0:$.configuration)==null?void 0:E[e.property])==null?void 0:S.length)>0?(s(),_("span",ce,"******")):e.type.type==="enum"?(s(),_("span",pe,[r(B,null,{default:n(()=>{var c,p;return[y(v(((p=(c=e.type.elements)==null?void 0:c.find(O=>{var C,k;return O.value===((k=(C=i(t).current)==null?void 0:C.configuration)==null?void 0:k[e.property])}))==null?void 0:p.text)||""),1)]}),_:2},1024),V(e.property)?(s(),d(l,{key:0,title:`有效值:${(P=(w=i(t).current)==null?void 0:w.configuration)==null?void 0:P[e.property]}`},{default:n(()=>[r(u,{type:"QuestionCircleOutlined"})]),_:2},1032,["title"])):g("",!0)])):e.type.type==="boolean"?(s(),_("span",de,[r(B,null,{default:n(()=>{var c,p,O,C,k;return[y(v(((k=[{label:(c=e==null?void 0:e.type)==null?void 0:c.falseText,value:(p=e==null?void 0:e.type)==null?void 0:p.falseValue},{label:(O=e==null?void 0:e.type)==null?void 0:O.trueText,value:(C=e==null?void 0:e.type)==null?void 0:C.trueValue}].find(X=>{var N,T;return X.value===((T=(N=i(t).current)==null?void 0:N.configuration)==null?void 0:T[e.property])}))==null?void 0:k.label)||""),1)]}),_:2},1024)])):(s(),_("span",fe,[r(B,null,{default:n(()=>{var c,p;return[y(v(((p=(c=i(t).current)==null?void 0:c.configuration)==null?void 0:p[e.property])||""),1)]}),_:2},1024),V(e.property)?(s(),d(l,{key:0,title:`有效值:${(j=(Q=i(t).current)==null?void 0:Q.configuration)==null?void 0:j[e.property]}`},{default:n(()=>[r(u,{type:"QuestionCircleOutlined"})]),_:2},1032,["title"])):g("",!0)]))]}),_:2},1024))),128))]),_:2},1024))),128)),i(m)?(s(),d(oe,{key:0,onSave:L,onClose:o[1]||(o[1]=f=>m.value=!1),config:i(x)},null,8,["config"])):g("",!0)])):g("",!0)}}});export{ve as _};
