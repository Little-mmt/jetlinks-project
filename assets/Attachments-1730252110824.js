import{ap as k,T as f,L as w,f_ as A,fY as E,fZ as U,as as O,I as D,d as F,g as T}from"./index-1730252110824.js";import{d as h,k as b,w as j,U as _,Z as r,F as B,a1 as N,f as o,X as u,u as n,E as K}from"./vue-1730252110824.js";const P={class:"attachment-wrapper"},S=h({name:"Attachments"}),V=h({...S,props:{attachments:{type:Array,default:()=>[]}},emits:["update:attachments"],setup(v,{emit:g}){const x=v,t=b([]);j(()=>x.attachments,e=>{t.value=e.map(a=>({id:m(),...a}))},{deep:!0});const C=(e,a)=>{var s;if(e.file.status==="done"){const c=t.value.findIndex(p=>p.id===a);t.value[c].name=e.file.name,t.value[c].location=(s=e.file.response)==null?void 0:s.result,l()}},y=e=>{const a=t.value.findIndex(s=>s.id===e);t.value.splice(a,1),l()},I=()=>{t.value.push({id:m(),name:"",location:""}),l()},l=()=>{g("update:attachments",t.value.map(({name:e,location:a})=>({name:e,location:a})))},m=()=>String(new Date().getTime()+Math.random()*9);return(e,a)=>{const s=O,c=D,p=F;return _(),r("div",P,[(_(!0),r(B,null,N(n(t),(d,L)=>(_(),r("div",{class:"attachment-item",key:L},[o(c,{value:d.name,"onUpdate:value":i=>d.name=i,onChange:l},{addonAfter:u(()=>[o(s,{name:"file",action:n(k),headers:{[n(f)]:n(w).get(n(f))},showUploadList:!1,onChange:i=>C(i,d.id)},{default:u(()=>[o(n(A))]),_:2},1032,["action","headers","onChange"])]),_:2},1032,["value","onUpdate:value"]),o(n(E),{onClick:i=>y(d.id),style:{cursor:"pointer"}},null,8,["onClick"])]))),128)),o(p,{type:"dashed",onClick:I,style:{width:"100%","margin-top":"5px"}},{icon:u(()=>[o(n(U))]),default:u(()=>[K(" 添加 ")]),_:1})])}}});const J=T(V,[["__scopeId","data-v-a32f9b42"]]);export{J as default};
