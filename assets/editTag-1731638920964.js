import{gt as b,aF as w,gu as E,gv as k,o as x,gw as B,v as I,fP as M,I as O,fQ as j,F as q,d3 as A}from"./index-1731638920964.js";import{r as L,k as d,o as P,U as R,V as S,X as s,f as t,u as n,d as U}from"./vue-1731638920964.js";const V=U({name:"EditTag"}),Q=Object.assign(V,{props:{editType:{type:String,default:"add"},editData:{type:Object,default:{}}},emits:["closeEditTag","refresh"],setup(m,{emit:f}){const l=m,a=L({color:"#000000",name:""}),_=d(),i=d(),v=({rgba:e})=>{a.color=e},c=d(!1),F=["#69B1FF","#5CDBD3","#FFAF6E","#85A5FF","#F4D160","#95DE64","#B37FEB","#FFEC3D","#FF7875","#FF85C0"],y=()=>{_.value.validate().then(async()=>{var r;c.value=!0;let e;l.editType==="add"?e=w():e=(r=l.editData)==null?void 0:r.id;const o={id:e,name:a.name};(await E(o).finally(()=>{c.value=!1})).success&&(i.value[e]=a.color,(await k(i.value).catch(()=>{c.value=!1})).success&&(x("操作成功"),f("refresh")))})},C=async()=>{const e=await B();e.success&&(i.value=e.result)};return P(()=>{var e,o;C(),l.editType==="edit"&&(a.color=((e=l.editData)==null?void 0:e.color)||"#000000",a.name=((o=l.editData)==null?void 0:o.name)||"")}),(e,o)=>{const u=I,r=M,p=O,D=j,T=q,h=A;return R(),S(h,{visible:"",title:m.editType==="add"?"新增标签":"编辑标签",onCancel:o[1]||(o[1]=g=>f("closeEditTag")),onOk:y,confirmLoading:n(c)},{default:s(()=>[t(T,{model:n(a),ref_key:"form",ref:_},{default:s(()=>[t(D,{gutter:16},{default:s(()=>[t(r,null,{default:s(()=>[t(u,{name:"color"},{default:s(()=>[t(n(b),{type:"color",hex:n(a).color,rgba:n(a).color,themeColor:F,"show-opacity":!1,onChange:v},null,8,["hex","rgba"])]),_:1})]),_:1}),t(r,{span:20},{default:s(()=>[t(u,{name:"name",rules:[{required:!0,message:"请为标签命名"},{max:16,message:"最多可输入16个字符"}]},{default:s(()=>[t(p,{value:n(a).name,"onUpdate:value":o[0]||(o[0]=g=>n(a).name=g),placeholder:"请为标签命名"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","confirmLoading"])}}});export{Q as default};
