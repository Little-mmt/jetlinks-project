import{au as T,o as S,ds as w,a3 as C,aa as D}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import{f as I,g as B}from"./cardManagement-1730252110824.js";import{d as M,k as o,ab as L,U as R,V as j,X as i,_ as V,f as c,u as t,E as Y,$ as q}from"./vue-1730252110824.js";const A={style:{"margin-top":"10px"}},F=M({__name:"BindDevice",props:{cardId:{type:String}},emits:["change"],setup(m,{emit:l}){const u=m,f=o({}),d=o({}),n=o([]),r=o(!1),s=new Map;s.set("online","processing"),s.set("offline","error"),s.set("notActive","warning");const p=[{title:"ID",dataIndex:"id",key:"id",ellipsis:!0,fixed:"left",search:{type:"string"}},{title:"设备名称",dataIndex:"name",key:"name",ellipsis:!0,search:{type:"string"}},{title:"注册时间",dataIndex:"registryTime",key:"registryTime",scopedSlots:!0,search:{type:"date"}},{title:"状态",dataIndex:"state",key:"state",scopedSlots:!0,search:{type:"select",options:[{label:"禁用",value:"notActive"},{label:"离线",value:"offline"},{label:"在线",value:"online"}]}}],_=e=>{d.value=e},g=e=>{n.value=[e.id]},y=()=>{r.value=!0,B(u.cardId,n.value[0]).then(e=>{e.status===200&&(S("操作成功"),l("change",!0))}).finally(()=>{r.value=!1})},h=()=>{l("change",!1)};return(e,N)=>{const v=L("pro-search"),x=w,b=C,k=D;return R(),j(k,{maskClosable:!1,width:"1100px",visible:!0,title:"选择设备",okText:"确定",cancelText:"取消",onOk:y,onCancel:h,confirmLoading:t(r)},{default:i(()=>[V("div",A,[c(v,{columns:p,target:"iot-card-bind-device",onSearch:_,type:"simple"}),c(b,{ref_key:"bindDeviceRef",ref:f,alertRender:!1,columns:p,request:t(I),model:"TABLE",defaultParams:{sorts:[{name:"createTime",order:"desc"}]},rowSelection:{type:"radio",selectedRowKeys:t(n),onSelect:g},params:t(d)},{registryTime:i(a=>[Y(q(a.registryTime?t(T)(a.registryTime).format("YYYY-MM-DD HH:mm:ss"):""),1)]),state:i(a=>[c(x,{text:a.state.text,status:t(s).get(a.state.value)},null,8,["text","status"])]),_:1},8,["request","rowSelection","params"])])]),_:1},8,["confirmLoading"])}}});export{F as _};
