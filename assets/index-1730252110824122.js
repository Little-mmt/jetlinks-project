import{d as W,ac as ot,k as m,r as nt,o as it,ab as U,U as b,V as E,X as a,_ as s,u as t,Y as S,f as e,E as i,$ as o,Z as q,af as dt,ag as ct}from"./vue-1730252110824.js";import{au as v,d as rt,ah as ut,d5 as _t,ai as ft,aI as pt,a0 as mt,$ as vt,a1 as ht,af as yt,g as bt}from"./index-1730252110824.js";import"./index-1730252110824288.js";import"./index-1730252110824284.js";import{q as wt,a as Dt,b as gt}from"./cardManagement-1730252110824.js";import{_ as Z}from"./Save.vue_vue_type_script_setup_true_lang-17302521108245.js";import T from"./Guide-17302521108242.js";import w from"./LineChart-1730252110824.js";import{q as Mt}from"./home-17302521108242.js";import{_ as K}from"./TimeSelect.vue_vue_type_script_setup_true_lang-17302521108242.js";import{p as Q,O as R}from"./data-17302521108245.js";import"./index-1730252110824297.js";import"./index-1730252110824279.js";const p=g=>(dt("data-v-b4d9582f"),g=g(),ct(),g),xt=p(()=>s("span",null,"基本信息",-1)),Tt={key:0,style:{"padding-left":"8px"}},Ct={class:"card"},Ot={class:"card"},Ft={class:"static-info",style:{"min-height":"490px"}},kt={class:"data-statistics-item"},Nt={class:"flow-info",style:{width:"100%"}},Yt=p(()=>s("div",{class:"label"}," 昨日流量消耗 ",-1)),It={class:"value"},At=p(()=>s("span",{class:"unit"},"M",-1)),Lt={class:"data-statistics-item"},Et={class:"flow-info",style:{width:"100%"}},St=p(()=>s("div",{class:"label"}," 当月流量消耗 ",-1)),qt={class:"value"},Bt=p(()=>s("span",{class:"unit"},"M",-1)),jt={class:"data-statistics-item"},Ht={class:"flow-info",style:{width:"100%"}},Jt=p(()=>s("div",{class:"label"}," 本年流量消耗 ",-1)),Vt={class:"value"},$t=p(()=>s("span",{class:"unit"},"M",-1)),Xt={key:1},zt={key:0},Gt=p(()=>s("span",null,"基本信息",-1)),Pt={key:0,style:{"padding-left":"8px"}},Ut={class:"card"},Zt={class:"card"},Kt={class:"static-info",style:{"min-height":"490px"}},Qt={class:"data-statistics-item"},Rt={class:"flow-info",style:{width:"100%"}},Wt=p(()=>s("div",{class:"label"}," 昨日流量消耗 ",-1)),te={class:"value"},ee=p(()=>s("span",{class:"unit"},"M",-1)),ae={class:"data-statistics-item"},le={class:"flow-info",style:{width:"100%"}},se=p(()=>s("div",{class:"label"}," 当月流量消耗 ",-1)),oe={class:"value"},ne=p(()=>s("span",{class:"unit"},"M",-1)),ie={class:"data-statistics-item"},de={class:"flow-info",style:{width:"100%"}},ce=p(()=>s("div",{class:"label"}," 本年流量消耗 ",-1)),re={class:"value"},ue=p(()=>s("span",{class:"unit"},"M",-1)),_e=W({name:"CardDetail"}),fe=W({..._e,props:{type:{type:String,default:"card"}},setup(g){const tt=g,V=ot(),D=m(),C=m(!1),O=m({}),Y=m(""),l=m({}),B=m([]),F=m(0),k=m(0),N=m(0),j=m([]),H=m([]),J=m([]),M=nt({show:!1,tip:""}),$=[{label:"昨日",value:"yesterday"},{label:"近一周",value:"week"},{label:"近一月",value:"month"},{label:"近一年",value:"year"}],X=()=>{wt(D.value).then(c=>{var f;c.success&&(l.value=c.result,((f=c.result.cardStateType)==null?void 0:f.value)==="deactivate"&&l.value.operatorName==="onelink"&&(M.show=!0,Dt(D.value).then(u=>{var r;u.success&&((r=u.result)!=null&&r.message)&&(M.tip=u.result.message.toString())})))})},z=c=>{C.value=!1,O.value={},c&&X()},I=(c,f)=>new Promise(u=>{Mt(c,f,{orderBy:"date",terms:[{column:"cardId",termType:"eq",value:D.value}]}).then(r=>{if(r.status===200){const n=r.result.sort((h,A)=>new Date(h.date).getTime()-new Date(A.date).getTime());u({sortArray:n})}})}),et=()=>{const c=[v(new Date).subtract(1,"day").startOf("day").valueOf(),v(new Date).subtract(1,"day").endOf("day").valueOf()],f=[v().startOf("month").valueOf(),v().endOf("month").valueOf()],u=[v().startOf("year").valueOf(),v().endOf("year").valueOf()];I(c[0],c[1]).then(r=>{F.value=r.sortArray.reduce((n,h)=>n+Number(h.value),0).toFixed(2),j.value=r.sortArray}),I(f[0],f[1]).then(r=>{k.value=r.sortArray.reduce((n,h)=>n+Number(h.value),0).toFixed(2),H.value=r.sortArray}),I(u[0],u[1]).then(r=>{N.value=r.sortArray.reduce((n,h)=>n+Number(h.value),0).toFixed(2),J.value=r.sortArray})},G=c=>{let f=c.start,u=c.end;(c.type==="week"||c.type==="month")&&(f=v(c.start).startOf("days").valueOf(),u=v(c.end).startOf("days").valueOf()),I(f,u).then(r=>{B.value=r.sortArray})},at=async()=>{var f,u,r,n;const c=await gt({terms:[{column:"deviceId",termType:"eq",value:V.params.id}]});c.success&&((f=c.result)!=null&&f.data)&&(D.value=(n=(r=(u=c.result)==null?void 0:u.data)==null?void 0:r[0])==null?void 0:n.id)};return it(async()=>{tt.type==="device"?await at():D.value=V.params.id,D.value&&(X(),et())}),(c,f)=>{const u=U("AIcon"),r=rt,n=ut,h=_t,A=ft,P=pt,y=mt,x=vt,L=ht,lt=U("page-container"),st=yt;return g.type==="card"?(b(),E(lt,{key:0},{default:a(()=>[s("div",null,[t(C)?(b(),E(Z,{key:0,type:t(Y),data:t(O),onChange:z},null,8,["type","data"])):S("",!0),e(L,{gutter:[24,24]},{default:a(()=>[e(y,{span:24},{default:a(()=>[e(P,null,{default:a(()=>[e(A,{size:"small",column:3,bordered:""},{title:a(()=>[e(T,null,{title:a(()=>[xt,e(r,{type:"link",onClick:f[0]||(f[0]=()=>{C.value=!0,O.value=t(l),Y.value="edit"})},{default:a(()=>[e(u,{type:"EditOutlined"}),i(" 编辑 ")]),_:1})]),_:1})]),default:a(()=>[e(n,{label:"卡号"},{default:a(()=>[i(o(t(l).id),1)]),_:1}),e(n,{label:"ICCID"},{default:a(()=>[i(o(t(l).iccId),1)]),_:1}),e(n,{label:"绑定设备"},{default:a(()=>[i(o(t(l).deviceName),1)]),_:1}),e(n,{label:"平台类型"},{default:a(()=>{var d;return[i(o(((d=t(Q).find(_=>_.value===t(l).operatorName))==null?void 0:d.label)||t(l).operatorName),1)]}),_:1}),e(n,{label:"平台名称"},{default:a(()=>[i(o(t(l).platformConfigName),1)]),_:1}),e(n,{label:"运营商"},{default:a(()=>{var d;return[i(o(((d=t(R).find(_=>_.value===t(l).operatorName))==null?void 0:d.label)||t(l).operatorName),1)]}),_:1}),e(n,{label:"类型"},{default:a(()=>{var d;return[i(o((d=t(l).cardType)==null?void 0:d.text),1)]}),_:1}),e(n,{label:"激活日期"},{default:a(()=>[i(o(t(l).activationDate?t(v)(t(l).activationDate).format("YYYY-MM-DD HH:mm:ss"):""),1)]),_:1}),e(n,{label:"更新时间"},{default:a(()=>[i(o(t(l).updateTime?t(v)(t(l).updateTime).format("YYYY-MM-DD HH:mm:ss"):""),1)]),_:1}),e(n,{label:"总流量"},{default:a(()=>[i(o(t(l).totalFlow?t(l).totalFlow.toFixed(2)+" M":"0 M"),1)]),_:1}),e(n,{label:"使用流量"},{default:a(()=>[i(o(t(l).usedFlow?t(l).usedFlow.toFixed(2)+" M":"0 M"),1)]),_:1}),e(n,{label:"剩余流量"},{default:a(()=>[i(o(t(l).residualFlow?t(l).residualFlow.toFixed(2)+" M":"0 M"),1)]),_:1}),e(n,{label:"运营商状态"},{default:a(()=>{var d,_;return[i(o((_=(d=t(l))==null?void 0:d.cardState)==null?void 0:_.text)+" ",1),t(M).show?(b(),q("span",Tt,[e(h,{title:t(M).tip},{default:a(()=>[e(u,{type:"ExclamationCircleOutlined",style:{color:"var(--ant-error-color)"}})]),_:1},8,["title"])])):S("",!0)]}),_:1}),e(n,{label:"平台状态"},{default:a(()=>{var d,_;return[i(o((_=(d=t(l))==null?void 0:d.cardStateType)==null?void 0:_.text),1)]}),_:1}),e(n,{label:"说明"},{default:a(()=>{var d;return[i(o((d=t(l))==null?void 0:d.describe),1)]}),_:1})]),_:1})]),_:1})]),_:1}),e(y,{span:24},{default:a(()=>[e(L,{gutter:24},{default:a(()=>[e(y,{span:16},{default:a(()=>[s("div",Ct,[e(T,{title:"流量统计"},{extra:a(()=>[e(K,{type:"week",quickBtnList:$,onChange:G})]),_:1}),e(w,{showX:!0,showY:!0,style:{"min-height":"490px"},chartData:t(B)},null,8,["chartData"])])]),_:1}),e(y,{span:8},{default:a(()=>[s("div",Ot,[e(T,{title:"数据统计"}),s("div",Ft,[s("div",kt,[s("div",Nt,[Yt,e(x,{placement:"bottomLeft"},{title:a(()=>[s("span",null,o(t(F))+" M",1)]),default:a(()=>[s("div",It,[i(o(t(F))+" ",1),At])]),_:1})]),e(w,{color:"#FBA500",chartData:t(j)},null,8,["chartData"])]),s("div",Lt,[s("div",Et,[St,e(x,{placement:"bottomLeft"},{title:a(()=>[s("span",null,o(t(k))+" M",1)]),default:a(()=>[s("div",qt,[i(o(t(k))+" ",1),Bt])]),_:1})]),e(w,{chartData:t(H)},null,8,["chartData"])]),s("div",jt,[s("div",Ht,[Jt,e(x,{placement:"bottomLeft"},{title:a(()=>[s("span",null,o(t(N))+" M",1)]),default:a(()=>[s("div",Vt,[i(o(t(N))+" ",1),$t])]),_:1})]),e(w,{color:"#58E1D3",chartData:t(J)},null,8,["chartData"])])])])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})):(b(),q("div",Xt,[t(D)?(b(),q("div",zt,[t(C)?(b(),E(Z,{key:0,type:t(Y),data:t(O),onChange:z},null,8,["type","data"])):S("",!0),e(L,{gutter:[24,24]},{default:a(()=>[e(y,{span:24},{default:a(()=>[e(P,null,{default:a(()=>[e(A,{size:"small",column:3,bordered:""},{title:a(()=>[e(T,null,{title:a(()=>[Gt,e(r,{type:"link",onClick:f[1]||(f[1]=()=>{C.value=!0,O.value=t(l),Y.value="edit"})},{default:a(()=>[e(u,{type:"EditOutlined"}),i(" 编辑 ")]),_:1})]),_:1})]),default:a(()=>[e(n,{label:"卡号"},{default:a(()=>[i(o(t(l).id),1)]),_:1}),e(n,{label:"ICCID"},{default:a(()=>[i(o(t(l).iccId),1)]),_:1}),e(n,{label:"绑定设备"},{default:a(()=>[i(o(t(l).deviceName),1)]),_:1}),e(n,{label:"平台类型"},{default:a(()=>{var d;return[i(o(((d=t(Q).find(_=>_.value===t(l).operatorName))==null?void 0:d.label)||t(l).operatorName),1)]}),_:1}),e(n,{label:"平台名称"},{default:a(()=>[i(o(t(l).platformConfigName),1)]),_:1}),e(n,{label:"运营商"},{default:a(()=>{var d;return[i(o(((d=t(R).find(_=>_.value===t(l).operatorName))==null?void 0:d.label)||t(l).operatorName),1)]}),_:1}),e(n,{label:"类型"},{default:a(()=>{var d;return[i(o((d=t(l).cardType)==null?void 0:d.text),1)]}),_:1}),e(n,{label:"激活日期"},{default:a(()=>[i(o(t(l).activationDate?t(v)(t(l).activationDate).format("YYYY-MM-DD HH:mm:ss"):""),1)]),_:1}),e(n,{label:"更新时间"},{default:a(()=>[i(o(t(l).updateTime?t(v)(t(l).updateTime).format("YYYY-MM-DD HH:mm:ss"):""),1)]),_:1}),e(n,{label:"总流量"},{default:a(()=>[i(o(t(l).totalFlow?t(l).totalFlow.toFixed(2)+" M":"0 M"),1)]),_:1}),e(n,{label:"使用流量"},{default:a(()=>[i(o(t(l).usedFlow?t(l).usedFlow.toFixed(2)+" M":"0 M"),1)]),_:1}),e(n,{label:"剩余流量"},{default:a(()=>[i(o(t(l).residualFlow?t(l).residualFlow.toFixed(2)+" M":"0 M"),1)]),_:1}),e(n,{label:"运营商状态"},{default:a(()=>{var d,_;return[i(o((_=(d=t(l))==null?void 0:d.cardState)==null?void 0:_.text)+" ",1),t(M).show?(b(),q("span",Pt,[e(h,{title:t(M).tip},{default:a(()=>[e(u,{type:"ExclamationCircleOutlined",style:{color:"var(--ant-error-color)"}})]),_:1},8,["title"])])):S("",!0)]}),_:1}),e(n,{label:"平台状态"},{default:a(()=>{var d,_;return[i(o((_=(d=t(l))==null?void 0:d.cardStateType)==null?void 0:_.text),1)]}),_:1}),e(n,{label:"说明"},{default:a(()=>{var d;return[i(o((d=t(l))==null?void 0:d.describe),1)]}),_:1})]),_:1})]),_:1})]),_:1}),e(y,{span:24},{default:a(()=>[e(L,{gutter:24},{default:a(()=>[e(y,{span:16},{default:a(()=>[s("div",Ut,[e(T,{title:"流量统计"},{extra:a(()=>[e(K,{type:"week",quickBtnList:$,onChange:G})]),_:1}),e(w,{showX:!0,showY:!0,style:{"min-height":"490px"},chartData:t(B)},null,8,["chartData"])])]),_:1}),e(y,{span:8},{default:a(()=>[s("div",Zt,[e(T,{title:"数据统计"}),s("div",Kt,[s("div",Qt,[s("div",Rt,[Wt,e(x,{placement:"bottomLeft"},{title:a(()=>[s("span",null,o(t(F))+" M",1)]),default:a(()=>[s("div",te,[i(o(t(F))+" ",1),ee])]),_:1})]),e(w,{color:"#FBA500",chartData:t(j)},null,8,["chartData"])]),s("div",ae,[s("div",le,[se,e(x,{placement:"bottomLeft"},{title:a(()=>[s("span",null,o(t(k))+" M",1)]),default:a(()=>[s("div",oe,[i(o(t(k))+" ",1),ne])]),_:1})]),e(w,{chartData:t(H)},null,8,["chartData"])]),s("div",ie,[s("div",de,[ce,e(x,{placement:"bottomLeft"},{title:a(()=>[s("span",null,o(t(N))+" M",1)]),default:a(()=>[s("div",re,[i(o(t(N))+" ",1),ue])]),_:1})]),e(w,{color:"#58E1D3",chartData:t(J)},null,8,["chartData"])])])])]),_:1})]),_:1})]),_:1})]),_:1})])):(b(),E(st,{key:1}))]))}}});const Oe=bt(fe,[["__scopeId","data-v-b4d9582f"]]);export{Oe as default};
