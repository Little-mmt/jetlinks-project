import{h as G,$ as K,Z as ee,ds as te,ah as ae,ai as se,aI as ne,a0 as oe,du as le,aT as ie,a1 as de,g as ce}from"./index-1730252110824.js";import"./index-1730252110824282.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824298.js";import"./index-1730252110824288.js";import"./index-1730252110824284.js";import{_ as re}from"./input.vue_vue_type_script_setup_true_lang-1730252110824.js";import{_ as ue}from"./output.vue_vue_type_script_setup_true_lang-1730252110824.js";import{g as B}from"./config-1730252110824.js";import{m as k}from"./marked.esm-1730252110824.js";import{d as pe,k as I,I as R,ab as me,U as b,Z as _e,f as e,X as a,_ as t,u as i,E as V,$ as M,V as E,Y as H,af as fe,ag as ye}from"./vue-1730252110824.js";import"./index-1730252110824291.js";const c=f=>(fe("data-v-060e6256"),f=f(),ye(),f),ge={class:"alarmFlow-left"},he={class:"alarmTitle"},xe=c(()=>t("span",null,"告警数据输出",-1)),ke={class:"alarmTitle"},Ie=c(()=>t("span",null,"告警处理结果输入",-1)),be={class:"alarmFlow-right"},ve={class:"doc"},Te=c(()=>t("h1",null,"功能图示",-1)),Ce={class:"image"},Se=c(()=>t("h1",null,"功能说明",-1)),we=c(()=>t("div",null," 1、平台支持将告警数据输出到kafka，第三方系统可订阅kafka中的告警数据，进行业务处理。 ",-1)),De=c(()=>t("h2",null,"推送参数",-1)),je=c(()=>t("h2",null,"示例",-1)),Ne=["innerHTML"],Oe=c(()=>t("div",null," 2、平台支持订阅kafka中告警处理数据，并更新告警记录状态。 ",-1)),qe=c(()=>t("h2",null,"订阅参数",-1)),Be=c(()=>t("h2",null,"示例",-1)),Re=["innerHTML"],Ve=`
  ~~~json
  {
    "alarmRecordId": "ba33a59ca5ebe3dccfcd75fd0575be4e",
    "alarmConfigId": "1605111722418597888",
    "alarmTime": "1651233650840",
    "handleTime": "1651233650841",
    "describe": "已联系第三方人员进行告警处理，现告警已恢复",
    "type": "user",
    "state": "normal"
  }
  ~~~
  `,Me=`
  ~~~json
  {
    "alarmConfigId": "1605111722418597888",
    "id": "1515992841393119232",
    "alarmConfigId": "1586989804257853441",
    "alarmConfigName": "烟感告警",
    "alarmRecordId": "ba33a59ca5ebe3dccfcd75fd0575be4e",
    "level": "3",
    "description": "设备温度过高",
    "alarmTime": "1667202964007",
    "sourceType": "device",
    "sourceId": "1605138218826821632",
    "sourceName": "1楼烟感S01",
    "targetType": "device",
    "targetName": "温度探测设备",
    "targetId": "1583300346713661440"
  }
  ~~~
  `,Ee=pe({__name:"index",setup(f){let r=I(),u=I();const L=[{key:"alarmConfigName",name:"告警配置名称",type:"string",desc:"推送的告警配置名称",example:"烟感告警"},{key:"alarmConfigId",name:"告警配置ID",type:"string",desc:"推送的告警配置ID",example:"1605111722418597888"},{key:"Id",name:"告警数据ID",type:"string",desc:"告警唯一性标识",example:"1515992841393119232"},{key:"alarmRecordId",name:"告警记录ID",type:"string",desc:"告警记录的唯一标识，可根据此ID处理告警",example:"ba33a59ca5ebe3dccfcd75fd0575be4e"},{key:"targetType",name:"告警目标类型",type:"string",desc:"告警所属的业务类型，具体有产品、设备、部门、其他",example:"产品"},{key:"targetId",name:"告警目标ID",type:"string",desc:"告警目标唯一性标识",example:"1583300346713661440"},{key:"targetName",name:"告警目标名称",type:"string",desc:"告警目标实例名称",example:"海康烟感"},{key:"alarmTime",name:"告警时间",type:"long",desc:"告警触发时间",example:"1651233650840"},{key:"sourceType",name:"告警源类型",type:"string",desc:"触发告警的源类型。当前只有device",example:"device"},{key:"sourceId",name:"告警源ID",type:"string",desc:"触发告警的源Id。如设备Id",example:"1605138218826821632"},{key:"sourceName",name:"告警源名称",type:"string",desc:"触发告警的源名称。如设备名称",example:"1楼烟感S01"},{key:"level",name:"告警级别",type:"int",desc:"告警严重程度指标",example:1},{key:"description",name:"告警说明",type:"string",desc:"告警规则说明",example:"1楼烟感统一告警规则设置"}],P=[{key:"alarmRecordId",name:"告警记录ID",type:"string",require:"是",desc:"告警记录的唯一标识，可根据此ID处理告警",example:"ba33a59ca5ebe3dccfcd75fd0575be4e"},{key:"alarmConfigId",name:"告警配置ID",type:"string",require:"是",desc:"推送的告警配置ID",example:"1605111722418597888"},{key:"alarmTime",name:"告警时间",type:"long",require:"是",desc:"告警触发时间",example:"1651233650840"},{key:"handleTime",name:"处理时间",type:"long",require:"是",desc:"告警处理时间，不填是默认为消息处理时间",example:"1651233650840"},{key:"describe",name:"处理说明",type:"string",require:"是",desc:"告警处理内容详细描述说明",example:"已联系第三方人员进行告警处理，现告警已恢复"},{key:"type",name:"处理类型",type:"enum",require:"是",desc:"支持system、user",example:"user"},{key:"state",name:"处理后的状态",type:"enum",require:"是",desc:"warning、normal",example:"normal"}],v=[{title:"名称",dataIndex:"name",key:"name",ellipsis:!0},{title:"标识",dataIndex:"key",key:"key",ellipsis:!0},{title:"类型",dataIndex:"type",key:"type",ellipsis:!0},{title:"说明",dataIndex:"desc",key:"desc",width:100,ellipsis:!0},{title:"示例值",dataIndex:"example",key:"example",width:100,ellipsis:!0}],T=[...v];T.splice(3,0,{title:"必填",dataIndex:"require",key:"require",ellipsis:!0});const $=new k.Renderer,J=R(k(Ve)),W=R(k(Me));let y=I(!1),g=I(!1);k.setOptions({renderer:$,gfm:!0,pedantic:!1});const C=()=>{B("producer").then(p=>{p.status===200&&(u.value=p.result)})},S=()=>{B("consume").then(p=>{p.status===200&&(r.value=p.result)})};S(),C();const A=()=>{y.value=!0},F=()=>{y.value=!1},Q=()=>{y.value=!1,S()},Z=()=>{g.value=!0},U=()=>{g.value=!1},X=()=>{g.value=!1,C()};return(p,He)=>{const h=me("AIcon"),w=K,D=ee,x=te,m=ae,j=se,N=ne,O=oe,Y=le,q=ie,z=de;return b(),_e("div",null,[e(z,{gutter:24},{default:a(()=>[e(O,{span:14},{default:a(()=>[t("div",ge,[e(N,{"head-style":{borderBottom:"none",height:"30px"},bordered:!1},{title:a(()=>[t("div",he,[xe,e(w,{title:"将告警数据输出到其他第三方系统"},{default:a(()=>[e(h,{type:"QuestionCircleOutlined",style:{"margin-left":"6px","line-height":"35px"}})]),_:1}),e(D,{type:"link",onClick:Z,hasPermission:"device/Instance:update"},{icon:a(()=>[e(h,{type:"EditOutlined"})]),_:1})])]),default:a(()=>[e(j,{bordered:"",labelStyle:{width:"112px"},contentStyle:{minWidth:"100px"},column:2},{default:a(()=>[e(m,{label:"kafka地址","content-style":{minWidth:"200px"}},{default:a(()=>{var s,n,o,l,d;return[e(x,{status:(s=i(u))!=null&&s.running?"success":"error",text:((d=(l=(o=(n=i(u))==null?void 0:n.data)==null?void 0:o.config)==null?void 0:l.config)==null?void 0:d.address)||""},null,8,["status","text"])]}),_:1}),e(m,{label:"topic"},{default:a(()=>{var s,n,o,l;return[V(M(((l=(o=(n=(s=i(u))==null?void 0:s.data)==null?void 0:n.config)==null?void 0:o.config)==null?void 0:l.topic)||""),1)]}),_:1}),e(m,{label:"状态",span:2},{default:a(()=>{var s,n,o,l,d,_;return[e(x,{status:((o=(n=(s=i(u))==null?void 0:s.data)==null?void 0:n.state)==null?void 0:o.value)==="enabled"?"success":"error",text:((_=(d=(l=i(u))==null?void 0:l.data)==null?void 0:d.state)==null?void 0:_.text)||""},null,8,["status","text"])]}),_:1})]),_:1})]),_:1}),e(N,{"head-style":{borderBottom:"none",height:"30px"},bordered:!1},{title:a(()=>[t("div",ke,[Ie,e(w,{title:"接收第三方系统处理的告警结果"},{default:a(()=>[e(h,{type:"QuestionCircleOutlined",style:{"margin-left":"6px","line-height":"35px"}})]),_:1}),e(D,{type:"link",onClick:A,hasPermission:"device/Instance:update"},{icon:a(()=>[e(h,{type:"EditOutlined"})]),_:1})])]),default:a(()=>[e(j,{bordered:"",labelStyle:{width:"112px"},contentStyle:{minWidth:"150px"},column:2},{default:a(()=>[e(m,{label:"kafka地址"},{default:a(()=>{var s,n,o,l,d;return[e(x,{status:(s=i(r))!=null&&s.running?"success":"error",text:((d=(l=(o=(n=i(r))==null?void 0:n.data)==null?void 0:o.config)==null?void 0:l.config)==null?void 0:d.address)||""},null,8,["status","text"])]}),_:1}),e(m,{label:"topic"},{default:a(()=>{var s,n,o,l;return[V(M(((l=(o=(n=(s=i(r))==null?void 0:s.data)==null?void 0:n.config)==null?void 0:o.config)==null?void 0:l.topic)||""),1)]}),_:1}),e(m,{label:"状态",span:2},{default:a(()=>{var s,n,o,l,d,_;return[e(x,{status:((o=(n=(s=i(r))==null?void 0:s.data)==null?void 0:n.state)==null?void 0:o.value)==="enabled"?"success":"error",text:((_=(d=(l=i(r))==null?void 0:l.data)==null?void 0:d.state)==null?void 0:_.text)||""},null,8,["status","text"])]}),_:1})]),_:1})]),_:1})])]),_:1}),e(O,{span:10},{default:a(()=>[t("div",be,[t("div",ve,[Te,t("div",Ce,[e(Y,{width:"100%",src:i(G)("/alarm/io.png")},null,8,["src"])]),Se,we,De,t("div",null,[e(q,{dataSource:L,pagination:!1,columns:v})]),je,t("div",{innerHTML:i(W),class:"code"},null,8,Ne),Oe,qe,t("div",null,[e(q,{dataSource:P,pagination:!1,columns:T})]),Be,t("div",{class:"code",innerHTML:i(J)},null,8,Re)])])]),_:1})]),_:1}),i(y)?(b(),E(re,{key:0,data:i(r),onCloseModel:F,onSaveSuc:Q},null,8,["data"])):H("",!0),i(g)?(b(),E(ue,{key:1,data:i(u),onCloseModel:U,onSaveSuc:X},null,8,["data"])):H("",!0)])}}});const Ke=ce(Ee,[["__scopeId","data-v-060e6256"]]);export{Ke as default};
