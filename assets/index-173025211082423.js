import{au as R,dt as M,dq as V,Z as q,e as F,a3 as H,d as J,aa as W,g as Z}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import{a as z}from"./log-17302521108242.js";import{d as E,k as m,ab as S,U as p,Z as N,_ as l,f as n,X as a,E as d,$ as o,u as t,F as B,a1 as P,V as X,G as $}from"./vue-1730252110824.js";const K={class:"mr-10"},Q={class:"mr-10"},ee={class:"mb-10"},te={class:"warn-content"},ae=E({name:"SystemLog"}),se=E({...ae,setup(oe){const I=m({}),_=m({}),u=[{title:"名称",dataIndex:"name",key:"name",search:{type:"string"},scopedSlots:!0,width:400,fixed:"left",ellipsis:!0},{title:"日志级别",dataIndex:"level",key:"level",search:{type:"select",options:[{label:"ERROR",value:"ERROR"},{label:"INFO",value:"INFO"},{label:"DEBUG",value:"DEBUG"},{label:"WARN",value:"WARN"}]},scopedSlots:!0,width:100},{title:"日志内容",dataIndex:"message",key:"message",search:{type:"string"},scopedSlots:!0,ellipsis:!0},{title:"服务名",dataIndex:"server",key:"server",scopedSlots:!0,search:{type:"string"},width:200,ellipsis:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",search:{type:"date"},scopedSlots:!0,width:200},{title:"操作",key:"action",fixed:"right",width:60,scopedSlots:!0}],s=m({id:"",threadName:"",createTime:0,className:"",level:"",message:"",exceptionStack:"",context:"",lineNumber:0,methodName:"",name:"",threadId:""}),i=m(!1),D=c=>{i.value=!1},T=c=>c?[{key:"eye",text:"查看",tooltip:{title:"查看"},icon:"EyeOutlined",onClick:()=>{s.value=c,i.value=!0}}]:[],C={server:"context.server"},w=c=>{_.value=M(c,C)};return(c,v)=>{const A=S("pro-search"),y=V,O=S("AIcon"),Y=q,j=F,L=H,U=J,G=W;return p(),N(B,null,[l("div",null,[n(A,{columns:u,target:"search-system",onSearch:w}),n(L,{ref_key:"tableRef",ref:I,model:"TABLE",columns:u,request:t(z),defaultParams:{sorts:[{name:"createTime",order:"desc"}]},params:t(_)},{level:a(e=>[n(y,{color:e.level==="WARN"?"orange":e.level==="ERROR"?"red":e.level==="DEBUG"?"blue":"green"},{default:a(()=>[d(o(e.level),1)]),_:2},1032,["color"])]),createTime:a(e=>[d(o(t(R)(e.createTime).format("YYYY-MM-DD HH:mm:ss")),1)]),server:a(e=>[d(o(e.context.server),1)]),action:a(e=>[n(j,{size:16},{default:a(()=>[(p(!0),N(B,null,P(T(e),r=>(p(),X(Y,{key:r.key,tooltip:{...r.tooltip},onClick:r.onClick,type:"link",style:{padding:"0 5px"}},{icon:a(()=>[n(O,{type:r.icon},null,8,["type"])]),_:2},1032,["tooltip","onClick"]))),128))]),_:2},1024)]),_:1},8,["request","params"])]),n(G,{width:1100,visible:t(i),"onUpdate:visible":v[0]||(v[0]=e=>$(i)?i.value=e:null),title:"详情"},{footer:a(()=>[n(U,{type:"primary",onClick:D},{default:a(()=>[d("关闭")]),_:1})]),default:a(()=>{var e,r,f,h,b,g,k;return[l("div",null,[l("span",K,"["+o((e=t(s))==null?void 0:e.threadName)+"]",1),l("span",Q,o(t(R)((r=t(s))==null?void 0:r.createTime).format("YYYY-MM-DD HH:mm:ss")),1),l("span",null,o((f=t(s))==null?void 0:f.className),1)]),l("div",ee,[n(y,{color:((h=t(s))==null?void 0:h.level)==="WARN"?"orange":((b=t(s))==null?void 0:b.level)==="ERROR"?"red":((g=t(s))==null?void 0:g.level)==="DEBUG"?"blue":"green"},{default:a(()=>{var x;return[d(o((x=t(s))==null?void 0:x.level),1)]}),_:1},8,["color"]),l("span",null,o((k=t(s))==null?void 0:k.message),1)]),l("div",te,o(t(s).exceptionStack),1)]}),_:1},8,["visible"])],64)}}});const ue=Z(se,[["__scopeId","data-v-ab8bbc91"]]);export{ue as default};
