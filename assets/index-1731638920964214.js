import{aH as h,v as x,g as S}from"./index-1731638920964.js";import{u as b}from"./scene-17316389209642.js";import{d as _,ai as y,k,U as c,Z as C,f as o,X as i,u as m,_ as u,V as B,Y as T,af as w,ag as I}from"./vue-1731638920964.js";import P from"./index-1731638920964222.js";import{_ as V}from"./AddModal.vue_vue_type_script_setup_true_name_timerAddModel_lang-1731638920964.js";import j from"./AddButton-1731638920964.js";import N from"./Title-1731638920964.js";import"./scene-1731638920964.js";import"./index-1731638920964276.js";import"./index-1731638920964224.js";import"./index-1731638920964279.js";import"./index-1731638920964291.js";import"./List-1731638920964.js";import"./index-1731638920964219.js";import"./ActionTypeComponent.vue_vue_type_script_setup_true_lang-1731638920964.js";import"./index.vue_vue_type_script_setup_true_lang-173163892096430.js";import"./index-1731638920964220.js";import"./index-1731638920964286.js";import"./NotifyWay-1731638920964.js";import"./config-17316389209642.js";import"./NotifyConfig.vue_vue_type_style_index_0_lang-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import"./const-17316389209642.js";import"./NotifyTemplate.vue_vue_type_style_index_0_lang-1731638920964.js";import"./template-1731638920964.js";import"./VariableDefinitions.vue_vue_type_script_setup_true_lang-1731638920964.js";import"./BuildIn.vue_vue_type_script_setup_true_name_NotifyBuildIn_lang-1731638920964.js";import"./Org.vue_vue_type_script_setup_true_lang-1731638920964.js";import"./Tag.vue_vue_type_script_setup_true_lang-1731638920964.js";import"./InputFile.vue_vue_type_script_setup_true_lang-1731638920964.js";import"./User.vue_vue_type_script_setup_true_name_NotifyUser_lang-1731638920964.js";import"./unionBy-1731638920964.js";import"./index-1731638920964218.js";import"./index-1731638920964287.js";import"./Product-17316389209643.js";import"./product-17316389209644.js";import"./category-1731638920964.js";import"./department-17316389209642.js";import"./setting-17316389209642.js";import"./index.vue_vue_type_script_setup_true_name_Device_lang-1731638920964.js";import"./TopCard-17316389209646.js";import"./Device-1731638920964.js";import"./Tag-1731638920964.js";import"./RelationSelect.vue_vue_type_script_setup_true_lang-1731638920964.js";import"./util-17316389209642.js";import"./util-17316389209645.js";import"./lodash.default-1731638920964.js";import"./throttle-1731638920964.js";import"./min-1731638920964.js";import"./isNil-1731638920964.js";import"./isUndefined-1731638920964.js";import"./difference-1731638920964.js";import"./flattenDeep-1731638920964.js";import"./sortBy-1731638920964.js";import"./uniqBy-1731638920964.js";import"./toLower-1731638920964.js";import"./index.vue_vue_type_script_setup_true_name_ActionDeviceActions_lang-1731638920964.js";import"./EditTable.vue_vue_type_script_setup_true_lang-17316389209642.js";import"./FunctionItem.vue_vue_type_script_setup_true_name_FunctionItem_lang-1731638920964.js";import"./index-1731638920964223.js";import"./typings-1731638920964.js";import"./DropdownButton.vue_vue_type_style_index_0_scoped_011bae6b_lang-1731638920964.js";import"./Menus-1731638920964.js";import"./util-17316389209643.js";import"./Time.vue_vue_type_style_index_0_lang-1731638920964.js";import"./Array.vue_vue_type_style_index_0_scoped_59b5dd9b_lang-1731638920964.js";import"./Double.vue_vue_type_script_setup_true_name_DoubleParamsDropdown_lang-1731638920964.js";import"./index-1731638920964310.js";import"./WriteProperty.vue_vue_type_script_setup_true_lang-1731638920964.js";import"./CardSelect-1731638920964.js";import"./Item-17316389209643.js";import"./index-1731638920964221.js";import"./AlarmModal-1731638920964.js";import"./useRequest-1731638920964.js";import"./useAlarmLevel-1731638920964.js";import"./config-1731638920964.js";import"./configuration-1731638920964.js";import"./util-1731638920964.js";import"./FilterGroup.vue_vue_type_script_setup_true_name_FilterGroup_lang-1731638920964.js";import"./DropdownButton-1731638920964.js";import"./FilterCondition.vue_vue_type_script_setup_true_name_FilterCondition_lang-1731638920964.js";import"./CheckFilterItem-1731638920964.js";import"./CheckItem.vue_vue_type_script_setup_true_name_ActionCheckItem_lang-1731638920964.js";import"./index.vue_vue_type_script_setup_true_name_Timer_lang-1731638920964.js";import"./WhenOption-1731638920964.js";import"./Calendar-1731638920964.js";import"./index-1731638920964235.js";import"./index-1731638920964309.js";const $=p=>(w("data-v-e27280d8"),p=p(),I(),p),z={class:"timer"},A=$(()=>u("span",{style:{"padding-right":"10px"}}," 系统时间到达 ",-1)),E={class:"actions-branches-item"},O=_({name:"SceneSaveTimer"}),R=_({...O,setup(p){const d=b(),{data:r}=y(d),s=k(!1),f=[{validator(n,t){return t?Promise.resolve():Promise.reject(new Error("请配置定时触发规则"))}}],v=[{validator(n,t){return!t||t&&!t.length||!t.some(e=>e.actions&&e.actions.length)?Promise.reject("至少配置一个执行动作"):Promise.resolve()}}],g=(n,t)=>{r.value.trigger.timer=n,r.value.options.trigger=t,s.value=!1};return(n,t)=>{const e=h,l=x;return c(),C("div",z,[o(l,{rules:f,name:["trigger","timer"]},{label:i(()=>[o(e,{data:"触发规则",style:{"font-size":"14px"}})]),default:i(()=>[o(j,{style:{width:"100%"},onClick:t[0]||(t[0]=a=>s.value=!0)},{extra:i(()=>[A]),default:i(()=>[o(N,{options:m(r).options.trigger},null,8,["options"])]),_:1})]),_:1}),u("div",E,[o(l,{rules:v,name:["branches",0,"then"]},{label:i(()=>[o(e,{data:"执行动作",style:{"font-size":"14px"}})]),default:i(()=>{var a;return[o(P,{thenOptions:m(r).branches?(a=m(r))==null?void 0:a.branches[0].then:[],name:0},null,8,["thenOptions"])]}),_:1})]),m(s)?(c(),B(V,{key:0,onCancel:t[1]||(t[1]=a=>s.value=!1),onSave:g,value:m(r).trigger.timer},null,8,["value"])):T("",!0)])}}});const Co=S(R,[["__scopeId","data-v-e27280d8"]]);export{Co as default};
