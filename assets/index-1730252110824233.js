import{T as x,L as z,k as M,a as D,aC as H,gr as X,o as f,h as L,B as Y,I as O,v as W,aD as Z,a6 as G,$ as Q,aE as ee,as as oe,a0 as ae,a1 as se,F as le,d as te,g as ne}from"./index-1730252110824.js";import{d as A,k as ie,r as de,H as re,ab as T,U as u,V as R,X as l,f as o,_ as n,u as e,E as C,Y as b,Z as p,a0 as V,af as ce,ag as ue}from"./vue-1730252110824.js";const g=w=>(ce("data-v-6cb0e7d7"),w=w(),ue(),w),pe={class:"basis-container"},ge=g(()=>n("span",null,"高德地图 web服务api",-1)),_e=["src"],me=g(()=>n("span",null,"高德地图 JSapi",-1)),fe=["src"],he=g(()=>n("span",null,"高德地图 密钥",-1)),be=["src"],ye=g(()=>n("span",null,"base-path",-1)),ve=g(()=>n("div",{style:{"word-break":"break-all"}},[n("div",null,"系统后台访问的url。"),n("div",null," 格式：{http/https}: //{前端所在服务器IP地址}:{前端暴露的服务端口}/api ")],-1)),ke=["src"],Le={class:"upload-image-warp-logo"},we={class:"upload-image-border-logo"},je={class:"upload-image-content-logo"},Ke={key:0,class:"loading-logo"},Ue={key:2,class:"upload-image-mask"},Ie={key:3},Ne={key:0},Te={class:"upload-loading-mask"},Ce=g(()=>n("div",{class:"upload-tips"}," 推荐尺寸200*200 ",-1)),Ve=g(()=>n("div",{class:"upload-tips"}," 支持jpg,png,jfif,pjp,pjpeg,jpeg ",-1)),Be=g(()=>n("span",null,"浏览器页签",-1)),Pe=["src"],Se={class:"upload-image-warp-logo"},xe={class:"upload-image-border-logo"},Oe={class:"upload-image-content-logo"},Re={key:0,class:"loading-icon"},Ae={key:2,class:"upload-image-mask"},$e={key:3},Ee=g(()=>n("div",{class:"upload-tips"}," 推荐尺寸64*64 ",-1)),Fe=g(()=>n("div",{class:"upload-tips"}," 支持ico格式 ",-1)),Je={class:"upload-image-warp-back"},qe={class:"upload-image-border-back"},ze={class:"upload-image-content-back"},Me={key:0,class:"loading-back"},De={key:2,class:"upload-image-mask"},He={key:3},Xe=g(()=>n("div",{class:"upload-tips"}," 支持4M以内的图片: 支持jpg,png,jfif,pjp,pjpeg,jpeg ",-1)),Ye=g(()=>n("div",{class:"upload-tips"},"建议尺寸1400x1080",-1)),We=A({name:"Basis"}),Ze=A({...We,setup(w){const I=`${Y}/file/static`,N={[x]:z.get(x)},B=ie(),P=M(),t=de({formValue:{title:"",headerTheme:"light",showRecordNumber:!0,recordNumber:"",apiKey:"",webKey:"",secretKey:"","base-path":`${window.location.origin}/api`,logo:"",ico:"",background:""},rulesFrom:{title:[{required:!0,message:"请输入系统名称"},{max:64,message:"最多可输入64个字符"}],headerTheme:[{required:!0,message:"请选择主题色",trigger:"blur"}],"base-path":[{required:!0,message:"请输入base-path",trigger:"blur"},{validator:(a,s,d)=>{s&&s.includes("localhost")?d("输入内容不能包含 localhost"):d()},trigger:"blur"}],recordNumber:[{max:64,message:"最多可输入64个字符"}]},logoLoading:!1,backLoading:!1,iconLoading:!1,saveLoading:!1,getDetails:async()=>{var s,d,r,k,j,h,K,U,m,v,y;const a=P.configInfo;t.formValue={title:(s=a.front)==null?void 0:s.title,headerTheme:(d=a.front)==null?void 0:d.headerTheme,logo:((r=a.front)==null?void 0:r.logo)||"/logo.png",ico:((k=a.front)==null?void 0:k.ico)||"/favicon.ico",showRecordNumber:((j=a.front)==null?void 0:j.showRecordNumber)||!1,recordNumber:(h=a.front)==null?void 0:h.recordNumber,background:((K=a.front)==null?void 0:K.background)||"/images/login.png",apiKey:(U=a.amap)==null?void 0:U.apiKey,webKey:(m=a.amap)==null?void 0:m.webKey,secretKey:(v=a.amap)==null?void 0:v.secretKey,"base-path":(y=a.paths)==null?void 0:y["base-path"]}},clickSave:()=>{const a=D().hasPermission;a("system/Basis:update")?B.value.validate().then(()=>{t.saveLoading=!0;const s=[{scope:"front",properties:{...H(t.formValue,["apiKey","webKey","secretKey","base-path"])}},{scope:"amap",properties:{apiKey:t.formValue.apiKey,webKey:t.formValue.webKey,secretKey:t.formValue.secretKey}},{scope:"paths",properties:{"base-path":t.formValue["base-path"]}}];X(s).then(async d=>{d.status===200&&(f("保存成功"),await P.getSystemConfig(),await t.getDetails())}).finally(()=>t.saveLoading=!1)}):f("暂无权限，请联系管理员","warning")}}),{formValue:i,rulesFrom:$}=re(t),_={imageTypes:[".jpg",".png",".jfif",".pjp",".pjpeg",".jpeg"],iconTypes:["image/x-icon"],beforeLogoUpload:a=>{console.log("file: ",a);const s=_.imageTypes.map(r=>r.split(".")[1]).filter(r=>a.type.includes(r)).length>0,d=a.size/1024/1024<4;return s?d||f("图片大小必须小于4M","error"):f("请上传.jpg.png.jfif.pjp.pjpeg.jpeg格式的图片","error"),s&&d},beforeIconUpload:a=>{const s=a.type.includes("x-icon"),d=a.size/1024/1024<1;return s?d||f("图片大小必须小于1M","error"):f("请上传ico格式的图片","error"),s&&d},handleChangeLogo:a=>{var s,d;a.file.status==="uploading"?t.logoLoading=!0:a.file.status==="done"?(a.file.url=(s=a.file.response)==null?void 0:s.result,t.logoLoading=!1,t.formValue.logo=(d=a.file.response)==null?void 0:d.result):a.file.status==="error"&&(t.logoLoading=!1,f("系统logo上传失败，请稍后再试","error"))},changeBackUpload:a=>{var s,d;a.file.status==="uploading"?t.backLoading=!0:a.file.status==="done"?(a.file.url=(s=a.file.response)==null?void 0:s.result,t.backLoading=!1,t.formValue.background=(d=a.file.response)==null?void 0:d.result):a.file.status==="error"&&(t.logoLoading=!1,f("背景图上传失败，请稍后再试","error"))},changeIconUpload:a=>{var s,d;a.file.status==="uploading"?t.iconLoading=!0:a.file.status==="done"?(a.file.url=(s=a.file.response)==null?void 0:s.result,t.iconLoading=!1,t.formValue.ico=(d=a.file.response)==null?void 0:d.result):a.file.status==="error"&&(t.logoLoading=!1,f("浏览器页签上传失败，请稍后再试","error"))}};return t.getDetails(),(a,s)=>{const d=O,r=W,k=Z,j=G,h=Q,K=ee,U=O,m=T("AIcon"),v=oe,y=ae,S=se,E=le,F=te,J=T("FullPage"),q=T("page-container");return u(),R(q,null,{default:l(()=>[o(J,null,{default:l(()=>[n("div",pe,[o(E,{layout:"vertical",ref_key:"formRef",ref:B,rules:e($),model:e(i)},{default:l(()=>[o(S,{span:24,gutter:24},{default:l(()=>[o(y,{span:10},{default:l(()=>[o(r,{label:"系统名称",name:"title"},{default:l(()=>[o(d,{value:e(i).title,"onUpdate:value":s[0]||(s[0]=c=>e(i).title=c),placeholder:"请输入系统名称"},null,8,["value"])]),_:1}),o(r,{label:"主题色",name:"headerTheme"},{default:l(()=>[o(j,{value:e(i).headerTheme,"onUpdate:value":s[1]||(s[1]=c=>e(i).headerTheme=c)},{default:l(()=>[o(k,{value:"light"},{default:l(()=>[C(" 白色 ")]),_:1}),o(k,{value:"dark"},{default:l(()=>[C(" 黑色 ")]),_:1})]),_:1},8,["value"])]),_:1}),o(r,null,{label:l(()=>[ge,o(h,{title:"开发者可通过接口使用各类型的地理数据服务,返回结果支持JSON和XML格式"},{default:l(()=>[n("img",{class:"img-style",src:e(L)("/init-home/mark.png")},null,8,_e)]),_:1})]),default:l(()=>[o(d,{value:e(i).webKey,"onUpdate:value":s[2]||(s[2]=c=>e(i).webKey=c),placeholder:"请输入高德WebApi Key"},null,8,["value"])]),_:1}),o(r,null,{label:l(()=>[me,o(h,{title:"提供浏览器精准定位"},{default:l(()=>[n("img",{class:"img-style",src:e(L)("/init-home/mark.png")},null,8,fe)]),_:1})]),default:l(()=>[o(d,{value:e(i).apiKey,"onUpdate:value":s[3]||(s[3]=c=>e(i).apiKey=c),placeholder:"请输入高德API Key"},null,8,["value"])]),_:1}),o(r,null,{label:l(()=>[he,o(h,{title:"降低明文传输被窃取的风险"},{default:l(()=>[n("img",{class:"img-style",src:e(L)("/init-home/mark.png")},null,8,be)]),_:1})]),default:l(()=>[o(d,{value:e(i).secretKey,"onUpdate:value":s[4]||(s[4]=c=>e(i).secretKey=c),placeholder:"请输入高德API 密钥"},null,8,["value"])]),_:1}),o(r,{name:"base-path"},{label:l(()=>[ye,o(h,null,{title:l(()=>[ve]),default:l(()=>[n("img",{class:"img-style",src:e(L)("/init-home/mark.png")},null,8,ke)]),_:1})]),default:l(()=>[o(d,{value:e(i)["base-path"],"onUpdate:value":s[5]||(s[5]=c=>e(i)["base-path"]=c),placeholder:"{http/https}: //{前端所在服务器IP地址}:{前端暴露的服务端口}/api"},null,8,["value"])]),_:1}),o(r,{name:"showRecordNumber",label:"展示备案号",required:!0},{default:l(()=>[o(K,{checked:e(i).showRecordNumber,"onUpdate:checked":s[6]||(s[6]=c=>e(i).showRecordNumber=c)},null,8,["checked"])]),_:1}),e(i).showRecordNumber?(u(),R(r,{key:0,name:"recordNumber",label:"备案号内容",required:!0},{default:l(()=>[o(U,{value:e(i).recordNumber,"onUpdate:value":s[7]||(s[7]=c=>e(i).recordNumber=c)},null,8,["value"])]),_:1})):b("",!0),o(S,{gutter:24,span:24},{default:l(()=>[o(y,null,{default:l(()=>[o(r,{label:"系统logo"},{default:l(()=>[n("div",Le,[n("div",we,[o(v,{name:"file",action:I,headers:N,showUploadList:!1,beforeUpload:_.beforeLogoUpload,onChange:_.handleChangeLogo,accept:_.imageTypes},{default:l(()=>[n("div",je,[e(t).logoLoading?(u(),p("div",Ke,[o(m,{type:"LoadingOutlined"})])):b("",!0),e(i).logo?(u(),p("div",{key:1,class:"upload-image",style:V([{height:"100%"},e(i).logo?`background-image: url(${e(i).logo});`:""])},null,4)):b("",!0),e(i).logo?(u(),p("div",Ue," 点击修改 ")):(u(),p("div",Ie,[o(m,{type:e(t).logoLoading?"LoadingOutlined":"PlusOutlined"},null,8,["type"])]))])]),_:1},8,["beforeUpload","onChange","accept"]),e(t).logoLoading?(u(),p("div",Ne,[n("div",Te,[o(m,{type:"LoadingOutlined"})])])):b("",!0)])]),Ce,Ve]),_:1})]),_:1}),o(y,null,{default:l(()=>[o(r,null,{label:l(()=>[Be,o(h,{title:"浏览器tab页中显示的图片元素"},{default:l(()=>[n("img",{class:"img-style",src:e(L)("/init-home/mark.png")},null,8,Pe)]),_:1})]),default:l(()=>[n("div",Se,[n("div",xe,[o(v,{name:"file",action:I,headers:N,showUploadList:!1,beforeUpload:_.beforeIconUpload,onChange:_.changeIconUpload,accept:_.iconTypes},{default:l(()=>[n("div",Oe,[e(t).iconLoading?(u(),p("div",Re,[o(m,{type:"LoadingOutlined"})])):b("",!0),e(i).ico?(u(),p("div",{key:1,class:"upload-image-icon",style:V(e(i).ico?`background-image: url(${e(i).ico});`:"")},null,4)):b("",!0),e(i).ico?(u(),p("div",Ae," 点击修改 ")):(u(),p("div",$e,[n("div",null,[o(m,{type:"PlusOutlined"})])]))])]),_:1},8,["beforeUpload","onChange","accept"])])]),Ee,Fe]),_:1})]),_:1})]),_:1})]),_:1}),o(y,{span:14},{default:l(()=>[o(r,{label:"登录背景图"},{default:l(()=>[n("div",Je,[n("div",qe,[o(v,{name:"file",action:I,headers:N,beforeUpload:_.beforeLogoUpload,showUploadList:!1,onChange:_.changeBackUpload,accept:_.imageTypes},{default:l(()=>[n("div",ze,[e(t).backLoading?(u(),p("div",Me,[o(m,{type:"LoadingOutlined"})])):b("",!0),e(i).background?(u(),p("div",{key:1,class:"upload-image",style:V(e(i).background?`background-image: url(${e(i).background});`:"")},null,4)):b("",!0),e(i).background?(u(),p("div",De," 点击修改 ")):(u(),p("div",He,[n("div",null,[o(m,{type:"PlusOutlined"})])]))])]),_:1},8,["beforeUpload","onChange","accept"])])]),Xe,Ye]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"]),o(F,{type:"primary",onClick:e(t).clickSave,disabled:e(t).saveLoading||e(t).logoLoading||e(t).iconLoading||e(t).backLoading},{default:l(()=>[C(" 保存 ")]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1})}}});const eo=ne(Ze,[["__scopeId","data-v-6cb0e7d7"]]);export{eo as default};
