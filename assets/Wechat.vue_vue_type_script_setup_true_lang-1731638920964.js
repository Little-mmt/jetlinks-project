import{L as i}from"./index-1731638920964.js";import{d as s,k as r,s as d,U as p,Z as l}from"./vue-1731638920964.js";const u=a=>new Promise(n=>{const t=document.createElement("script");t.onload=()=>{n(!0)},t.setAttribute("type","text/javascript"),t.setAttribute("src",a),document.body.appendChild(t)}),w={id:"login_container"},g=s({__name:"Wechat",props:{data:{type:Object,default:()=>{}}},emits:["success"],setup(a,{emit:n}){const t=a,o=r(null),c=async()=>{await u("https://wwcdn.weixin.qq.com/node/wework/wwopen/js/wwLogin-1.2.7.js")&&new WwLogin({id:"login_container",appid:t.data.appid,redirect_uri:encodeURIComponent(`${location.origin}/#/oauth/wechat`),state:t.data.state,agentid:t.data.agentid,self_redirect:!0})};return d(()=>{var e;(e=t.data)!=null&&e.appid&&c()}),o.value=setInterval(()=>{const e=i.get("wexin_code");e&&(n("success",e),window.clearInterval(o.value),o.value=null)},2e3),(e,m)=>(p(),l("div",w))}});export{g as _};
