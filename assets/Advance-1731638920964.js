import{d as N,ac as $,k as _,e as A,w as O,U as j,Z as w,_ as u,f as n,X as a,F as R,a1 as F,u as c,V as L,E as b,$ as x,G as M,af as U,ag as D}from"./vue-1731638920964.js";import{eb as G,o as K,$ as P,_ as X,f as Z,ec as q,d as z,e as H,a0 as Q,a1 as W,g as Y}from"./index-1731638920964.js";import{u as ee}from"./instance-1731638920964.js";const te=r=>(U("data-v-9c177013"),r=r(),D(),r),oe={class:"advance-wrapper"},ae={style:{width:"150px"}},se={style:{"max-width":"100px"},class:"tabTitle"},ne={style:{flex:"1"}},le={class:"editor-btn"},ce=te(()=>u("h4",null,"执行结果：",-1)),ie={class:"execute-result"},de=N({__name:"Advance",setup(r){const k=ee(),C=$(),p=_(""),m=_(!1),V=A(()=>JSON.parse(k.detail.metadata)),i=_({}),v=_(""),y=_([]),S=(o,e)=>{let t="";if(["int","long","float","double"].includes(o))t=0;else if(["string","date","enum","password","geoPoint"].includes(o))t="";else if(["boolean"].includes(o))t=!1;else if(["array"].includes(o))t=[];else if(["object"].includes(o)&&(t={},e)){const l=e.properties[0];t[l.id]=S(l.valueType.type)}return t};O(()=>V.value.functions,o=>{var t;const e=[];o==null||o.forEach(l=>{const f={},h=l.inputs||l.properties;for(const d of h){const g=d.valueType?d.valueType.type:"-";f[d.id]=S(g,d.json)}e.push({...l,json:JSON.stringify(f)})}),y.value=e,i.value=e==null?void 0:e[0],p.value=(t=e==null?void 0:e[0])==null?void 0:t.id},{immediate:!0,deep:!0});const I=o=>{const e=y.value.find(t=>t.id===o);i.value={...e}},T=async o=>{var t;m.value=!0;const e=await G(C.params.id,o.id,JSON.parse(o.json)).catch(()=>{m.value=!1}).finally(()=>{m.value=!1});e.success&&(v.value=(e==null?void 0:e.result)instanceof Array?(t=e==null?void 0:e.result)==null?void 0:t[0]:e.result,K("操作成功"))},B=()=>{i.json="",v.value=""};return(o,e)=>{const t=P,l=X,f=Z,h=q,d=z,g=H,J=Q,E=W;return j(),w("div",oe,[u("div",ae,[n(f,{modelValue:c(p),"onUpdate:modelValue":e[0]||(e[0]=s=>M(p)?p.value=s:null),"tab-position":"left",tabBarStyle:{width:"100%"},onChange:I},{default:a(()=>[(j(!0),w(R,null,F(c(y),s=>(j(),L(l,{key:s.id},{tab:a(()=>[n(t,null,{title:a(()=>[b(x(s.name),1)]),default:a(()=>[u("div",se,x(s.name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),u("div",ne,[n(E,{gutter:30},{default:a(()=>[n(J,{span:15},{default:a(()=>[n(h,{ref:`monacoEditor${c(i).id}`,modelValue:c(i).json,"onUpdate:modelValue":e[1]||(e[1]=s=>c(i).json=s),theme:"vs-dark",style:{height:"400px"}},null,8,["modelValue"]),u("div",le,[n(g,null,{default:a(()=>[n(d,{type:"primary",loading:c(m),onClick:e[2]||(e[2]=s=>T(c(i)))},{default:a(()=>[b(" 执行 ")]),_:1},8,["loading"]),n(d,{type:"default",onClick:e[3]||(e[3]=s=>B())},{default:a(()=>[b(" 清空 ")]),_:1})]),_:1})])]),_:1}),n(J,{span:9},{default:a(()=>[ce,u("span",ie,x(c(v)),1)]),_:1})]),_:1})])])}}});const pe=Y(de,[["__scopeId","data-v-9c177013"]]);export{pe as default};
