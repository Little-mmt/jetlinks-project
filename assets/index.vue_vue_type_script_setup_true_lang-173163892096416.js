import{au as h,Z as E,J as S,$ as A,ah as J,ai as F}from"./index-1731638920964.js";import"./index-1731638920964284.js";import{u as Z}from"./instance-1731638920964.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-173163892096417.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-173163892096413.js";import{_ as L}from"./index.vue_vue_type_script_setup_true_lang-173163892096415.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang-173163892096414.js";import{_ as R}from"./index.vue_vue_type_script_setup_true_name_InklingModal_lang-1731638920964.js";import{d as U}from"./accessConfig-1731638920964.js";import{g as X}from"./plugin-17316389209642.js";import{d as z,k as b,o as G,w as Q,ab as W,U as d,Z as D,f as l,X as s,E as o,_ as $,$ as u,u as n,Y as _,V as v,F as ee}from"./vue-1731638920964.js";const te={style:{display:"flex"}},ne={style:{flex:"1"}},re={key:0},se=$("p",null," 通过调用SDK或HTTP请求的方式接入第三方系统设备数据时，第三方系统与平台当前设备对应的设备ID。 ",-1),ge=z({__name:"index",setup(ae){const g=b(!1),f=b(!1),e=Z(),Y=b(),T=b(),P=()=>{var a,i;(a=e.current)!=null&&a.id&&e.refresh((i=e.current)==null?void 0:i.id),g.value=!1},N=a=>{var i,m;(i=e.current)!=null&&i.id&&e.refresh((m=e.current)==null?void 0:m.id),T.value=a,x(),f.value=!1},V=()=>{f.value=!0},x=()=>{var a,i;((a=e.current)==null?void 0:a.accessProvider)==="plugin_gateway"&&U((i=e.current)==null?void 0:i.accessId).then(async m=>{var I,k;if(m.success){T.value=m.result.channelId;const y=await X("device",m.result.channelId,(I=e.current)==null?void 0:I.id);y.success&&(Y.value=(k=y.result)==null?void 0:k.externalId)}})};return G(()=>{var a;(a=e==null?void 0:e.current)!=null&&a.id&&e.refresh(e.current.id)}),Q(()=>{var a;return(a=e.current)==null?void 0:a.id},()=>{var a;(a=e.current)!=null&&a.id&&x()},{immediate:!0}),(a,i)=>{var C,w,B,H;const m=W("AIcon"),I=E,k=S,y=A,c=J,j=F;return d(),D(ee,null,[l(j,{bordered:""},{title:s(()=>[o(" 设备信息 "),l(I,{type:"link",onClick:i[0]||(i[0]=p=>g.value=!0),hasPermission:"device/Instance:update"},{icon:s(()=>[l(m,{type:"EditOutlined"})]),default:s(()=>[o(" 编辑 ")]),_:1})]),default:s(()=>{var p,M;return[l(c,{label:"设备ID"},{default:s(()=>{var t;return[$("div",te,[$("div",ne,[l(k,null,{default:s(()=>{var r;return[o(u((r=n(e).current)==null?void 0:r.id),1)]}),_:1})]),((t=n(e).current)==null?void 0:t.accessProvider)==="plugin_gateway"?(d(),D("div",re,[l(y,null,{title:s(()=>[se,o(" 如双方ID值一致，则无需填写 ")]),default:s(()=>[n(Y)?(d(),D("a",{key:1,type:"link",onClick:i[1]||(i[1]=r=>f.value=!0)}," 已映射 ")):(d(),D("a",{key:0,type:"link",onClick:V}," 未映射 "))]),_:1})])):_("",!0)])]}),_:1}),l(c,{label:"产品名称"},{default:s(()=>{var t;return[o(u((t=n(e).current)==null?void 0:t.productName),1)]}),_:1}),l(c,{label:"设备类型"},{default:s(()=>{var t,r;return[o(u((r=(t=n(e).current)==null?void 0:t.deviceType)==null?void 0:r.text),1)]}),_:1}),l(c,{label:"固件版本"},{default:s(()=>{var t,r;return[o(u((r=(t=n(e).current)==null?void 0:t.firmwareInfo)==null?void 0:r.version),1)]}),_:1}),l(c,{label:"连接协议"},{default:s(()=>{var t;return[o(u((t=n(e).current)==null?void 0:t.transport),1)]}),_:1}),l(c,{label:"消息协议"},{default:s(()=>{var t;return[o(u((t=n(e).current)==null?void 0:t.protocolName),1)]}),_:1}),l(c,{label:"创建时间"},{default:s(()=>{var t,r;return[o(u((t=n(e).current)!=null&&t.createTime?n(h)((r=n(e).current)==null?void 0:r.createTime).format("YYYY-MM-DD HH:mm:ss"):""),1)]}),_:1}),l(c,{label:"注册时间"},{default:s(()=>{var t,r;return[o(u((t=n(e).current)!=null&&t.registerTime?n(h)((r=n(e).current)==null?void 0:r.registerTime).format("YYYY-MM-DD HH:mm:ss"):""),1)]}),_:1}),l(c,{label:"最后上线时间"},{default:s(()=>{var t,r;return[o(u((t=n(e).current)!=null&&t.onlineTime?n(h)((r=n(e).current)==null?void 0:r.onlineTime).format("YYYY-MM-DD HH:mm:ss"):""),1)]}),_:1}),((M=(p=n(e).current)==null?void 0:p.deviceType)==null?void 0:M.value)==="childrenDevice"?(d(),v(c,{key:0,label:"父设备"},{default:s(()=>{var t;return[o(u((t=n(e).current)==null?void 0:t.parentId),1)]}),_:1})):_("",!0),l(c,{label:"说明"},{default:s(()=>{var t;return[o(u((t=n(e).current)==null?void 0:t.description),1)]}),_:1})]}),_:1}),l(K),(C=n(e).current)!=null&&C.tags&&((w=n(e).current)==null?void 0:w.tags.length)>0?(d(),v(L,{key:0})):_("",!0),(B=n(e).current)!=null&&B.relations&&((H=n(e).current)==null?void 0:H.relations.length)>0?(d(),v(O,{key:1})):_("",!0),n(g)?(d(),v(q,{key:2,data:n(e).current,onClose:i[2]||(i[2]=p=>g.value=!1),onSave:P},null,8,["data"])):_("",!0),n(f)?(d(),v(n(R),{key:3,id:n(Y),accessId:n(e).current.accessId,pluginId:n(T),onCancel:i[3]||(i[3]=p=>f.value=!1),onSubmit:N},null,8,["id","accessId","pluginId"])):_("",!0)],64)}}});export{ge as _};
