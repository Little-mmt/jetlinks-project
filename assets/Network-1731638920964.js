import{au as C,aJ as V,aK as D,dr as T,af as L,A as R,g as U}from"./index-1731638920964.js";import"./index-1731638920964279.js";import{d as Y}from"./dashboard-1731638920964.js";import{t as H,e as G,g as K,n as M}from"./tool-1731638920964.js";import J from"./ServerList-1731638920964.js";import P from"./echarts-1731638920964.js";import{d as E,k as i,r as X,e as Z,w as q,ab as z,U as g,V as A,X as l,_ as u,f as r,u as o,E as m,Z as Q,F as W,G as ee,Y as te,af as ae,ag as se}from"./vue-1731638920964.js";import"./index-1731638920964297.js";const oe=f=>(ae("data-v-49ed025c"),f=f(),se(),f),ne={class:"dash-board"},re={class:"header"},le={class:"left"},de=oe(()=>u("h3",{style:{width:"80px"}},"网络流量",-1)),ue={class:"right"},pe={style:{height:"300px"}},ce=E({name:"Network"}),ie=E({...ce,props:{serviceId:{type:String,default:void 0}},setup(f){i({});const b=i(!1),s=i({type:"bytesRead",time:{type:"hour",time:[null,null]}}),h=i(!1),p=i([]),k=i([]),v=X({xAxis:[],data:[]}),S=a=>{s.value.time.type=void 0,x(s.value)},j=a=>{x(s.value)},x=async a=>{b.value=!0;const e=await Y(M(a));if(e.success){const t={},d=new Set;e.result.length?(h.value=!1,e.result.forEach(y=>{const N=y.data.value,_=[],n=y.data.clusterNodeId;N.forEach(I=>{_.push(I.value),d.add(I.timeString)}),t[n]={_data:t[n]?t[n]._data.concat(_):_}}),$(t,[...d.keys()])):($([],[]),h.value=!0)}setTimeout(()=>{b.value=!1},300)},w=a=>{let e="";return a>=1024&&a<1048576?e=`${Number((a/1024).toFixed(2))}KB`:a>=1048576&&a<1073741824?e=`${Number((a/1048576).toFixed(2))}M`:a>=1073741824?e=`${Number((a/1073741824).toFixed(2))}G`:e=`${a}B`,e},B=a=>{let e="";return a.forEach((t,d)=>{const{value:c}=t;d===0?e+=`${t==null?void 0:t.axisValueLabel}<br />${t==null?void 0:t.marker}${t==null?void 0:t.seriesName} &nbsp; ${w(c)}<br />`:e+=`${t==null?void 0:t.marker}${t==null?void 0:t.seriesName} &nbsp; ${w(c)}<br />`}),e},F=(a,e)=>({data:a[e]._data,name:e,type:"line",smooth:!0}),$=(a,e)=>{const t=Object.keys(a);p.value=t,k.value=t,v.xAxis=e,v.data=a},O=Z(()=>{const a=p.value.length?p.value.map(e=>F(v.data,e)):H;return{xAxis:{type:"category",boundaryGap:!1,data:v.xAxis},yAxis:{type:"value",axisLabel:{formatter:e=>w(e)}},grid:{left:"70px",right:s.value.time.type==="week"?50:10,bottom:"24px",top:24},tooltip:{trigger:"axis",formatter:e=>B(e)},color:G,series:a}});return q(()=>s.value.time.type,a=>{if(a===void 0)return;const e=K(a);s.value.time.time=[C(e),C(new Date)],x(s.value)},{immediate:!0,deep:!0}),(a,e)=>{const t=V,d=D,c=z("AIcon"),y=T,N=L,_=R;return g(),A(_,{spinning:o(b)},{default:l(()=>[u("div",ne,[u("div",re,[u("div",le,[de,r(d,{"button-style":"solid",value:o(s).type,"onUpdate:value":e[0]||(e[0]=n=>o(s).type=n),onChange:j},{default:l(()=>[r(t,{value:"bytesRead"},{default:l(()=>[m(" 上行 ")]),_:1}),r(t,{value:"bytesSent"},{default:l(()=>[m(" 下行 ")]),_:1})]),_:1},8,["value"])]),u("div",ue,[r(d,{"default-value":"a","button-style":"solid",style:{"margin-right":"10px"},value:o(s).time.type,"onUpdate:value":e[1]||(e[1]=n=>o(s).time.type=n)},{default:l(()=>[r(t,{value:"hour"},{default:l(()=>[m(" 最近1小时 ")]),_:1}),r(t,{value:"day"},{default:l(()=>[m(" 最近24小时 ")]),_:1}),r(t,{value:"week"},{default:l(()=>[m(" 近一周 ")]),_:1})]),_:1},8,["value"]),r(y,{allowClear:!1,"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:o(s).time.time,"onUpdate:value":e[2]||(e[2]=n=>o(s).time.time=n),onChange:S},{suffixIcon:l(()=>[r(c,{type:"CalendarOutlined"})]),_:1},8,["value"])])]),u("div",null,[o(h)?(g(),A(N,{key:0,style:{height:"250px","margin-top":"100px"}})):(g(),Q(W,{key:1},[u("div",pe,[r(P,{options:o(O)},null,8,["options"])]),o(k).length>1?(g(),A(J,{key:0,value:o(p),"onUpdate:value":e[3]||(e[3]=n=>ee(p)?p.value=n:null),options:o(k),color:"#979AFF"},null,8,["value","options"])):te("",!0)],64))])])]),_:1},8,["spinning"])}}});const ke=U(ie,[["__scopeId","data-v-49ed025c"]]);export{ke as default};
