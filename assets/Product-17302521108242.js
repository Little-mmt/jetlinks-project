import{h as j,ac as k,x as q,a0 as D,a1 as N,a2 as R,a3 as J,g as P}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import"./index-1730252110824287.js";import{n as B,o as F,l as L}from"./product-17302521108244.js";import{q as E}from"./category-1730252110824.js";import{g as O}from"./department-17302521108242.js";import{a as V}from"./setting-17302521108242.js";import{d as v,k as u,ab as $,U as A,Z as U,f as r,X as i,R as z,_ as d,u as g,$ as y,F as G,af as Q,ag as X}from"./vue-1730252110824.js";const Z=o=>(Q("data-v-1cd7ba1e"),o=o(),X(),o),H=["src"],M={style:{width:"calc(100% - 100px)"}},W={style:{"font-size":"16px","font-weight":"600"}},Y=Z(()=>d("div",{class:"card-item-content-text"}," 设备类型 ",-1)),ee=v({name:"Product"}),te=v({...ee,props:{rowKey:{type:String,default:""},detail:{type:Object,default:()=>({})}},emits:["update:rowKey","update:detail","change"],setup(o,{emit:l}){const p=o,w=u(),m=u({}),_=u(!0),h=[{title:"ID",dataIndex:"id",width:300,ellipsis:!0,fixed:"left",search:{type:"string"}},{title:"名称",dataIndex:"name",width:200,ellipsis:!0,search:{type:"string",first:!0}},{title:"网关类型",dataIndex:"accessProvider",width:150,ellipsis:!0,hideInTable:!0,search:{type:"select",options:()=>B().then(e=>V(e.result||[]))}},{title:"接入方式",dataIndex:"accessId",width:150,ellipsis:!0,search:{type:"select",options:()=>F().then(e=>e.result.map(t=>({label:t.name,value:t.id})))}},{title:"设备类型",dataIndex:"deviceType",width:150,search:{type:"select",options:[{label:"直连设备",value:"device"},{label:"网关子设备",value:"childrenDevice"},{label:"网关设备",value:"gateway"}]}},{title:"状态",dataIndex:"state",width:"90px",search:{type:"select",options:[{label:"禁用",value:0},{label:"正常",value:1}]}},{title:"说明",dataIndex:"describe",ellipsis:!0,width:300},{dataIndex:"classifiedId",title:"分类",hideInTable:!0,search:{type:"treeSelect",options:()=>new Promise(e=>{E({paging:!1}).then(t=>{e(t.result)})}),componentProps:{fieldNames:{label:"name",value:"id"}}}},{dataIndex:"id$dim-assets",title:"所属组织",hideInTable:!0,search:{type:"treeSelect",termOptions:["eq"],componentProps:{fieldNames:{label:"name",value:"value"}},options:()=>new Promise(e=>{O({paging:!1}).then(t=>{const s=c=>c.map(a=>(a.children&&(a.children=s(a.children)),{...a,value:JSON.stringify({assetType:"product",targets:[{type:"org",id:a.id}]})}));e(s(t.result)||[])})})}}],x=e=>{m.value=e},I=async e=>{const t=[];p.rowKey&&t.push({name:"id",value:p.rowKey}),t.push({name:"createTime",order:"desc"}),e.sorts=t;const s=await L(e);if(s.success&&p.rowKey&&_.value){const c=s.result.data.find(a=>a.id===p.rowKey);l("update:detail",c),_.value=!1}return{...s}},b=e=>{l("update:rowKey",e.id),l("update:detail",e),l("change",e)};return(e,t)=>{const s=k,c=q,a=$("Ellipsis"),S=D,T=N,C=R,K=J;return A(),U(G,null,[r(s,{columns:h,type:"simple",onSearch:x,class:"scene-search",target:"scene-triggrt-device-device"}),r(c,{style:{margin:"0"}}),r(K,{ref_key:"actionRef",ref:w,model:"CARD",columns:h,params:g(m),request:I,gridColumn:2,gridColumns:[2,2,2],bodyStyle:{paddingRight:0,paddingLeft:0}},{card:i(n=>[r(C,{value:n,active:o.rowKey===n.id,status:n.state,statusText:n.state===1?"正常":"禁用",statusNames:{1:"processing",0:"error"},onClick:b},{img:i(()=>[z(e.$slots,"img",{},()=>[d("img",{width:"80",height:"80",src:n.photoUrl||g(j)("/device-product.png")},null,8,H)],!0)]),content:i(()=>[d("div",M,[r(a,null,{default:i(()=>[d("span",W,y(n.name),1)]),_:2},1024)]),r(T,null,{default:i(()=>[r(S,{span:12},{default:i(()=>{var f;return[Y,d("div",null,y((f=n.deviceType)==null?void 0:f.text),1)]}),_:2},1024)]),_:2},1024)]),_:2},1032,["value","active","status","statusText"])]),_:3},8,["params"])],64)}}});const he=P(te,[["__scopeId","data-v-1cd7ba1e"]]);export{he as default};
