import{d as q,ac as L,k as g,o as U,ab as _,U as r,Z as x,f as n,X as e,u as c,E as h,_ as i,$ as d,V as C,F as I,a1 as X,Y,af as $,ag as G}from"./vue-1730252110824.js";import{h as H,o as T,Z as K,dq as Q,a0 as W,a1 as ee,a2 as te,e as ne,a3 as oe,g as ae}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import{T as B,S as se}from"./Save-17302521108247.js";import{q as le,e as ie,r as ce}from"./plugin-17302521108242.js";import"./rules-1730252110824.js";import"./UploadFile-17302521108242.js";const D=m=>($("data-v-ba0fecf7"),m=m(),G(),m),pe=["src"],re={style:{"font-size":"16px","font-weight":"600"}},de=D(()=>i("div",{class:"card-item-content-text"}," 插件ID ",-1)),ue=D(()=>i("div",{class:"card-item-content-text"}," 插件类型 ",-1)),_e=q({name:"PluginIndex"}),me=q({..._e,setup(m){const E=L(),p=g(!1),b=g(),f=g(),y=g(),w=[{title:"插件ID",dataIndex:"id",key:"type",fixed:"left",width:200,ellipsis:!0,search:{type:"input"}},{title:"插件名称",dataIndex:"name",key:"type",fixed:"left",width:200,ellipsis:!0,search:{type:"input"}},{title:"版本",dataIndex:"version",key:"version",ellipsis:!0},{title:"插件类型",dataIndex:"type",key:"type",ellipsis:!0,scopedSlots:!0,search:{type:"select",options:()=>new Promise(o=>{ie().then(u=>{var l;o((l=u.result)==null?void 0:l.map(a=>({...a,label:a.text})))})})}},{title:"文件",dataIndex:"filename",key:"filename",ellipsis:!0},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0,search:{type:"string"}},{title:"操作",key:"action",fixed:"right",width:120,scopedSlots:!0}],F=()=>{f.value={},p.value=!0},J=o=>{b.value=o},N=()=>{var o;y.value&&((o=y.value)==null||o.reload()),p.value=!1},O=()=>{p.value=!1,f.value=void 0},S=o=>[{key:"update",text:"编辑",tooltip:{title:"编辑"},icon:"EditOutlined",onClick:()=>{p.value=!0,f.value=o}},{key:"delete",text:"删除",tooltip:{title:"删除"},popConfirm:{title:"确认删除?",onConfirm:()=>{const u=ce(o.id);return u.then(l=>{var a;l.status===200?(T("操作成功！"),(a=y.value)==null||a.reload()):T((l==null?void 0:l.message)||"操作失败！","error")}),u}},icon:"DeleteOutlined"}];return U(()=>{E.query.save&&(p.value=!0)}),(o,u)=>{const l=_("pro-search"),a=_("AIcon"),k=K,V=Q,v=_("Ellipsis"),P=W,j=ee,A=te,M=ne,R=oe,z=_("FullPage"),Z=_("page-container");return r(),x(I,null,[n(Z,null,{default:e(()=>[n(l,{columns:w,target:"link-plugin",onSearch:J}),n(z,null,{default:e(()=>[n(R,{ref_key:"instanceRef",ref:y,columns:w,request:c(le),defaultParams:{sorts:[{name:"createTime",order:"desc"}]},params:c(b)},{headerTitle:e(()=>[n(k,{type:"primary",onClick:F,hasPermission:"link/plugin:add"},{icon:e(()=>[n(a,{type:"PlusOutlined"})]),default:e(()=>[h(" 新增 ")]),_:1})]),card:e(s=>[n(A,{value:s,showStatus:!1,actions:S(s),statusNames:{processing:"processing"},status:"processing"},{img:e(()=>[i("img",{width:80,height:80,src:c(H)("/plug.png")},null,8,pe)]),content:e(()=>[i("div",null,[i("div",null,[n(V,{class:"plugin-version"},{default:e(()=>[h(d(s.version),1)]),_:2},1024)]),n(v,{style:{width:"calc(100% - 100px)","margin-bottom":"18px"}},{default:e(()=>[i("span",re,d(s.name),1)]),_:2},1024)]),n(j,null,{default:e(()=>[n(P,{span:12},{default:e(()=>[de,n(v,{style:{width:"100%"}},{default:e(()=>[h(d(s.id),1)]),_:2},1024)]),_:2},1024),n(P,{span:12},{default:e(()=>[ue,n(v,{style:{width:"100%"}},{default:e(()=>[h(d(c(B)[s.type]),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),actions:e(t=>[n(k,{disabled:t.disabled,popConfirm:t.popConfirm,tooltip:{...t.tooltip},onClick:t.onClick,hasPermission:"link/plugin:"+t.key},{default:e(()=>[t.key==="delete"?(r(),C(a,{key:0,type:"DeleteOutlined"})):(r(),x(I,{key:1},[n(a,{type:t.icon},null,8,["type"]),i("span",null,d(t==null?void 0:t.text),1)],64))]),_:2},1032,["disabled","popConfirm","tooltip","onClick","hasPermission"])]),_:2},1032,["value","actions"])]),type:e(s=>[i("span",null,d(c(B)[s.type]),1)]),action:e(s=>[n(M,{size:16},{default:e(()=>[(r(!0),x(I,null,X(S(s),t=>(r(),C(k,{key:t.key,disabled:t.disabled,popConfirm:t.popConfirm,tooltip:{...t.tooltip},onClick:t.onClick,type:"link",danger:t.key==="delete",style:{padding:"0 5px"},hasPermission:"link/plugin:"+t.key},{icon:e(()=>[n(a,{type:t.icon},null,8,["type"])]),_:2},1032,["disabled","popConfirm","tooltip","onClick","danger","hasPermission"]))),128))]),_:2},1024)]),_:1},8,["request","params"])]),_:1})]),_:1}),c(p)?(r(),C(se,{key:0,data:c(f),onCancel:O,onOk:N},null,8,["data"])):Y("",!0)],64)}}});const Pe=ae(me,[["__scopeId","data-v-ba0fecf7"]]);export{Pe as default};
