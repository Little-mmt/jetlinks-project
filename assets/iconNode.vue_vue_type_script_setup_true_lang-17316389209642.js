import{$ as m,o as f}from"./index-1731638920964.js";import{p as w}from"./playback-1731638920964.js";import{d as y,k as v,e as _,w as C,ab as T,U as h,V as k,X as I,_ as L,f as V,u as l}from"./vue-1731638920964.js";const S=y({__name:"iconNode",props:{type:{},item:{},onCloudView:{type:Function},onDownLoad:{type:Function}},setup(s){var a;const o=s,t=v((a=o.item)!=null&&a.isServer?2:0),i=e=>e===0?"CloudDownloadOutlined":e===2?"EyeOutlined":"LoadingOutlined",c=_(()=>o.type==="local"?i(t.value):"DownloadOutlined"),d=e=>{t.value=1,w.downloadRecord(e.deviceId,e.channelId,{local:!1,downloadSpeed:4,startTime:e.startTime,endTime:e.endTime}).then(n=>{n.status===200&&f("操作成功。上传云端需要一定时间，请稍后查看云端数据"),t.value=n.status===200?2:0}).catch(()=>{t.value=0})},r=()=>{o.type==="local"?t.value===2?o.onCloudView(o.item.startTime,o.item.endTime):t.value===0&&d(o.item):o.onDownLoad()};return C(()=>o.item,()=>{var e;t.value=(e=o.item)!=null&&e.isServer?2:0}),(e,n)=>{const u=T("AIcon"),p=m;return h(),k(p,{key:"download",title:e.type!=="local"?"下载录像文件":e.item.isServer||l(t)===2?"查看":"下载到云端"},{default:I(()=>[L("a",{onClick:r},[V(u,{type:l(c)},null,8,["type"])])]),_:1},8,["title"])}}});export{S as _};
