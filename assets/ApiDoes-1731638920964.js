import{aF as j,I as C,a3 as K,_ as O,f as E,g as L}from"./index-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import P from"./InputCard-1731638920964.js";import{d as z,f as I,g as w}from"./utils-17316389209642.js";import k from"./monaco-1731638920964.js";import{d as q,H as V,k as $,r as D,e as F,o as J,w as A,U as y,Z as b,_ as a,$ as x,u as t,f as m,Y as T,X as S,a0 as M,F as R,a1 as U,V as H,af as X,ag as Y}from"./vue-1731638920964.js";const _=f=>(X("data-v-ac9e11fc"),f=f(),Y(),f),Z={class:"api-does-container"},G={class:"top"},Q={class:"input"},W=_(()=>a("span",{class:"label"},"请求数据类型",-1)),ee=_(()=>a("span",{class:"label"},"响应数据类型",-1)),te=_(()=>a("span",null,x('["/"]'),-1)),ae={key:0,class:"api-card"},se=_(()=>a("h5",null,"接口描述",-1)),oe={key:1,class:"api-card"},ce=_(()=>a("h5",null,"请求示例",-1)),ne={key:2,class:"api-card"},ie=_(()=>a("h5",null,"请求参数",-1)),de={class:"content"},le={class:"api-card"},re=_(()=>a("h5",null,"响应状态",-1)),pe={class:"content"},ue={class:"api-card"},me=_(()=>a("h5",null,"响应参数",-1)),_e={class:"content"},he=q({name:"APIDoes"}),ye=q({...he,props:{selectApi:{type:Object,required:!0},schemas:{type:Object,required:!0}},setup(f){const o=f,{selectApi:v}=V(o),g=$(!1),c=D({columns:[{title:"参数名",dataIndex:"paramsName",key:"paramsName",width:320},{title:"参数说明",dataIndex:"desc",key:"desc"},{title:"请求类型",dataIndex:"in",key:"in",width:80},{title:"是否必须",dataIndex:"required",key:"required",scopedSlots:!0,width:80},{title:"参数类型",dataIndex:"paramsType",key:"paramsType",width:200},{title:"schema",dataIndex:"type",key:"type",width:200}],tableData:[],tips:[],codeText:void 0,getData:()=>{var d;if(!o.selectApi.requestBody)return c.tableData=o.selectApi.parameters;const e=o.selectApi.requestBody.content["application/json"].schema,i=e.$ref||((d=e==null?void 0:e.items)==null?void 0:d.$ref);if(i){const s=i==null?void 0:i.split("/").pop(),r=e.type||"",l=I(o.schemas,s),{codeText:h,codeTips:p}=w(o.schemas,l,3);c.codeText=JSON.stringify(h),c.tips=p,c.tableData=[{paramsName:s[0].toLowerCase()+s.substring(1),desc:s,in:"body",id:j(),required:!0,paramsType:r||s,type:r||s,children:l}]}else{const s=e.type||"";c.codeText=z(s,e)}setTimeout(()=>{g.value=!0},1e3)}}),n=D({activeKey:"",columns:[{title:"状态码",dataIndex:"code",key:"code",width:200},{title:"说明",dataIndex:"desc",key:"desc"},{title:"schema",dataIndex:"schema",key:"schema",width:200}],tableData:[],getData:()=>{var i;if(!Object.keys(o.selectApi.responses).length)return n.tableData=[];const e=[];Object.entries(o.selectApi.responses||{}).forEach(d=>{var l;const s=d[1].description,r=((l=d[1].content["*/*"].schema.$ref)==null?void 0:l.split("/"))||"";e.push({code:d[0],desc:s,schema:r&&r.pop()})}),n.activeKey=(i=e[0])==null?void 0:i.code,n.tableData=e}}),B=F(()=>n.tableData.map(e=>e.code+"").filter(e=>e!=="400")),u=D({columns:[{title:"参数名称",dataIndex:"paramsName",width:320},{title:"参数说明",dataIndex:"desc"},{title:"类型",dataIndex:"paramsType",width:200},{title:"schema",dataIndex:"schema",width:200}],tableData:[],tips:[],codeText:"",getData:e=>{var l;const i=(l=n.tableData.find(h=>h.code===e))==null?void 0:l.schema,d=I(o.schemas,i),{codeText:s,codeTips:r}=w(o.schemas,d,3);u.codeText=JSON.stringify(s),u.tips=r,u.tableData=d,setTimeout(()=>{g.value=!0},1e3)}}),N=e=>e&&e.content?Object.keys(e.content||{})[0]:"";return J(()=>{c.getData(),n.getData()}),A(()=>o.selectApi,()=>{c.getData(),n.getData()}),A([()=>n.activeKey,()=>o.selectApi],e=>{e[0]&&u.getData(e[0])}),(e,i)=>{var h;const d=C,s=K,r=O,l=E;return y(),b("div",Z,[a("div",G,[a("h5",null,x(t(v).summary),1),a("div",Q,[m(P,{value:t(v).method},null,8,["value"]),m(d,{value:(h=t(v))==null?void 0:h.url,disabled:""},null,8,["value"])])]),a("p",null,[W,a("span",null,x(N(t(v).requestBody)||"application/x-www-form-urlencoded"),1),ee,te]),o.selectApi.description?(y(),b("div",ae,[se,a("div",null,x(o.selectApi.description),1)])):T("",!0),t(c).codeText!==void 0?(y(),b("div",oe,[ce,m(k,{tips:t(c).tips,codeText:t(c).codeText,loading:t(g)},null,8,["tips","codeText","loading"])])):T("",!0),t(c).tableData.length?(y(),b("div",ne,[ie,a("div",de,[m(s,{columns:t(c).columns,dataSource:t(c).tableData,noPagination:"",model:"TABLE",size:"small"},{required:S(p=>[a("span",{style:M({color:p.required?"#f81d22":""})},x(!!p.required+""),5)]),_:1},8,["columns","dataSource"])])])):T("",!0),a("div",le,[re,a("div",pe,[m(s,{columns:t(n).columns,dataSource:t(n).tableData,noPagination:"",model:"TABLE",size:"small"},null,8,["columns","dataSource"]),m(l,{activeKey:t(n).activeKey,"onUpdate:activeKey":i[0]||(i[0]=p=>t(n).activeKey=p)},{default:S(()=>[(y(!0),b(R,null,U(t(B),p=>(y(),H(r,{key:p,tab:p},null,8,["tab"]))),128))]),_:1},8,["activeKey"])])]),a("div",ue,[me,a("div",_e,[m(s,{columns:t(u).columns,dataSource:t(u).tableData,noPagination:"",model:"TABLE",size:"small"},null,8,["columns","dataSource"])]),m(k,{tips:t(u).tips,codeText:t(u).codeText,loading:t(g)},null,8,["tips","codeText","loading"])])])}}});const Se=L(ye,[["__scopeId","data-v-ac9e11fc"]]);export{Se as default};
