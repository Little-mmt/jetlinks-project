import{a4 as R,a6 as S}from"./index-1730252110824.js";import{r as B}from"./type-17302521108244.js";import{ah as I,d as b,ai as w,k as C,s as H,U as x,V as T,u as _}from"./vue-1730252110824.js";const j=I({id:"type",state:()=>({configRef:[],resourcesClusters:{}}),actions:{setConfigRef(o){this.configRef=o},setResourcesClusters(o){this.resourcesClusters=o}}}),L=b({__name:"LocalAddressSelect",props:{value:{type:String,default:void 0},shareCluster:{type:Boolean,default:!0},serverId:{type:String,default:void 0}},emits:["update:value","change","valueChange"],setup(o,{emit:r}){const t=o,c=j(),{resourcesClusters:n}=w(c),v=C(),l=C([]),d=async a=>{var u,f,p,i;if((u=n.value)==null?void 0:u[a]){const e=(i=(p=n.value)==null?void 0:p[a])==null?void 0:i[0],s=[{value:e==null?void 0:e.host,label:e==null?void 0:e.host}];l.value=e?s:[]}else{const e=await B(a);if(e.status===200){const s=(f=e.result)==null?void 0:f[0],y=[{value:s==null?void 0:s.host,label:s==null?void 0:s.host}];l.value=s?y:[];const h=R(n.value);h[a]=e.result,c.setResourcesClusters(h),r("valueChange",t.value)}else l.value=[]}};H(()=>{v.value=t.value,!t.shareCluster&&t.serverId&&d(t.serverId),r("valueChange",t.value)});const g=a=>{r("update:value",a),r("change",t.value)};return(a,m)=>{const u=S;return x(),T(u,{value:_(v),options:_(l),placeholder:"请选择本地地址",allowClear:"","show-search":"",disabled:o.shareCluster,onChange:g},null,8,["value","options","disabled"])}}});export{L as _,j as u};
