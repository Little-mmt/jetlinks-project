import{F as z,cU as G,aJ as K,e as L,aK as Q,$ as X,a7 as Y,a0 as Z,a6 as H,d as M,a1 as W,cV as ee,g as te}from"./index-1730252110824.js";import"./index-1730252110824279.js";import"./index-1730252110824291.js";import{d as le,k as _,e as ae,w as ne,ab as ue,U as p,Z as m,_ as x,f as a,u as l,G as V,X as o,E as b,V as oe,Y as T,F as I,af as se,ag as re}from"./vue-1730252110824.js";const ce=i=>(se("data-v-c9673bb2"),i=i(),re(),i),pe={class:"top"},ie={key:0},de={class:"content"},ve={key:0,class:"fixed"},_e={key:1,class:"percent"},me=ce(()=>x("div",{class:"percent-title"},"点位值",-1)),he=le({__name:"DeathArea",props:{value:{type:Array,default:()=>[]}},emits:["update:value","change"],setup(i,{emit:w}){const C=i,U=z.useInjectFormItemContext(),e=_(C.value),d=_(!1),r=_("currentValue"),c=_("fix"),h=_(),j=ae(()=>{var t;return((t=e.value)==null?void 0:t.length)===1?[{label:"=",value:"neq"},{label:">",value:"lte"},{label:"<",value:"gte"},{label:"≥",value:"lt"},{label:"≤",value:"gt"}]:[{label:"<",value:"gte"},{label:"≤",value:"gt"}]}),J=[{label:"<",value:"lte"},{label:"≤",value:"lt"}],S=t=>{t?e.value=[{column:"currentValue",value:void 0,termType:void 0,type:"and"}]:e.value=[],s()},F=()=>{c.value==="fix"?(c.value="range",e.value=[{column:"currentValue",value:"",termType:void 0,type:"or"},{column:"currentValue",value:"",termType:void 0,type:"or"}]):(c.value="fix",e.value=[{column:"currentValue",value:void 0,termType:void 0,type:"and"}]),s()},B=t=>{t.target.value==="currentValue"?(c.value="fix",e.value=[{column:"currentValue",value:void 0,termType:void 0,type:"and"}]):e.value=[{column:"this['currentValue'] - this['lastValue']*init/100",value:0,termType:"lt",type:"or"},{column:"this['currentValue'] - this['lastValue']*0/100",value:0,termType:"gt",type:"or"}],s()},N=t=>{t?e.value=[{column:`this['currentValue'] - this['lastValue'] * ${100-t}/100`,value:0,termType:"lt",type:"or"},{column:`this['currentValue'] - this['lastValue'] * ${t+100}/100`,value:0,termType:"gt",type:"or"}]:e.value=[{column:"this['currentValue'] - this['lastValue'] * 1/100",value:0,termType:"lt",type:"or"},{column:"this['currentValue'] - this['lastValue'] * 1/100",value:0,termType:"gt",type:"or"}],s()},D=t=>{const f=t.find(y=>y.termType==="lt").column.split("*")[1].split("/")[0];h.value=f!=="init"?100-f:void 0},s=()=>{w("update:value",e.value),w("change",e.value),U.onFieldChange()};return ne(()=>C.value,t=>{var n;t&&t.length!==0&&(d.value=!0,t&&((n=t[0])==null?void 0:n.column)==="currentValue"?(r.value="currentValue",e.value=t,t.length===2&&(c.value="range")):(D(t),r.value="this['currentValue'] - this['lastValue']"))},{deep:!0,immediate:!0}),(t,n)=>{const f=G,y=K,O=L,P=Q,k=ue("AIcon"),$=X,g=Y,v=Z,A=H,E=M,R=W,q=ee;return p(),m(I,null,[x("div",pe,[a(f,{checked:l(d),"onUpdate:checked":n[0]||(n[0]=u=>V(d)?d.value=u:null),onChange:S},null,8,["checked"])]),l(d)?(p(),m("div",ie,[x("div",de,[a(P,{value:l(r),"onUpdate:value":n[1]||(n[1]=u=>V(r)?r.value=u:null),onChange:B},{default:o(()=>[a(O,null,{default:o(()=>[a(y,{value:"currentValue"},{default:o(()=>[b("固定值")]),_:1}),a(y,{value:"this['currentValue'] - this['lastValue']"},{default:o(()=>[b("百分比")]),_:1})]),_:1})]),_:1},8,["value"]),l(r)!=="currentValue"?(p(),oe($,{key:0,title:"最近一次采集到的值与上一次采集值比对，数值浮动在百分比以内时将被过滤"},{default:o(()=>[a(k,{type:"QuestionCircleOutlined",style:{"margin-left":"10px","font-size":"18px",color:"rgb(153, 153, 153)"}})]),_:1})):T("",!0)]),a(q,null,{default:o(()=>[l(r)==="currentValue"?(p(),m("div",ve,[a(R,{gutter:5,align:"middle"},{default:o(()=>[a(v,null,{default:o(()=>[a(g,{value:l(e)[0].value,"onUpdate:value":n[2]||(n[2]=u=>l(e)[0].value=u),style:{width:"100%"},placeholder:"请输入值",max:l(e)[1]?l(e)[1].value:999999,min:1,onChange:s},null,8,["value","max"])]),_:1}),a(v,null,{default:o(()=>[a(A,{value:l(e)[0].termType,"onUpdate:value":n[3]||(n[3]=u=>l(e)[0].termType=u),showArrow:!1,options:l(e).length!==2?l(j):J,placeholder:"符号",onChange:s},null,8,["value","options"])]),_:1}),l(c)==="range"?(p(),m(I,{key:0},[a(v,null,{default:o(()=>[b("点位值")]),_:1}),a(v,null,{default:o(()=>[a(A,{showArrow:!1,value:l(e)[1].termType,"onUpdate:value":n[4]||(n[4]=u=>l(e)[1].termType=u),options:l(j),placeholder:"符号",onChange:s},null,8,["value","options"])]),_:1}),a(v,null,{default:o(()=>[a(g,{value:l(e)[1].value,"onUpdate:value":n[5]||(n[5]=u=>l(e)[1].value=u),style:{width:"100%"},placeholder:"请输入值",min:l(e)[0].value,onChange:s},null,8,["value","min"])]),_:1})],64)):T("",!0),a(E,{onClick:F},{default:o(()=>[a(k,{type:"SwapOutlined"})]),_:1})]),_:1})])):(p(),m("div",_e,[me,a(g,{value:l(h),"onUpdate:value":n[6]||(n[6]=u=>V(h)?h.value=u:null),style:{width:"200px"},"addon-after":"%",placeholder:"请输入值",min:1,onChange:N,max:65535},null,8,["value"])]))]),_:1})])):T("",!0)],64)}}});const be=te(he,[["__scopeId","data-v-c9673bb2"]]);export{be as default};
