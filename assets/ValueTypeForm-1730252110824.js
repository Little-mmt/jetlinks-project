import{d as x,k,w as z,U as f,V as j,u as l,G as q,o as H,s as E,Z as $,f as a,X as n,ab as V,F as J,a1 as R,_ as v,E as U,$ as Z,af as B,ag as D,e as G,r as ee,Y as T,v as te,A as ae}from"./vue-1730252110824.js";import{a6 as Q,I as A,v as S,a0 as le,a1 as ne,g as I,z as L,d as N,a9 as se,df as ue,a7 as oe,$ as ie,e as re}from"./index-1730252110824.js";import{D as M,F as ce}from"./data-17302521108244.js";import{u as de}from"./metadata-1730252110824.js";const me=x({name:"InputSelect"}),pe=x({...me,props:{value:[String,Number],options:{type:Array},size:String},emits:["update:value","change"],setup(t,{emit:s}){const i=t,e=k();z(()=>i.value,p=>{e.value=p?[p]:void 0},{immediate:!0});const o=p=>{var y;const r=p;r.length>1?s("update:value",(y=r.slice(r.length-1))==null?void 0:y[0]):s("update:value",p==null?void 0:p[0])};return(p,r)=>{const y=Q;return f(),j(y,{value:l(e),"onUpdate:value":r[0]||(r[0]=_=>q(e)?e.value=_:null),mode:"tags",options:t.options,size:t.size,onChange:o,placeholder:"请选择单位"},null,8,["value","options","size"])}}}),ve={class:"boolean-param ant-form-horizontal"},_e=x({name:"BooleanParam"}),fe=x({..._e,props:{value:{type:Object,default:()=>({})},name:{type:Array,required:!0}},emits:["update:value"],setup(t,{emit:s}){const i=t;return H(()=>{s("update:value",{trueText:"是",trueValue:"true",falseText:"否",falseValue:"false",...i.value})}),E(()=>{typeof i.value.trueValue=="boolean"&&(i.value.trueValue=String(i.value.trueValue)),typeof i.value.falseValue=="boolean"&&(i.value.falseValue=String(i.value.falseValue))}),(e,o)=>{const p=A,r=S,y=le,_=ne;return f(),$("div",ve,[a(_,{gutter:4},{default:n(()=>[a(y,{span:12},{default:n(()=>[a(r,{label:" ",name:t.name.concat(["trueText"]),rules:[{required:!0,message:"请输入trueText"},{max:64,message:"最多可输入64个字符"}]},{default:n(()=>[a(p,{value:t.value.trueText,"onUpdate:value":o[0]||(o[0]=u=>t.value.trueText=u),placeholder:"trueText",size:"small"},null,8,["value"])]),_:1},8,["name"])]),_:1}),a(y,{span:12},{default:n(()=>[a(r,{label:"-",name:t.name.concat(["trueValue"]),rules:[{required:!0,message:"请输入trueValue"},{max:64,message:"最多可输入64个字符"}]},{default:n(()=>[a(p,{value:t.value.trueValue,"onUpdate:value":o[1]||(o[1]=u=>t.value.trueValue=u),placeholder:"trueValue",size:"small"},null,8,["value"])]),_:1},8,["name"])]),_:1}),a(y,{span:12},{default:n(()=>[a(r,{label:" ",name:t.name.concat(["falseText"]),rules:[{required:!0,message:"请输入falseText"},{max:64,message:"最多可输入64个字符"}]},{default:n(()=>[a(p,{value:t.value.falseText,"onUpdate:value":o[2]||(o[2]=u=>t.value.falseText=u),placeholder:"falseText",size:"small"},null,8,["value"])]),_:1},8,["name"])]),_:1}),a(y,{span:12},{default:n(()=>[a(r,{label:"-",name:t.name.concat(["falseValue"]),rules:[{required:!0,message:"请输入falseValue"},{max:64,message:"最多可输入64个字符"}]},{default:n(()=>[a(p,{value:t.value.falseValue,"onUpdate:value":o[3]||(o[3]=u=>t.value.falseValue=u),placeholder:"falseValue",size:"small"},null,8,["value"])]),_:1},8,["name"])]),_:1})]),_:1})])}}});const ye=I(fe,[["__scopeId","data-v-070039e3"]]),be=t=>(B("data-v-794556f9"),t=t(),D(),t),ge={class:"enum-param"},je={class:"item-left"},xe={class:"item-middle item-editable"},he={class:"edit-title",style:{display:"flex","justify-content":"space-between","align-items":"center"}},Te=be(()=>v("div",{style:{width:"150px"}},"枚举项配置",-1)),$e={class:"ant-form-vertical"},we=["onClick"],ke={class:"item-right"},Ve=x({name:"BooleanParam"}),Ue=x({...Ve,props:{value:{type:Object},name:{type:Array,default:()=>[]}},emits:["update:value"],setup(t,{emit:s}){const i=t,e=k([]);E(()=>{e.value=i.value||[{}]}),z(e,()=>{s("update:value",e.value)},{deep:!0,immediate:!0});const o=k(-1),p=u=>{o.value=u},r=u=>{o.value=-1,e.value.splice(u,1)},y=()=>{o.value=-1},_=()=>{e.value.push({}),s("update:value",e.value)};return(u,h)=>{const m=V("AIcon"),b=A,w=S,O=V("Ellipsis"),C=L,P=N;return f(),$("div",ge,[(f(!0),$(J,null,R(l(e),(d,c)=>(f(),$("div",{class:"list-item",key:c},[v("div",je,[a(m,{type:"MenuOutlined",class:"item-drag item-icon"})]),v("div",xe,[a(C,{visible:l(o)===c,placement:"left"},{title:n(()=>[v("div",he,[Te,v("div",{onClick:y},[a(m,{type:"CloseOutlined"})])])]),content:n(()=>[v("div",$e,[a(w,{label:"Value",name:t.name.concat([c,"value"]),rules:[{required:!0,message:"请输入Value"},{max:64,message:"最多可输入64个字符"}]},{default:n(()=>[a(b,{value:l(e)[c].value,"onUpdate:value":g=>l(e)[c].value=g,size:"small",placeholder:"请输入Value"},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]),a(w,{label:"Text",name:t.name.concat([c,"text"]),rules:[{required:!0,message:"请输入Text"},{max:64,message:"最多可输入64个字符"}]},{default:n(()=>[a(b,{value:l(e)[c].text,"onUpdate:value":g=>l(e)[c].text=g,size:"small",placeholder:"请输入Text"},null,8,["value","onUpdate:value"])]),_:2},1032,["name"])])]),default:n(()=>[v("div",{class:"item-edit",onClick:g=>p(c)},[a(O,null,{default:n(()=>[U(Z(d.text||"枚举项配置"),1)]),_:2},1024),a(m,{type:"EditOutlined",class:"item-icon"})],8,we)]),_:2},1032,["visible"])]),v("div",ke,[a(m,{type:"DeleteOutlined",onClick:g=>r(c)},null,8,["onClick"])])]))),128)),a(P,{type:"dashed",block:"",onClick:_},{icon:n(()=>[a(m,{type:"PlusOutlined",class:"item-icon"})]),default:n(()=>[U(" 新增枚举型 ")]),_:1})])}}});const Oe=I(Ue,[["__scopeId","data-v-794556f9"]]),Ce=t=>(B("data-v-f16043de"),t=t(),D(),t),Pe={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Se=Ce(()=>v("div",{style:{width:"150px"}},"配置元素",-1)),Ie={style:{"max-width":"400px"}},ze={class:"ant-form-vertical"},Ee=x({name:"ArrayParam"}),Ae=x({...Ee,props:{value:{type:Object,default:()=>({expands:{}})},name:{type:Array,required:!0}},emits:["update:value"],setup(t,{emit:s}){const i=t,e=G({get:()=>i.value,set:p=>{s("update:value",p)}}),o=k(!1);return H(()=>{s("update:value",{expands:{},...i.value})}),(p,r)=>{const y=V("AIcon"),_=se,u=S,h=L,m=N;return f(),j(m,{type:"dashed",block:"",onClick:r[3]||(r[3]=b=>o.value=!0)},{default:n(()=>[a(h,{visible:l(o),placement:"left"},{title:n(()=>[v("div",Pe,[Se,v("div",{onClick:r[0]||(r[0]=b=>o.value=!1)},[a(y,{type:"CloseOutlined"})])])]),content:n(()=>[v("div",Ie,[v("div",ze,[a(F,{value:l(e),"onUpdate:value":r[1]||(r[1]=b=>q(e)?e.value=b:null),name:t.name,isSub:"",key:"sub"},null,8,["value","name"]),a(u,{label:"说明",name:t.name.concat(["description"]),rules:[{max:200,message:"最多可输入200个字符"}]},{default:n(()=>[a(_,{value:l(e).description,"onUpdate:value":r[2]||(r[2]=b=>l(e).description=b),size:"small",placeholder:"请输入说明"},null,8,["value"])]),_:1},8,["name"])])])]),default:n(()=>[U(" 配置元素 "),a(y,{type:"EditOutlined",class:"item-icon"})]),_:1},8,["visible"])]),_:1})}}});const qe=I(Ae,[["__scopeId","data-v-f16043de"]]),Je=t=>(B("data-v-e5012c58"),t=t(),D(),t),Be={class:"json-param"},De={class:"item-left"},Le={class:"item-middle item-editable"},Ne={class:"edit-title",style:{display:"flex","justify-content":"space-between","align-items":"center"}},Fe=Je(()=>v("div",{style:{width:"150px"}},"配置参数",-1)),Me={style:{"max-width":"400px"},class:"ant-form-vertical"},He=["onClick"],Re=["onClick"],Ze=x({name:"JsonParam"}),Ge=x({...Ze,props:{value:{type:Object},name:{type:Array,default:()=>[]},isSub:{type:Boolean,default:!0}},emits:["update:value"],setup(t,{emit:s}){const i=t,e=k([]);E(()=>{e.value=i.value||[{valueType:{expands:{}}}]}),z(e,()=>{s("update:value",e.value)},{deep:!0,immediate:!0});const o=k(-1),p=u=>{o.value=u},r=u=>{o.value=-1,e.value.splice(u,1)},y=()=>{o.value=-1},_=()=>{e.value.push({valueType:{expands:{}}}),s("update:value",e.value)};return(u,h)=>{const m=V("AIcon"),b=A,w=S,O=V("Ellipsis"),C=L,P=N;return f(),$("div",Be,[(f(!0),$(J,null,R(l(e),(d,c)=>(f(),$("div",{class:"list-item",key:`object_${c}`},[v("div",De,[a(m,{type:"MenuOutlined",class:"item-drag item-icon"})]),v("div",Le,[a(C,{visible:l(o)===c,placement:"left"},{title:n(()=>[v("div",Ne,[Fe,v("div",{onClick:y},[a(m,{type:"CloseOutlined"})])])]),content:n(()=>[v("div",Me,[a(w,{label:"标识",name:t.name.concat([c,"id"]),rules:[{required:!0,message:"请输入标识"},{max:64,message:"最多可输入64个字符"},{pattern:/^[a-zA-Z0-9_\-]+$/,message:"标识只能由数字、字母、下划线、中划线组成"}]},{default:n(()=>[a(b,{value:l(e)[c].id,"onUpdate:value":g=>l(e)[c].id=g,size:"small",placeholder:"请输入标识"},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]),a(w,{label:"名称",name:t.name.concat([c,"name"]),rules:[{required:!0,message:"请输入名称"},{max:64,message:"最多可输入64个字符"}]},{default:n(()=>[a(b,{value:l(e)[c].name,"onUpdate:value":g=>l(e)[c].name=g,size:"small",placeholder:"请输入名称"},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]),a(F,{value:l(e)[c].valueType,"onUpdate:value":g=>l(e)[c].valueType=g,name:t.name.concat([c,"valueType"]),isSub:t.isSub,key:"json_sub"},null,8,["value","onUpdate:value","name","isSub"])])]),default:n(()=>[v("div",{class:"item-edit",onClick:g=>p(c)},[a(O,null,{default:n(()=>[U(Z(d.name||"配置参数"),1)]),_:2},1024),a(m,{type:"EditOutlined",class:"item-icon"})],8,He)]),_:2},1032,["visible"])]),v("div",{class:"item-right",onClick:g=>r(c)},[a(m,{type:"DeleteOutlined"})],8,Re)]))),128)),a(P,{type:"dashed",block:"",onClick:_},{icon:n(()=>[a(m,{type:"PlusOutlined",class:"item-icon"})]),default:n(()=>[U(" 添加参数 ")]),_:1})])}}});const Qe=I(Ge,[["__scopeId","data-v-e5012c58"]]),X=async(t,s)=>s.length===0?Promise.reject(new Error("请配置枚举项")):s.every(e=>e.value&&e.text)?Promise.resolve():Promise.reject(new Error("请配置枚举项")),Y=async(t,s)=>s?(await W(t,s),Promise.resolve()):Promise.reject(new Error("请输入元素配置")),K=async(t,s,i="配置参数",e=!0)=>{if(e&&(!s||s.length===0))return Promise.reject(new Error(`请输入${i}`));for(let o of s){if(!o)return Promise.reject(new Error(`请输入${i}`));await Xe(t,o),await W(t,o.valueType)}return Promise.resolve()},Xe=async(t,s)=>{if(!s.id)return Promise.reject(new Error("请输入标识"));if(!s.name)return Promise.reject(new Error("请输入名称"))},W=async(t,s,i="数据类型")=>s?s!=null&&s.type?(["enum"].includes(s.type)&&await X(t,s.elements),["array"].includes(s.type)&&await Y(t,s.elementType),["object"].includes(s.type)&&await K(t,s.properties),["file"].includes(s.type)&&!s.bodyType?Promise.reject(new Error("请选择文件类型")):Promise.resolve()):Promise.reject(new Error(`请选择${i}`)):Promise.reject(new Error("请输入元素配置")),Ye=x({__name:"ValueTypeForm",props:{value:{type:Object},isSub:{type:Boolean,default:!1},name:{type:Array,default:()=>[],required:!0},title:{type:String,default:"数据类型"},required:{type:Boolean,default:!0},onlyObject:{type:Boolean,default:!1}},emits:["update:value","changeType"],setup(t,{emit:s}){const i=t;de();const e=k({});E(()=>{e.value=i.value||{expands:{}},i.onlyObject&&(e.value.type="object")}),z(e,()=>{s("update:value",e.value)},{deep:!0,immediate:!0});const o=ee({unitOptions:[],getUnit:()=>{ue().then(_=>{const u=_.result.map(h=>({label:h.description,value:h.id}));o.unitOptions=u})}});o.getUnit();const p=G(()=>i.isSub?M.filter(_=>_.value!=="array"&&_.value!=="object"):M),r=[{value:"object",label:"object(结构体)"}],y=_=>{["float","double"].includes(e.value.type)&&e.value.scale===void 0&&(e.value.scale=2),["file"].includes(_)&&(e.value.bodyType=e.value.bodyType||"url"),["date"].includes(_)&&(e.value.format=e.value.format||"yyyy-MM-dd HH:mm:ss"),s("changeType",_)};return(_,u)=>{const h=Q,m=S,b=oe,w=A,O=V("AIcon"),C=ie,P=re;return f(),$(J,null,[a(m,{label:t.title,name:t.name.concat(["type"]),rules:[t.required?{required:!0,message:`请选择${t.title}`}:{}]},{default:n(()=>[a(h,{value:l(e).type,"onUpdate:value":u[0]||(u[0]=d=>l(e).type=d),disabled:t.onlyObject,options:t.onlyObject?r:l(p),size:"small",onChange:y,placeholder:`请选择${t.title}`},null,8,["value","disabled","options","placeholder"])]),_:1},8,["label","name","rules"]),["int","float","long","double"].includes(l(e).type)?(f(),j(m,{key:0,label:"单位",name:t.name.concat(["unit"])},{default:n(()=>[a(pe,{value:l(e).unit,"onUpdate:value":u[1]||(u[1]=d=>l(e).unit=d),options:l(o).unitOptions,size:"small"},null,8,["value","options"])]),_:1},8,["name"])):T("",!0),["float","double"].includes(l(e).type)?(f(),j(m,{key:1,label:"精度",name:t.name.concat(["scale"])},{default:n(()=>[a(b,{value:l(e).scale,"onUpdate:value":u[2]||(u[2]=d=>l(e).scale=d),size:"small",min:0,max:2147483647,precision:0,style:{width:"100%"},placeholder:"请输入精度"},null,8,["value"])]),_:1},8,["name"])):T("",!0),["date"].includes(l(e).type)?te((f(),j(m,{key:2,label:"时间格式",name:t.name.concat(["format"])},{default:n(()=>[a(w,{value:l(e).format,"onUpdate:value":u[3]||(u[3]=d=>l(e).format=d),size:"small"},null,8,["value"])]),_:1},8,["name"])),[[ae,!1]]):T("",!0),["boolean"].includes(l(e).type)?(f(),j(m,{key:3,label:"布尔值",name:"booleanConfig"},{default:n(()=>[a(ye,{name:t.name,value:l(e),"onUpdate:value":u[4]||(u[4]=d=>q(e)?e.value=d:null)},null,8,["name","value"])]),_:1})):T("",!0),["enum"].includes(l(e).type)?(f(),j(m,{key:4,label:"枚举项",name:t.name.concat(["elements"]),rules:[{required:!0,validator:l(X)}]},{default:n(()=>[a(Oe,{value:l(e).elements,"onUpdate:value":u[5]||(u[5]=d=>l(e).elements=d),name:t.name.concat(["elements"])},null,8,["value","name"])]),_:1},8,["name","rules"])):T("",!0),["string","password"].includes(l(e).type)?(f(),j(m,{key:5,name:t.name.concat(["expands","maxLength"])},{label:n(()=>[a(P,null,{default:n(()=>[U(" 最大长度 "),a(C,{title:"字节"},{default:n(()=>[a(O,{type:"QuestionCircleOutlined",style:{color:"rgb(136, 136, 136)","font-size":"12px"}})]),_:1})]),_:1})]),default:n(()=>[a(b,{value:l(e).expands.maxLength,"onUpdate:value":u[6]||(u[6]=d=>l(e).expands.maxLength=d),size:"small",max:2147483647,min:1,precision:0,style:{width:"100%"},placeholder:"请输入最大长度"},null,8,["value"])]),_:1},8,["name"])):T("",!0),["array"].includes(l(e).type)?(f(),j(m,{key:6,label:"元素配置",name:t.name.concat(["elementType"]),rules:[{validator:l(Y)}]},{default:n(()=>[a(qe,{value:l(e).elementType,"onUpdate:value":u[7]||(u[7]=d=>l(e).elementType=d),name:t.name.concat(["elementType"])},null,8,["value","name"])]),_:1},8,["name","rules"])):T("",!0),["object"].includes(l(e).type)?(f(),j(m,{key:7,label:"JSON对象",name:t.name.concat(["properties"]),rules:[{validator:(d,c)=>l(K)(d,c,"JSON对象")}]},{default:n(()=>[a(Qe,{value:l(e).properties,"onUpdate:value":u[8]||(u[8]=d=>l(e).properties=d),name:t.name.concat(["properties"])},null,8,["value","name"])]),_:1},8,["name","rules"])):T("",!0),["file"].includes(l(e).type)?(f(),j(m,{key:8,label:"文件类型",name:t.name.concat(["bodyType"]),initialValue:"url",rules:[{required:!0,message:"请选择文件类型"}]},{default:n(()=>[a(h,{value:l(e).bodyType,"onUpdate:value":u[9]||(u[9]=d=>l(e).bodyType=d),options:l(ce),size:"small",placeholder:"请选择文件类型"},null,8,["value","options"])]),_:1},8,["name"])):T("",!0)],64)}}});const F=I(Ye,[["__scopeId","data-v-07216d86"]]),at=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{Qe as J,F as V,at as a,K as v};
