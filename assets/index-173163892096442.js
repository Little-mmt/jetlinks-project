import{ap as C,T as h,L as U,aq as w,o as p,ar as B,as as O,g as L}from"./index-1731638920964.js";import{d as V,k as _,w as A,ab as E,U as r,Z as m,_ as g,a0 as M,f as k,X as N,u as s,V as S,W as T,Y as f,F as j,af as F,ag as P}from"./vue-1731638920964.js";const $=l=>(F("data-v-945c2499"),l=l(),P(),l),K={class:"upload-image-warp"},Y={class:"upload-image-content"},q=["src"],D=$(()=>g("div",{class:"upload-image-mask"},"更换",-1)),J={key:0,class:"upload-loading-mask"},W={key:1,class:"upload-loading-mask"},X=V({name:"JProUpload"}),Z=V({...X,props:{modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1},accept:{type:String,default:void 0},borderStyle:{type:Object,default:void 0}},emits:["update:modelValue","change"],setup(l,{emit:c}){const a=l,i=_(!1),n=_((a==null?void 0:a.modelValue)||""),b=a.types?a.types:["image/jpeg","image/png"],v=_(),u=_(!1);A(()=>a.modelValue,e=>{n.value=e},{deep:!0,immediate:!0});const x=e=>{var o,t,d;e.file.status==="uploading"&&(i.value=!0),e.file.status==="done"&&(n.value=(o=e.file.response)==null?void 0:o.result,i.value=!1,c("update:modelValue",(t=e.file.response)==null?void 0:t.result),c("change",(d=e.file.response)==null?void 0:d.result)),e.file.status==="error"&&(i.value=!1,p("上传失败","error"))},I=e=>{const o=b.includes(e.type),t=a.size||2;return o?e.size/1024/1024<t?(B(e,y=>{v.value=y,u.value=!0}),!1):(p(`图片大小必须小于${t}M`,"error"),!1):(a.errorMessage?p(a.errorMessage,"error"):p("请上传正确格式的图片","error"),!1)},z=e=>{u.value=!1,n.value=e,c("update:modelValue",e),c("change",e)};return(e,o)=>{const t=E("AIcon"),d=O;return r(),m(j,null,[g("div",K,[g("div",{class:"upload-image-border",style:M(l.borderStyle)},[k(d,T({name:"file","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,"before-upload":I,onChange:x,action:s(C),headers:{[s(h)]:s(U).get(s(h))}},a),{default:N(()=>[g("div",Y,[s(n)?(r(),m("img",{key:0,src:s(n),height:"100%",class:"upload-image"},null,8,q)):(r(),S(t,{key:1,type:"UserOutlined",style:{"font-size":"20px"}})),D])]),_:1},16,["action","headers"]),a.disabled?(r(),m("div",J)):f("",!0),s(n)&&s(i)?(r(),m("div",W,[k(t,{type:"LoadingOutlined",style:{"font-size":"20px"}})])):f("",!0)],4)]),s(u)?(r(),S(w,{key:0,img:s(v),onCancel:o[0]||(o[0]=y=>u.value=!1),onOk:z,title:"更换头像"},null,8,["img"])):f("",!0)],64)}}});const Q=L(Z,[["__scopeId","data-v-945c2499"]]);export{Q as default};
