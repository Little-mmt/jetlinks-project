import{d as Z,k as X,r as Y,w as z,ab as G,U as i,V as _,X as r,u as d,Z as T,$ as S,F,_ as U,f as p,Y as v,v as j,A as D,E as y,af as H,ag as K}from"./vue-1731638920964.js";import{I as Q,v as W,$ as I,a6 as x,C as ee,a7 as te,Z as ae,aT as oe,af as le,F as ne,g as ce}from"./index-1731638920964.js";import"./index-1731638920964282.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import{F as se,r as re}from"./data-17316389209642.js";import"./validate-1731638920964.js";import"./regular-1731638920964.js";const ue=g=>(H("data-v-5320d05e"),g=g(),K(),g),ie={key:0},pe=ue(()=>U("span",{style:{"margin-left":"5px",color:"red"}},"*",-1)),me={style:{margin:"-24px 0 0 10px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},_e={style:{color:"red"}},fe=Z({__name:"Table",props:{data:{type:Array,default:()=>[]}},emits:["change"],setup(g,{expose:N,emit:V}){const q=g,$=X(),A=["accessModes","interval","features"],f=Y({dataSource:[]}),E=(n,a)=>new Promise(async(l,s)=>{if(a)return String(a).length>64?s("最多可输入64个字符"):l("");l("")}),B=(n,a)=>a.label.toLowerCase().indexOf(n.toLowerCase())>=0,L=n=>{V("change",n)},k=(n,a)=>{const{dataSource:l}=f;return a==="interval"?l[n].configuration[a]:l[n][a]},C=(n,a)=>{const{dataSource:l}=f,s=k(n,a);for(let m=n+1;m<l.length;m++){const h=k(m,a);if(!h.check)return;h.value=s.value}},w=async(n,a)=>{setTimeout(()=>{let l=0;const{dataSource:s}=f;if(!k(n,a).check)return;for(let u=n;u>=0;u--)if(!k(u,a).check){l=u;break}const h=k(l,a);for(let u=l;u<s.length-1;u++){const b=k(u+1,a);if(!b.check)return;b.value=h.value}},0)};return N({validate:()=>new Promise((n,a)=>{$.value.validate().then(()=>{n(f.dataSource)}).catch(l=>{a(l)})})}),z(()=>q.data,(n,a)=>{f.dataSource=n;const l=n.length,s=a.length;s!==0&&s<l&&A.forEach(m=>{l===2?C(0,m):w(l-1,m)})},{deep:!0}),(n,a)=>{const l=Q,s=W,m=I,h=x,u=ee,b=te,O=G("AIcon"),P=ae,J=oe,M=le,R=ne;return i(),_(R,{class:"table",ref_key:"formTableRef",ref:$,model:d(f)},{default:r(()=>[d(f).dataSource.length!==0?(i(),_(J,{key:0,dataSource:d(f).dataSource,columns:d(se),scroll:{y:580},pagination:!1},{headerCell:r(({column:e})=>[e.key==="nodeId"||e.key==="action"?(i(),T("span",ie,S(e.title),1)):(i(),T(F,{key:1},[U("span",null,S(e.title),1),pe],64))]),bodyCell:r(({column:{dataIndex:e},record:t,index:c})=>[e==="name"?(i(),_(s,{key:0,name:["dataSource",c,"name"],rules:[{required:!0,message:"请输入"},{validator:E,trigger:"change"}]},{default:r(()=>[p(l,{value:t[e],"onUpdate:value":o=>t[e]=o,placeholder:"请输入",allowClear:""},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])):v("",!0),e==="id"?(i(),T(F,{key:1},[j(p(s,{name:["dataSource",c,"id"]},{default:r(()=>[p(l,{value:t[e],"onUpdate:value":o=>t[e]=o,disabled:"",bordered:!1},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]),[[D,!1]]),U("div",me,[p(m,null,{title:r(()=>[y(S(t[e]),1)]),default:r(()=>[y(" "+S(t[e]),1)]),_:2},1024)])],64)):v("",!0),e==="accessModes"?(i(),_(s,{key:2,class:"form-item",name:["dataSource",c,"accessModes","value"],rules:[{required:!0,message:"请选择"}]},{default:r(()=>[p(h,{style:{width:"75%"},value:t[e].value,"onUpdate:value":o=>t[e].value=o,placeholder:"请选择",allowClear:"",mode:"multiple","filter-option":B,options:[{label:"读",value:"read"},{label:"写",value:"write"},{label:"订阅",value:"subscribe"}],disabled:c!==0&&t[e].check,onChange:o=>C(c,e)},null,8,["value","onUpdate:value","disabled","onChange"]),c!==0?(i(),_(u,{key:0,style:{"margin-left":"5px"},checked:t[e].check,"onUpdate:checked":o=>t[e].check=o,onClick:o=>w(c,e)},{default:r(()=>[y("同上")]),_:2},1032,["checked","onUpdate:checked","onClick"])):v("",!0)]),_:2},1032,["name"])):v("",!0),e==="interval"?(i(),_(s,{key:3,class:"form-item",name:["dataSource",c,"configuration","interval","value"],rules:[{required:!0,message:"请输入"},{pattern:d(re),message:"请输入0或者正整数"}]},{default:r(()=>[p(b,{style:{width:"60%"},value:t.configuration[e].value,"onUpdate:value":o=>t.configuration[e].value=o,placeholder:"请输入",allowClear:"","addon-after":"ms",max:2147483647,min:0,disabled:c!==0&&t.configuration[e].check,onBlur:o=>C(c,e)},null,8,["value","onUpdate:value","disabled","onBlur"]),j(p(u,{style:{"margin-left":"5px","margin-top":"5px"},checked:t.configuration[e].check,"onUpdate:checked":o=>t.configuration[e].check=o,onClick:o=>w(c,e)},{default:r(()=>[y("同上")]),_:2},1032,["checked","onUpdate:checked","onClick"]),[[D,c!==0]])]),_:2},1032,["name","rules"])):v("",!0),e==="features"?(i(),_(s,{key:4,class:"form-item",name:["dataSource",c,"features","value"],rules:[{required:!0,message:"请选择"}]},{default:r(()=>[p(h,{style:{width:"40%"},value:t[e].value,"onUpdate:value":o=>t[e].value=o,placeholder:"请选择",allowClear:"","filter-option":B,options:[{label:"是",value:!0},{label:"否",value:!1}],disabled:c!==0&&t[e].check,onChange:o=>C(c,e)},null,8,["value","onUpdate:value","disabled","onChange"]),j(p(u,{style:{"margin-left":"5px"},checked:t[e].check,"onUpdate:checked":o=>t[e].check=o,onClick:o=>w(c,e)},{default:r(()=>[y("同上")]),_:2},1032,["checked","onUpdate:checked","onClick"]),[[D,c!==0]])]),_:2},1032,["name"])):v("",!0),e==="action"?(i(),_(P,{key:5,tooltip:{title:"删除"},popConfirm:{title:"确认删除？",onConfirm:()=>L(t.id)}},{default:r(()=>[U("a",_e,[p(O,{type:"DeleteOutlined"})])]),_:2},1032,["popConfirm"])):v("",!0)]),_:1},8,["dataSource","columns"])):(i(),_(M,{key:1,style:{"margin-top":"10%"}}))]),_:1},8,["model"])}}});const Ue=ce(fe,[["__scopeId","data-v-5320d05e"]]);export{Ue as default};
