import{d as q,ad as N,ac as P,k as f,ab as C,U as y,V as b,X as a,f as t,u as n,_ as i,E as h,Y as V,B as S,J as D,af as z,ag as K}from"./vue-1730252110824.js";import{h as Y,o as A,aJ as L,aK as T,v as X,I as $,a9 as G,d as H,F as O,a0 as Q,a1 as W,aI as Z,g as ee}from"./index-1730252110824.js";import"./index-1730252110824288.js";import"./index-1730252110824279.js";import{_ as j}from"./CertificateFile.vue_vue_type_script_setup_true_name_CertificateFile_lang-1730252110824.js";import{s as te,u as ae,q as oe}from"./certificate-1730252110824.js";const ne=_=>(z("data-v-02fb75f1"),_=_(),K(),_),le=["src"],se=ne(()=>i("div",{class:"doc"},[i("h1",null,"1. 概述"),i("div",null," 证书由受信任的数字证书颁发机构CA，在验证服务器身份后颁发，具有服务器身份验证和数据传输加密功能，保障设备与平台间的数据传输安全。配置后可被网络组件引用。 "),i("h1",null,"2. 配置说明"),i("h2",null,"1、证书文件"),i("div",null," 您可以使用文本编辑工具打开PEM格式的证书文件，复制其中的内容并粘贴到该文本框，或者单击该文本框下的上传，并选择存储在本地计算机的证书文件，将文件内容上传到文本框。 "),i("h2",null,"2、证书私钥"),i("div",null," 填写证书私钥内容的PEM编码。 您可以使用文本编辑工具打开KEY格式的证书私钥文件，复制其中的内容并粘贴到该文本框，或者单击该文本框下的上传并选择存储在本地计算机的证书私钥文件，将文件内容上传到文本框。 ")],-1)),ue=q({name:"CertificateDetail"}),re=q({...ue,setup(_){const I=N(),k=P(),M=k.query.view,g=k.params.id,w=f();f(!1);const c=f(!1),o=f({type:"common",name:"",configs:{cert:"",key:""},description:"",mode:"server",authenticationMethod:"single"}),U=()=>{w.value.validate().then(async d=>{let e=D(o.value);o.value.mode==="client"&&(o.value.authenticationMethod==="binomial"?e.configs.trust=e.configs.cert:e.configs={trust:o.value.configs.cert}),c.value=!0;const s=g===":id"?await te(e).catch(()=>{}):await ae({...e,id:g}).catch(()=>{});(s==null?void 0:s.status)===200&&(A("操作成功","success"),I.push("/iot/link/certificate")),c.value=!1}).catch(d=>{c.value=!1})};return(async d=>{var e,s,m,u;if(d!==":id"){c.value=!0;const p=await oe(d);if(p.success){const r=p.result,v=r.type.value;o.value={...r,configs:{key:r.configs.key,cert:(e=r.configs)!=null&&e.cert?(s=r.configs)==null?void 0:s.cert:(m=r.configs)==null?void 0:m.trust},mode:r.mode.value,authenticationMethod:(u=r.authenticationMethod)==null?void 0:u.value,type:v}}c.value=!1}})(g),(d,e)=>{const s=L,m=T,u=X,p=$,r=G,v=H,R=O,x=Q,B=W,J=Z,E=C("FullPage"),F=C("page-container");return y(),b(F,null,{default:a(()=>[t(E,null,{default:a(()=>[t(J,null,{default:a(()=>[t(B,{gutter:[24,24],style:{padding:"24px"}},{default:a(()=>[t(x,{span:12},{default:a(()=>[t(R,{class:"form",layout:"vertical",model:n(o),name:"basic","label-col":{span:8},"wrapper-col":{span:24},autocomplete:"off",ref_key:"formRef",ref:w},{default:a(()=>[t(u,{label:"证书标准",name:"type",rules:[{required:!0,message:"请选择证书标准",trigger:"blur"}]},{default:a(()=>[t(m,{value:n(o).type,"onUpdate:value":e[0]||(e[0]=l=>n(o).type=l)},{default:a(()=>[t(s,{class:"form-radio-button",value:"common"},{default:a(()=>[i("img",{src:n(Y)("/certificate.png")},null,8,le)]),_:1})]),_:1},8,["value"])]),_:1}),t(u,{label:"证书名称",name:"name",rules:[{required:!0,message:"请输入证书名称",trigger:"blur"},{max:64,message:"最多可输入64个字符"}]},{default:a(()=>[t(p,{placeholder:"请输入证书名称",value:n(o).name,"onUpdate:value":e[1]||(e[1]=l=>n(o).name=l)},null,8,["value"])]),_:1}),t(u,{label:"证书文件",name:["configs","cert"],rules:[{required:!0,message:"请输入或上传文件",trigger:"change"}]},{default:a(()=>[t(j,{name:"cert",modelValue:n(o).configs.cert,"onUpdate:modelValue":e[2]||(e[2]=l=>n(o).configs.cert=l),placeholder:"请输入证书文件"},null,8,["modelValue"])]),_:1}),t(u,{label:"证书类型",name:"mode",rules:[{required:!0,message:"请选择证书类型",trigger:"blur"}]},{default:a(()=>[t(m,{value:n(o).mode,"onUpdate:value":e[3]||(e[3]=l=>n(o).mode=l),"button-style":"solid"},{default:a(()=>[t(s,{value:"client",style:{"margin-right":"30px"},size:"large"},{default:a(()=>[h("客户端")]),_:1}),t(s,{value:"server",size:"large"},{default:a(()=>[h("服务端")]),_:1})]),_:1},8,["value"])]),_:1}),n(o).mode!=="client"?(y(),b(u,{key:0,label:"证书私钥",name:["configs","key"],rules:[{required:!0,message:"请输入或上传文件",trigger:"change"}]},{default:a(()=>[t(j,{name:"key",modelValue:n(o).configs.key,"onUpdate:modelValue":e[4]||(e[4]=l=>n(o).configs.key=l),placeholder:"请输入证书私钥"},null,8,["modelValue"])]),_:1})):V("",!0),t(u,{label:"说明",name:"description",rules:[{max:200,message:"最多可输入200个字符"}]},{default:a(()=>[t(r,{placeholder:"请输入说明",value:n(o).description,"onUpdate:value":e[5]||(e[5]=l=>n(o).description=l),maxlength:200,rows:3,showCount:""},null,8,["value"])]),_:1}),t(u,null,{default:a(()=>[n(M)==="false"?(y(),b(v,{key:0,class:"form-submit","html-type":"submit",type:"primary",onClick:S(U,["prevent"]),loading:n(c)},{default:a(()=>[h("保存")]),_:1},8,["onClick","loading"])):V("",!0)]),_:1})]),_:1},8,["model"])]),_:1}),t(x,{span:12},{default:a(()=>[se]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});const ge=ee(re,[["__scopeId","data-v-02fb75f1"]]);export{ge as default};
