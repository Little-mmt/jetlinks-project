import{d as S,ac as V,k as v,o as N,u as a,U as w,Z as F,f as e,X as n,_ as s,V as M,E as U,Y as b,$ as d,af as q,ag as A}from"./vue-1730252110824.js";import{o as E,aH as x,I as J,v as O,a9 as R,Z,F as $,a0 as D,a1 as H,g as X}from"./index-1730252110824.js";import{s as Y,u as z}from"./accessConfig-1730252110824.js";import{P as G}from"./data-17302521108246.js";const K=t=>(q("data-v-96d35378"),t=t(),A(),t),L={key:0,class:"card-last"},Q={class:"doc",style:{height:"600px"}},W=K(()=>s("p",null,"4、添加设备，单独为每一个设备进行数据点绑定",-1)),ee=S({name:"AccessChannel"}),te=S({...ee,props:{provider:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}}},setup(t){const l=t,g=V(),j=g.query.view,r=g.params.id,m=v(!1),k=v(l.provider.type||l.data.type),c=v({name:"",description:""}),C=async i=>{m.value=!0;const o=l.provider.id,p={...i,provider:o,protocol:o,transport:G.get(o),channel:o==="modbus-tcp"?"modbus":"opc-ua"},u=r===":id"?await Y(p):await z({...p,id:r});u.status===200&&(E("操作成功","success"),history.back(),window.onTabSaveSuccess&&(window.onTabSaveSuccess(u),setTimeout(()=>window.close(),300))),m.value=!1};return N(()=>{var i;r!==":id"&&(c.value={name:l.data.name,description:((i=l.data)==null?void 0:i.description)||""})}),(i,o)=>{const p=x,u=J,_=O,I=R,B=Z,P=$,y=D,h=x,T=H;return a(k)==="channel"?(w(),F("div",L,[e(T,{gutter:[24,24]},{default:n(()=>[e(y,{span:12},{default:n(()=>[e(p,{data:"基本信息"}),s("div",null,[e(P,{model:a(c),name:"basic",autocomplete:"off",layout:"vertical",onFinish:C},{default:n(()=>[e(_,{label:"名称",name:"name",rules:[{required:!0,message:"请输入名称",trigger:"blur"},{max:64,message:"最多可输入64个字符",trigger:"blur"}]},{default:n(()=>[e(u,{placeholder:"请输入名称",value:a(c).name,"onUpdate:value":o[0]||(o[0]=f=>a(c).name=f)},null,8,["value"])]),_:1}),e(_,{label:"说明",name:"description"},{default:n(()=>[e(I,{placeholder:"请输入说明",rows:4,value:a(c).description,"onUpdate:value":o[1]||(o[1]=f=>a(c).description=f),"show-count":"",maxlength:200},null,8,["value"])]),_:1}),e(_,null,{default:n(()=>[a(j)==="false"?(w(),M(B,{key:0,type:"primary","html-type":"submit",hasPermission:`link/AccessConfig:${a(r)===":id"?"add":"update"}`,loading:a(m)},{default:n(()=>[U(" 保存 ")]),_:1},8,["hasPermission","loading"])):b("",!0)]),_:1})]),_:1},8,["model"])])]),_:1}),e(y,{span:12},{default:n(()=>[s("div",Q,[e(h,{data:"配置概览"}),s("p",null,"接入方式："+d(t.provider.name),1),s("p",null,d(t.provider.description),1),e(h,{data:"设备接入指引"}),s("p",null,"1、配置"+d(t.provider.name)+"通道",1),s("p",null,"2、创建"+d(t.provider.name)+"设备接入网关",1),s("p",null,"3、创建产品，并选中接入方式为"+d(t.provider.name),1),W])]),_:1})]),_:1})])):b("",!0)}}});const ce=X(te,[["__scopeId","data-v-96d35378"]]);export{ce as default};
