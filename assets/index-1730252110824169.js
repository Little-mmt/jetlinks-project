import{o as b,dd as O,d9 as P,Z as U,cY as T,c$ as Y,d3 as Z,g as j}from"./index-1730252110824.js";import{d as D}from"./device-17302521108243.js";import{d as C,k as p,o as R,ab as X,U as r,V as _,X as o,f as c,E as h,_ as g,Z as q,$ as x,u as z,Y as F,af as G,ag as H}from"./vue-1730252110824.js";const J=s=>(G("data-v-e73d169f"),s=s(),H(),s),K={class:"top"},L=J(()=>g("span",null,"有效期：",-1)),Q={key:1},W=C({name:"Address"}),ee=C({...W,props:{data:{type:Object,default:()=>({})}},emits:["close"],setup(s,{emit:v}){const m=s,I=["flv","hls","mp4","rtmp","rtsp","rtc"],d=new Map;d.set("seconds","秒"),d.set("minutes","分"),d.set("hours","小时");const l=p("hours"),a=p(1),f=p([]),u=p(!1),S=[{title:"类型",dataIndex:"type",key:"type",ellipsis:!0,width:70},{title:"链接",dataIndex:"url",key:"url",ellipsis:!0},{title:"操作",key:"actions",width:100}],y=async n=>{const e=await D.getShare(m.data.deviceId,m.data.channelId,n||{expires:3600});e.success&&(f.value=I.map(i=>({id:i,type:i,url:e.result[i]})))},w=n=>{if(console.log("navigator.clipboard====",navigator.clipboard),navigator.clipboard)navigator.clipboard.writeText(n.url),b("复制成功！");else{const e=document.createElement("input");e.value=n.url,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),b("复制成功！")}},B=()=>{u.value=!u.value,u.value||y({expires:l.value==="hours"?a.value*3600:l.value==="minutes"?a.value*60:a.value})};return R(()=>{y()}),(n,e)=>{const i=O,V=P,A=X("AIcon"),E=U,k=T,M=Y,$=Z;return r(),_($,{title:"视频分享",visible:"",onCancel:e[3]||(e[3]=t=>v("close")),maskClosable:!1,width:"900px"},{footer:o(()=>[c(k,{type:"primary",onClick:e[2]||(e[2]=t=>v("close"))},{default:o(()=>[h("确定")]),_:1})]),default:o(()=>[g("div",K,[L,u.value?(r(),_(V,{key:0,style:{width:"200px"},precision:0,min:1,value:a.value,"onUpdate:value":e[1]||(e[1]=t=>a.value=t)},{addonAfter:o(()=>[c(i,{value:l.value,"onUpdate:value":e[0]||(e[0]=t=>l.value=t),options:[{label:"秒",value:"seconds"},{label:"分",value:"minutes"},{label:"小时",value:"hours"}]},null,8,["value"])]),_:1},8,["value"])):(r(),q("div",Q,x(a.value)+x(z(d).get(l.value)),1)),c(E,{type:"link",hasPermission:!0,onClick:B},{default:o(()=>[c(A,{type:u.value?"CheckOutlined":"EditOutlined"},null,8,["type"])]),_:1})]),c(M,{columns:S,dataSource:f.value,pagination:!1},{bodyCell:o(({column:t,record:N})=>[t.key==="actions"?(r(),_(k,{key:0,type:"link",onClick:te=>w(N)},{default:o(()=>[h("复制链接")]),_:2},1032,["onClick"])):F("",!0)]),_:1},8,["dataSource"])]),_:1})}}});const se=j(ee,[["__scopeId","data-v-e73d169f"]]);export{se as default};
