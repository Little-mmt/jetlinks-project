import{d as D,k as b,q as F,s as P,ab as V,U as l,V as y,X as m,_ as h,f,u as p,G as k,Z as _,F as C,a1 as R,E as O,$ as w,Y as S,B as q,R as G}from"./vue-1731638920964.js";import{g5 as W,dw as X,af as Y,e as Z,dg as z,_ as H,f as Q,aN as ee,g as ae}from"./index-1731638920964.js";import"./index-1731638920964281.js";import{d as te}from"./typings-1731638920964.js";import"./DropdownButton.vue_vue_type_style_index_0_scoped_011bae6b_lang-1731638920964.js";import oe from"./Menus-1731638920964.js";import{_ as se}from"./Time.vue_vue_type_style_index_0_lang-1731638920964.js";import{g as le}from"./util-17316389209643.js";import"./isUndefined-1731638920964.js";const ne={class:"dropdown-button value"},ue={class:"scene-select-content"},pe={class:"select-box-content"},ce={key:1,class:"scene-select-empty"},ie={key:0,style:{"min-width":"400px"}},re={key:0,class:"tree-title-description"},de={key:1,class:"scene-select-empty"},ve=D({name:"ParamsDropdown"}),me=D({...ve,props:{...te},emits:["update:value","update:source","select","tabChange"],setup(j,{emit:n}){const a=j,u=b(a.value),r=b(a.source),o=b(a.placeholder),g=b([]),i=b(!1);F(()=>{r.value=a.source,u.value=a.source==="metric"?a.metric:a.value});const B=e=>{r.value=e,u.value=void 0,n("update:source",r.value),n("update:value",void 0),n("tabChange",e),n("select",{},"",{0:void 0})},E=(e,t)=>{const c=t.node;i.value=!1,o.value=c[a.labelName]||c.name||c.fullName,n("update:value",c[a.valueName]),n("select",c,o.value,{0:o.value})},T=e=>{o.value=e,n("update:value",e),n("select",e,o.value,{0:o.value})},U=(e,t)=>{i.value=!1,o.value=t[a.labelName],n("update:value",e),n("select",e,o.value,{0:o.value},t)},$=e=>{o.value=e,i.value=!1,n("update:value",e),n("select",e,o.value,{0:o.value})},I=e=>{i.value=e};return P(()=>{const e=["metric","upper"].includes(a.source)?a.metricOptions:a.options,t=a.source==="metric",c=t?a.metric:a.value,N=t?"id":a.valueName,d=le(e,c,N);u.value=t?a.metric:a.value,r.value=a.source,d?(o.value=d[a.labelName]||d.name||d.fullName,g.value=W(e,a.value,a.valueName)):t?o.value=a.metric!==void 0&&a.value||a.placeholder:o.value=a.value!==void 0?a.value:a.placeholder}),(e,t)=>{const c=V("AIcon"),N=V("Ellipsis"),d=Y,x=Z,J=z,L=H,M=Q,A=ee;return l(),y(A,{class:"scene-select-value",trigger:"click",visible:p(i),"onUpdate:visible":t[5]||(t[5]=s=>k(i)?i.value=s:null),overlayStyle:{maxWidth:"300px"},onVisibleChange:I},{overlay:m(()=>[h("div",ue,[f(M,{onChange:B,activeKey:p(r),"onUpdate:activeKey":t[4]||(t[4]=s=>k(r)?r.value=s:null)},{default:m(()=>[(l(!0),_(C,null,R(e.tabsOptions,s=>(l(),y(L,{tab:s.label,key:s.key},{default:m(()=>[h("div",pe,[["time","date"].includes(s.component)?(l(),y(p(se),{key:0,type:"time",value:p(u),"onUpdate:value":t[1]||(t[1]=v=>k(u)?u.value=v:null),onChange:$},null,8,["value"])):["select","enum","boolean"].includes(s.component)?(l(),_(C,{key:1},[(["metric","upper"].includes(s.key)?e.metricOptions:e.options).length?(l(),y(p(oe),{key:0,options:["metric","upper"].includes(s.key)?e.metricOptions:e.options,value:p(u),valueName:a.source==="metric"?"id":e.valueName,onClick:U},null,8,["options","value","valueName"])):(l(),_("div",ce,[f(d)]))],64)):s.component==="tree"?(l(),_(C,{key:2},[(s.key==="upper"?e.metricOptions:e.options).length?(l(),_("div",ie,[f(J,{expandedKeys:p(g),"onUpdate:expandedKeys":t[2]||(t[2]=v=>k(g)?g.value=v:null),selectedKeys:p(u)?[p(u)]:[],treeData:s.key==="upper"?e.metricOptions:e.options,height:450,virtual:!0,fieldNames:{key:e.treeKey},onSelect:E},{title:m(({name:v,description:K})=>[f(x,null,{default:m(()=>[O(w(v)+" ",1),K?(l(),_("span",re,w(K),1)):S("",!0)]),_:2},1024)]),_:2},1032,["expandedKeys","selectedKeys","treeData","fieldNames"])])):(l(),_("div",de,[f(d)]))],64)):(l(),y(X,{key:3,modelValue:p(u),"onUpdate:modelValue":t[3]||(t[3]=v=>k(u)?u.value=v:null),itemType:s.component,options:s.key==="upper"?e.metricOptions:e.options,extra:a,onChange:T},null,8,["modelValue","itemType","options","extra"]))])]),_:2},1032,["tab"]))),128))]),_:1},8,["activeKey"])])]),default:m(()=>[h("div",{onClick:t[0]||(t[0]=q(s=>i.value=!0,["prevent"]))},[G(e.$slots,"default",{label:p(o)},()=>[h("div",ne,[e.icon?(l(),y(c,{key:0,type:e.icon},null,8,["type"])):S("",!0),f(N,{style:{"max-width":"220px"}},{default:m(()=>[O(w(p(o)),1)]),_:1})])],!0)])]),_:3},8,["visible"])}}});const we=ae(me,[["__scopeId","data-v-ce312b6b"]]);export{we as default};
