import{au as o,aJ as j,aK as S,dr as Y,e as A,af as R,g as B}from"./index-1730252110824.js";import"./index-1730252110824279.js";import{i as E}from"./index-1730252110824297.js";import{d as V,k as f,w as v,U as y,Z as g,_ as h,$ as z,f as s,X as n,u as k,G as F,E as i,V as J,q as M}from"./vue-1730252110824.js";const N={class:"card-wrapper"},U={class:"card-header"},H={class:"title"},L={class:"tools"},O=V({__name:"Card",props:{title:{type:String,default:""},chartData:{type:Array,default:()=>[]}},emits:["change"],setup(u,{emit:x}){const d=u,l=f("week"),t=f([o().subtract(1,"week").format("x"),o().format("x")]),_=f(),b=()=>{M(()=>{if(!_.value)return;const e=E(_.value),a=d.chartData.map(r=>r.value&&r.value.toFixed(0)),m={grid:{left:Math.max.apply(null,a.length?a:[0])>1e5?90:50,right:"5%",top:"5%",bottom:"10%"},tooltip:{trigger:"axis",formatter:"{b0}<br />{a0}: {c0}"},xAxis:{type:"category",data:d.chartData.map(r=>r.x)},yAxis:{type:"value"},series:[{name:"播放数量(人次)",data:a,type:"line",smooth:!0,symbolSize:0,color:"#ADC6FF",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#ADC6FF"},{offset:1,color:"#FFFFFF"}],global:!1}}}]};e.setOption(m),window.addEventListener("resize",function(){e.resize()})})},w=()=>{l.value="other"};return v(()=>d.chartData,e=>{b()},{deep:!0}),v(()=>t.value,e=>{x("change",{time:{start:e[0],end:e[1]}})},{immediate:!0,deep:!0}),v(()=>l.value,e=>{e==="today"&&(t.value[0]=o().startOf("day").format("x")),e==="week"&&(t.value[0]=o().subtract(1,"week").format("x")),e==="month"&&(t.value[0]=o().subtract(1,"month").format("x")),e==="year"&&(t.value[0]=o().subtract(1,"year").format("x")),t.value[1]=o().format("x"),x("change",{time:{start:t.value[0],end:t.value[1]}})}),(e,a)=>{const c=j,m=S,r=Y,D=A,C=R;return y(),g("div",N,[h("div",U,[h("div",H,z(u.title),1),h("div",L,[s(D,null,{default:n(()=>[s(m,{value:k(l),"onUpdate:value":a[0]||(a[0]=p=>F(l)?l.value=p:null),"button-style":"solid"},{default:n(()=>[s(c,{value:"today"},{default:n(()=>[i("今日")]),_:1}),s(c,{value:"week"},{default:n(()=>[i("近一周")]),_:1}),s(c,{value:"month"},{default:n(()=>[i("近一月")]),_:1}),s(c,{value:"year"},{default:n(()=>[i("近一年")]),_:1})]),_:1},8,["value"]),s(r,{format:"YYYY-MM-DD HH:mm:ss",valueFormat:"x",value:k(t),"onUpdate:value":a[1]||(a[1]=p=>F(t)?t.value=p:null),onChange:w},null,8,["value"])]),_:1})])]),u.chartData.length?(y(),g("div",{key:0,class:"chart",ref_key:"chartRef",ref:_},null,512)):(y(),J(C,{key:1,class:"no-data",description:"暂无数据"}))])}}});const K=B(O,[["__scopeId","data-v-1e4aef2e"]]);export{K as default};
