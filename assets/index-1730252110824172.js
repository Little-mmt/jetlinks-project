import{d as se,ac as ne,k as x,o as ae,ab as L,U as v,V as y,X as d,f as a,u as o,Z as b,F as J,a1 as E,E as O,$ as de,Y as h,_ as t,G as ue,af as re,ag as ie}from"./vue-1730252110824.js";import{h as w,e7 as ce,aC as F,dA as _e,o as pe,fJ as ve,v as me,a0 as he,I as fe,a1 as ge,aD as ye,a6 as Ie,Z as be,w as we,a7 as Pe,aJ as Ue,aK as ke,a9 as xe,d as qe,F as Se,du as Ce,aI as je,g as Ve}from"./index-1730252110824.js";import"./index-1730252110824288.js";import"./index-1730252110824298.js";import"./index-1730252110824279.js";import{d as S}from"./device-17302521108243.js";import{P as Me}from"./const-1730252110824.js";import Te from"./SaveProduct-1730252110824.js";import"./plugin-17302521108242.js";import"./product-17302521108244.js";const n=C=>(re("data-v-b77fc132"),C=C(),ie(),C),De={key:0,class:"doc",style:{height:"800"}},Je=n(()=>t("h1",null,"1.概述",-1)),Oe=n(()=>t("div",null," 视频设备通过GB/T28181接入平台整体分为2部分，包括平台端配置和设备端配置，不同的设备端配置的路径或页面存在差异，但配置项基本大同小异。 ",-1)),Be=n(()=>t("h1",null,"2.配置说明",-1)),Re=n(()=>t("h1",null,"平台端配置",-1)),Le=n(()=>t("h2",null,"1、ID",-1)),Ne=n(()=>t("div",null,"设备唯一标识，请填写设备端配置的设备编号。",-1)),Ae=n(()=>t("h2",null,"2、所属产品",-1)),$e=n(()=>t("div",null," 只能选择接入方式为GB/T28281的产品，若当前无对应产品，可点击右侧快速添加按钮，填写产品名称和选择GB/T28181类型的网关完成产品创建 ",-1)),Ge=n(()=>t("h2",null,"3、接入密码",-1)),Ee=n(()=>t("div",null," 配置接入密码，设备端配置的密码需与该密码一致。该字段可在产品-设备接入页面进行统一配置，配置后所有设备将继承产品配置。设备单独修改后将脱离继承关系。 ",-1)),Fe=n(()=>t("h1",null,"设备端配置",-1)),Ze=n(()=>t("div",null," 各个厂家、不同设备型号的设备端配置页面布局存在差异，但配置项基本大同小异，此处以大华摄像头为例作为接入配置示例 ",-1)),ze={class:"image"},Ke=n(()=>t("h2",null,"1、SIP服务器编号/SIP域",-1)),Xe=n(()=>t("div",null," SIP服务器编号填入该设备所属产品-接入方式页面“连接信息”的SIP。 SIP域通常为SIP服务器编号的前10位。 ",-1)),Ye={class:"image"},He=n(()=>t("h2",null,"2、SIP服务器IP/端口",-1)),Qe=n(()=>t("div",null," SIP服务器IP/端口填入该设备所属产品-接入方式页面中“连接信息”的IP/端口。 ",-1)),We={class:"image"},eo=n(()=>t("h2",null,"3、设备编号",-1)),oo=n(()=>t("div",null," 设备编号为设备唯一性标识，物联网平台的设备接入没有校验该字段，输入任意数字均不影响设备接入平台。 ",-1)),lo=n(()=>t("h2",null,"4、注册密码",-1)),to=n(()=>t("div",null," 填入该设备所属产品-接入方式页面中“GB28281配置”处的接入密码 ",-1)),so={class:"image"},no=n(()=>t("h2",null,"5、其他字段",-1)),ao=n(()=>t("div",null,"不影响设备接入平台，可保持设备初始化值。",-1)),uo={key:1,class:"doc",style:{height:"600"}},ro=n(()=>t("h1",null,"1.概述",-1)),io=n(()=>t("div",null," 视频设备通过RTSP、RTMP固定地址接入平台分为2步。 ",-1)),co=n(()=>t("div",null,"1、添加视频设备",-1)),_o=n(()=>t("div",null,"2、添加视频下的通道地址。",-1)),po=n(()=>t("div",null," 注：当前页面为新增视频设备，新增完成后点击设备的“通道”按钮，添加通道。 ",-1)),vo=n(()=>t("h1",null,"2.配置说明",-1)),mo=n(()=>t("h2",null,"1、ID",-1)),ho=n(()=>t("div",null," 设备唯一标识，若不填写，系统将自动生成唯一标识。 ",-1)),fo=n(()=>t("h2",null,"2、所属产品",-1)),go=n(()=>t("div",null," 只能选择接入方式为固定地址的产品，若当前无对应产品，可点击右侧快速添加按钮，填写产品名称和选择固定地址类型的网关完成产品创建。 ",-1)),yo=[ro,io,co,_o,po,vo,mo,ho,fo,go],Io={key:2,class:"doc",style:{height:"600"}},bo=n(()=>t("h1",null,"1.概述",-1)),wo=n(()=>t("div",null," JetLinks平台支持通过Onvif方式接入视频设备。分为两个部分，包括平台端配置和设备端配置。本文通过海康摄像头为例将onvif视频接入到平台播放。 ",-1)),Po=n(()=>t("h1",null,"2.配置说明",-1)),Uo=n(()=>t("div",null," 设备端配置 ",-1)),ko=n(()=>t("div",null,"1.本文以海康监控为例演示，登录海康监控设备后台，进入配置>网络>高级配置>集成协议，用户自定义输入用户名和密码，完成用户添加。",-1)),xo={class:"image"},qo=n(()=>t("div",null,"平台端配置",-1)),So=n(()=>t("div",null,"ID：设备唯一标识，若不填写，系统将自动生成唯一标识",-1)),Co=n(()=>t("div",null,"设备名称：用户自定义输入小于或等于64位字符",-1)),jo=n(()=>t("div",null,"所属产品：选择接入方式为Onvif的产品，若当前无对应产品，可点击右侧快速添加按钮，填写产品名称和选择Onvif类型的网关完成产品创建",-1)),Vo=n(()=>t("div",null,"接入地址：不同平台的摄像头接入地址组合方式不一致，请参考对应品牌接入Onvif的地址设置。如海康：http://ip/onvif/device_service。IP地址来自于海康监控设备端后台：配置>网络>基本配置>TCP/IP",-1)),Mo={class:"image"},To=n(()=>t("div",null,"接入账户：输入设备端配置时添加的用户名",-1)),Do=n(()=>t("div",null,"接入密码：输入设备端配置时添加的密码",-1)),Jo={class:"image"},Oo=n(()=>t("h1",null,"3.所有配置项填写完成，点击保存。",-1)),Bo={key:3,class:"doc",style:{height:"600"}},Ro=n(()=>t("h1",null,"1.概述",-1)),Lo=n(()=>t("div",null," JetLinks平台支持通过调用SDK或API请求将第三方系统视频设备数据接入到平台。 ",-1)),No=n(()=>t("h1",null,"2.配置说明",-1)),Ao=n(()=>t("div",null,"2.1平台端配置",-1)),$o=n(()=>t("div",null,"ID：设备唯一标识，若不填写，系统将自动生成唯一标识",-1)),Go=n(()=>t("div",null,"设备名称：用户自定义输入小于或等于64位字符",-1)),Eo=n(()=>t("div",null,"所属产品：选择接入方式为插件视频接入的产品，若当前无对应产品，可点击右侧快速添加按钮，填写产品名称和选择插件类型的网关完成产品创建。",-1)),Fo=n(()=>t("h1",null,"3.所有配置项填写完成，点击保存。",-1)),Zo=[Ro,Lo,No,Ao,$o,Go,Eo,Fo],zo=se({__name:"index",setup(C){const f=ne(),e=x({id:"",name:"",channel:"gb28181-2016",photoUrl:w("/device-media.png"),productId:void 0,description:"",others:{access_pwd:"",onvifUrl:"",onvifPassword:"",onvifUsername:""},streamMode:"",manufacturer:"",model:"",firmware:""}),N=x({properties:[]}),Z=()=>{e.value.productId=void 0,j()},q=x([]),j=async()=>{var p,r,c,_,i;const u={paging:!1,sorts:[{name:"createTime",order:"desc"}],terms:[{column:"accessProvider",value:e.value.channel},{column:"state",value:1}]},{result:l}=await S.queryProductList(u);q.value=l,l.length&&!f.query.id&&(e.value.productId=(p=l[0])==null?void 0:p.id,e.value.others.access_pwd=(c=(r=l[0])==null?void 0:r.configuration)==null?void 0:c.access_pwd,e.value.streamMode=(i=(_=l[0])==null?void 0:_.configuration)==null?void 0:i.stream_mode)},z=()=>{var u,l;e.value.others.access_pwd=((u=q.value.find(p=>p.id===e.value.productId))==null?void 0:u.configuration.access_pwd)||"",e.value.streamMode=((l=q.value.find(p=>p.id===e.value.productId))==null?void 0:l.configuration.stream_mode)||""},K=u=>{var l,p,r,c,_;if(u.type.type==="enum")return(((l=u.type)==null?void 0:l.elements)||[]).map(i=>({label:i==null?void 0:i.text,value:i==null?void 0:i.value}));if(u.type.type==="boolean")return[{label:(p=u.type)==null?void 0:p.falseText,value:(r=u.type)==null?void 0:r.falseValue},{label:(c=u.type)==null?void 0:c.trueText,value:(_=u.type)==null?void 0:_.trueValue}]},V=x(!1),X=async()=>{var l,p,r;const u=await S.detail(f.query.id);if(Object.assign(e.value,u.result),e.value.channel=u.result.provider,await j(),e.value.productId){const c=q.value.find(_=>_.id===e.value.productId);if(c&&e.value.channel!=="media-plugin"&&(e.value.others.access_pwd=e.value.others.access_pwd?e.value.others.access_pwd:(l=c==null?void 0:c.configuration)==null?void 0:l.access_pwd,e.value.streamMode=e.value.streamMode?e.value.streamMode:(p=c==null?void 0:c.configuration)==null?void 0:p.stream_mode),c&&e.value.channel==="media-plugin"){(!u.result.others||JSON.stringify((r=u.result)==null?void 0:r.others)==="{}")&&(e.value.others=c==null?void 0:c.configuration);const _=await ce(e.value.id);_.success&&(N.value=(_==null?void 0:_.result[0])||{properties:[]})}}};ae(async()=>{f.query.id?X():j()});const B=x(!1),A=x(),Y=()=>{var M;let{others:u,id:l,streamMode:p,manufacturer:r,model:c,firmware:_,...i}=e.value,g;e.value.channel==="fixed-media"?g=l?{id:l,streamMode:p,manufacturer:r,model:c,firmware:_,...i}:i:e.value.channel==="gb28181-2016"?(u=F(u,["onvifUrl","onvifPassword","onvifUsername"]),g=l?(()=>(u!=null&&u.stream_mode&&(u.stream_mode=p),{others:u,id:l,streamMode:p,manufacturer:r,model:c,firmware:_,...i}))():{others:u,id:l,...i}):e.value.channel==="onvif"?(u=F(u,["access_pwd"]),g=l?{id:l,streamMode:p,manufacturer:r,model:c,firmware:_,others:u,...i}:{others:u,...i}):e.value.channel==="media-plugin"&&(g=l?{id:l,streamMode:p,manufacturer:r,model:c,firmware:_,others:u,...i}:i),(M=A.value)==null||M.validate().then(async()=>{var T;B.value=!0;let m;if(f.query.id)m=await S.update(g);else{const k=await S.validateId(l);k.status===200&&((T=k==null?void 0:k.result)!=null&&T.passed)?m=await S.save(g):_e.error({key:"error",message:"设备ID已重复"})}m!=null&&m.success&&(pe("保存成功"),history.back())}).catch(m=>{console.log("err: ",m)}).finally(()=>{B.value=!1})};return(u,l)=>{const p=ve,r=me,c=L("JProUpload"),_=he,i=fe,g=ge,M=ye,m=Ie,T=L("AIcon"),k=be,R=we,H=Pe,$=Ue,Q=ke,W=xe,ee=qe,oe=Se,P=Ce,le=je,te=L("page-container");return v(),y(te,null,{default:d(()=>[a(le,null,{default:d(()=>[a(g,{gutter:24},{default:d(()=>[a(_,{span:12},{default:d(()=>[a(oe,{ref_key:"formRef",ref:A,model:o(e),layout:"vertical"},{default:d(()=>{var I;return[a(r,{label:"接入方式",name:"channel",rules:{required:!0,message:"请选择接入方式"}},{default:d(()=>[a(p,{layout:"horizontal",options:o(Me),checkStyle:!0,disabled:!!o(f).query.id,modelValue:o(e).channel,"onUpdate:modelValue":l[0]||(l[0]=s=>o(e).channel=s),onChange:Z},null,8,["options","disabled","modelValue"])]),_:1}),a(g,{gutter:24},{default:d(()=>[a(_,{span:8},{default:d(()=>[a(c,{modelValue:o(e).photoUrl,"onUpdate:modelValue":l[1]||(l[1]=s=>o(e).photoUrl=s)},null,8,["modelValue"])]),_:1}),a(_,{span:16},{default:d(()=>[a(r,{label:"ID",name:"id",rules:[{required:o(e).channel==="gb28181-2016",message:"请输入ID"},{max:64,message:"最多输入64个字符"},{pattern:/^[a-zA-Z0-9_\-]+$/,message:"请输入英文或者数字或者-或者_"}]},{default:d(()=>[a(i,{value:o(e).id,"onUpdate:value":l[2]||(l[2]=s=>o(e).id=s),placeholder:"请输入ID",disabled:!!o(f).query.id},null,8,["value","disabled"])]),_:1},8,["rules"]),a(r,{label:"设备名称",name:"name",rules:[{required:!0,message:"请输入设备名称"},{max:64,message:"最多可输入64个字符"}]},{default:d(()=>[a(i,{value:o(e).name,"onUpdate:value":l[3]||(l[3]=s=>o(e).name=s),placeholder:"请输入设备名称"},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(r,{label:"所属产品",name:"productId",rules:{required:!0,message:"请选择所属产品"}},{default:d(()=>[a(g,{gutter:[0,10]},{default:d(()=>[a(_,{span:o(f).query.id?24:22},{default:d(()=>[a(m,{value:o(e).productId,"onUpdate:value":l[4]||(l[4]=s=>o(e).productId=s),placeholder:"请选择所属产品",disabled:!!o(f).query.id,showSearch:"",onChange:z},{default:d(()=>[(v(!0),b(J,null,E(o(q),(s,D)=>(v(),y(M,{key:D,value:s.id,label:s.name},{default:d(()=>[O(de(s.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","disabled"])]),_:1},8,["span"]),o(f).query.id?h("",!0):(v(),y(_,{key:0,span:2},{default:d(()=>[a(k,{type:"link",onClick:l[5]||(l[5]=s=>V.value=!0),hasPermission:"device/Product:add"},{default:d(()=>[a(T,{type:"PlusOutlined"})]),_:1})]),_:1}))]),_:1})]),_:1}),o(e).channel==="gb28181-2016"?(v(),y(r,{key:0,label:"接入密码",name:["others","access_pwd"],rules:[{required:!0,message:"请输入接入密码"},{max:64,message:"最多可输入64个字符"}]},{default:d(()=>[a(R,{value:o(e).others.access_pwd,"onUpdate:value":l[6]||(l[6]=s=>o(e).others.access_pwd=s),placeholder:"请输入接入密码"},null,8,["value"])]),_:1})):h("",!0),o(e).channel==="onvif"?(v(),b(J,{key:1},[a(r,{label:"接入地址",name:["others","onvifUrl"],rules:[{required:!0,message:"请输入接入地址"},{max:64,message:"最多可输入64个字符"}]},{default:d(()=>[a(i,{value:o(e).others.onvifUrl,"onUpdate:value":l[7]||(l[7]=s=>o(e).others.onvifUrl=s),placeholder:"请输入接入地址"},null,8,["value"])]),_:1}),a(r,{label:"接入账户",name:["others","onvifUsername"],rules:[{required:!0,message:"请输入接入账户"},{max:64,message:"最多可输入64个字符"}]},{default:d(()=>[a(i,{value:o(e).others.onvifUsername,"onUpdate:value":l[8]||(l[8]=s=>o(e).others.onvifUsername=s),placeholder:"请输入接入账户"},null,8,["value"])]),_:1}),a(r,{label:"接入密码",name:["others","onvifPassword"],rules:[{required:!0,message:"请输入接入密码"},{max:64,message:"最多可输入64个字符"}]},{default:d(()=>[a(R,{value:o(e).others.onvifPassword,"onUpdate:value":l[9]||(l[9]=s=>o(e).others.onvifPassword=s),placeholder:"请输入接入密码"},null,8,["value"])]),_:1})],64)):h("",!0),o(e).channel==="media-plugin"?(v(!0),b(J,{key:2},E(((I=o(N))==null?void 0:I.properties)||[],s=>{var D,G;return v(),y(r,{name:["others",s.property],key:s,label:s.name,rules:[{required:!!((G=(D=s==null?void 0:s.type)==null?void 0:D.expands)!=null&&G.required),message:`${s.type.type,"请选择"}${s.name}`}]},{default:d(()=>[s.type.type==="string"?(v(),y(i,{key:0,placeholder:"请输入",value:o(e).others[s.property],"onUpdate:value":U=>o(e).others[s.property]=U},null,8,["value","onUpdate:value"])):h("",!0),s.type.type==="password"?(v(),y(R,{key:1,placeholder:"请输入",value:o(e).others[s.property],"onUpdate:value":U=>o(e).others[s.property]=U},null,8,["value","onUpdate:value"])):h("",!0),s.type.type==="enum"||s.type.type==="boolean"?(v(),y(m,{key:2,placeholder:"请选择",value:o(e).others[s.property],"onUpdate:value":U=>o(e).others[s.property]=U,options:K(s)},null,8,["value","onUpdate:value","options"])):h("",!0),["int","float","double","long"].includes(s.type.type)?(v(),y(H,{key:3,value:o(e).others[s.property],"onUpdate:value":U=>o(e).others[s.property]=U,placeholder:"请输入"},null,8,["value","onUpdate:value"])):h("",!0)]),_:2},1032,["name","label","rules"])}),128)):h("",!0),o(f).query.id?(v(),b(J,{key:3},[o(e).channel==="gb28181-2016"?(v(),y(r,{key:0,label:"流传输模式",name:"streamMode",rules:{required:!0,message:"请选择流传输模式"}},{default:d(()=>[a(Q,{"button-style":"solid",value:o(e).streamMode,"onUpdate:value":l[10]||(l[10]=s=>o(e).streamMode=s)},{default:d(()=>[a($,{value:"UDP"},{default:d(()=>[O(" UDP ")]),_:1}),a($,{value:"TCP_PASSIVE"},{default:d(()=>[O(" TCP被动 ")]),_:1})]),_:1},8,["value"])]),_:1})):h("",!0),a(r,{label:"设备厂商",name:"manufacturer",rules:[{max:64,message:"最多可输入64位字符",trigger:"change"}]},{default:d(()=>[a(i,{value:o(e).manufacturer,"onUpdate:value":l[11]||(l[11]=s=>o(e).manufacturer=s),placeholder:"请输入设备厂商"},null,8,["value"])]),_:1}),a(r,{label:"设备型号",name:"model",rules:[{max:64,message:"最多可输入64位字符",trigger:"change"}]},{default:d(()=>[a(i,{value:o(e).model,"onUpdate:value":l[12]||(l[12]=s=>o(e).model=s),placeholder:"请输入设备型号"},null,8,["value"])]),_:1}),a(r,{label:"固件版本",name:"firmware",rules:[{max:64,message:"最多可输入64位字符",trigger:"change"}]},{default:d(()=>[a(i,{value:o(e).firmware,"onUpdate:value":l[13]||(l[13]=s=>o(e).firmware=s),placeholder:"请输入固件版本"},null,8,["value"])]),_:1})],64)):h("",!0),a(r,{label:"说明"},{default:d(()=>[a(W,{value:o(e).description,"onUpdate:value":l[14]||(l[14]=s=>o(e).description=s),"show-count":"",maxlength:200,rows:5,placeholder:"请输入说明"},null,8,["value"])]),_:1}),a(r,null,{default:d(()=>[a(ee,{type:"primary",onClick:Y,loading:o(B)},{default:d(()=>[O(" 保存 ")]),_:1},8,["loading"])]),_:1})]}),_:1},8,["model"])]),_:1}),a(_,{span:12},{default:d(()=>[o(e).channel==="gb28181-2016"?(v(),b("div",De,[Je,Oe,Be,Re,Le,Ne,Ae,$e,Ge,Ee,Fe,Ze,t("div",ze,[a(P,{width:"100%",src:o(w)("/media/doc1.png")},null,8,["src"])]),Ke,Xe,t("div",Ye,[a(P,{width:"100%",src:o(w)("/media/doc2.png")},null,8,["src"])]),He,Qe,t("div",We,[a(P,{width:"100%",src:o(w)("/media/doc3.png")},null,8,["src"])]),eo,oo,lo,to,t("div",so,[a(P,{width:"100%",src:o(w)("/media/doc4.png")},null,8,["src"])]),no,ao])):o(e).channel==="fixed-media"?(v(),b("div",uo,yo)):o(e).channel==="onvif"?(v(),b("div",Io,[bo,wo,Po,Uo,ko,t("div",xo,[a(P,{width:"100%",src:o(w)("/media/doc5.png")},null,8,["src"])]),qo,So,Co,jo,Vo,t("div",Mo,[a(P,{width:"100%",src:o(w)("/media/doc6.png")},null,8,["src"])]),To,Do,t("div",Jo,[a(P,{width:"100%",src:o(w)("/media/doc7.png")},null,8,["src"])]),Oo])):o(e).channel==="media-plugin"?(v(),b("div",Bo,Zo)):h("",!0)]),_:1})]),_:1})]),_:1}),a(Te,{visible:o(V),"onUpdate:visible":l[15]||(l[15]=I=>ue(V)?V.value=I:null),productId:o(e).productId,"onUpdate:productId":l[16]||(l[16]=I=>o(e).productId=I),password:o(e).others.access_pwd,"onUpdate:password":l[17]||(l[17]=I=>o(e).others.access_pwd=I),channel:o(e).channel,onClose:j},null,8,["visible","productId","password","channel"])]),_:1})}}});const sl=Ve(zo,[["__scopeId","data-v-b77fc132"]]);export{sl as default};
