import{I as w,v as E,F as b,af as h}from"./index-1731638920964.js";import{_ as x}from"./BuildIn.vue_vue_type_script_setup_true_name_NotifyBuildIn_lang-17316389209642.js";import{_ as U}from"./Tag.vue_vue_type_script_setup_true_lang-17316389209642.js";import{_ as I}from"./InputFile.vue_vue_type_script_setup_true_lang-17316389209642.js";import{d as D,k as F,r as O,s as $,U as a,Z as m,V as c,X as j,F as B,a1 as R,u as i}from"./vue-1731638920964.js";const T={style:{padding:"50px 200px"}},A=D({__name:"VariableDefinitions",props:{variableDefinitions:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})},notify:{type:Object,default:()=>({})},template:{type:Object,default:()=>({})}},setup(p,{expose:k}){const d=p,u=F(),o=O({});$(()=>{Object.assign(o,d==null?void 0:d.value)});const l=f=>{var e;return((e=f.expands)==null?void 0:e.businessType)||f.type},P=(f,e,n)=>{var _;const s=((_=n.expands)==null?void 0:_.businessType)||(n==null?void 0:n.type);if(s==="file")return Promise.resolve();if(s==="string"&&!e)return Promise.reject(new Error("请输入"+n.name));if(s==="link")if(e){if(e.length>64)return Promise.reject(new Error("最多64个字符"))}else return Promise.reject(new Error("请输入"+n.name));else{if(s==="tag"&&!e)return Promise.reject(new Error("请选择"+n.name));if(["date"].includes(s))return e?(e==null?void 0:e.source)==="upper"?e!=null&&e.upperKey?Promise.resolve():Promise.reject(new Error("请选择"+n.name)):e!=null&&e.value?Promise.resolve():Promise.reject(new Error("请选择"+n.name)):Promise.reject(new Error("请选择"+n.name));if((e==null?void 0:e.source)==="fixed"&&!(e!=null&&e.value))return Promise.reject(new Error("请输入"+n.name));if((e==null?void 0:e.source)==="relation"&&!(e!=null&&e.value)&&!(e!=null&&e.relation))return Promise.reject(new Error("请选择"+n.name));if((e==null?void 0:e.source)==="upper"&&!e.upperKey)return Promise.reject(new Error("请选择"+n.name))}return Promise.resolve()};return k({onSave:()=>new Promise((f,e)=>{var n;(n=u.value)==null||n.validate().then(s=>{f(s)}).catch(()=>{e(!1)})})}),(f,e)=>{const n=w,s=E,_=b,g=h;return a(),m("div",T,[p.variableDefinitions.length?(a(),c(_,{key:0,layout:"vertical",ref_key:"formRef",ref:u,model:i(o)},{default:j(()=>[(a(!0),m(B,null,R(p.variableDefinitions,r=>(a(),c(s,{name:`${r==null?void 0:r.id}`,label:r==null?void 0:r.name,key:r.id,rules:[{required:l(r)!=="file",validator:(y,t)=>P(y,t,r),trigger:["change"]}]},{default:j(()=>{var y;return[l(r)==="tag"?(a(),c(U,{key:0,notify:p.notify,value:i(o)[r.id],"onUpdate:value":t=>i(o)[r.id]=t},null,8,["notify","value","onUpdate:value"])):l(r)==="file"?(a(),c(I,{key:1,value:i(o)[r.id],"onUpdate:value":t=>i(o)[r.id]=t},null,8,["value","onUpdate:value"])):l(r)==="link"?(a(),c(n,{key:2,value:i(o)[r.id],"onUpdate:value":t=>i(o)[r.id]=t},null,8,["value","onUpdate:value"])):(a(),c(x,{key:3,item:r,providerId:(y=d.notify)==null?void 0:y.providerId,value:i(o)[r.id],"onUpdate:value":t=>i(o)[r.id]=t},null,8,["item","providerId","value","onUpdate:value"]))]}),_:2},1032,["name","label","rules"]))),128))]),_:1},8,["model"])):(a(),c(g,{key:1,style:{margin:"20px 0"},description:"当前模版暂无变量"}))])}}});export{A as _};
