import{ab as S,au as C,o as u,dJ as D,ac as I,ds as M,a3 as j,aa as L}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import{d as q,k as o,U as A,V as B,X as c,f as l,u as t,E as J,$ as N}from"./vue-1730252110824.js";const U=q({__name:"index",props:{data:{type:Object,default:()=>{}}},emits:["cancel","ok"],setup(m,{emit:i}){const f=m,y=o({}),d=o({}),a=o([]),r=o(!1),n=new Map;n.set("online","success"),n.set("offline","error"),n.set("notActive","warning");const g={terms:[{column:"productId$product-info",value:[{column:"deviceType",termType:"eq",value:"gateway"}]}]},p=[{title:"ID",dataIndex:"id",key:"id",ellipsis:!0,fixed:"left",search:{type:"string"}},{title:"设备名称",dataIndex:"name",key:"name",ellipsis:!0,search:{type:"string"}},{title:"所属产品",dataIndex:"productName",key:"productName",search:{type:"string"}},{title:"注册时间",dataIndex:"registryTime",key:"registryTime",scopedSlots:!0,search:{type:"date"}},{title:"状态",dataIndex:"state",key:"state",scopedSlots:!0,search:{type:"select",options:[{label:"禁用",value:"notActive"},{label:"离线",value:"offline"},{label:"在线",value:"online"}]}}],v=e=>{d.value=e},_=e=>{a.value=[...e]},h=()=>{if(a.value.length===0){u("请选择需要绑定的设备","warning");return}r.value=!0,D(a.value[0],[f.data.id]).then(e=>{e.status===200&&(i("ok",a.value[0]),u("操作成功"))}).finally(()=>{r.value=!1})},x=()=>{i("cancel",!1)};return(e,R)=>{const b=I,k=M,T=j,w=L;return A(),B(w,{maskClosable:!1,width:"1000px",visible:!0,title:"绑定父设备",okText:"确定",cancelText:"取消",onOk:h,onCancel:x,confirmLoading:t(r)},{default:c(()=>[l(b,{columns:p,target:"child-device-bind",onSearch:v,type:"simple"}),l(T,{ref_key:"bindDeviceRef",ref:y,columns:p,request:t(S),model:"TABLE",bodyStyle:{padding:"0 0 0 24px"},defaultParams:g,rowSelection:{selectedRowKeys:t(a),onChange:_},params:t(d)},{registryTime:c(s=>[J(N(s.registryTime?t(C)(s.registryTime).format("YYYY-MM-DD HH:mm:ss"):""),1)]),state:c(s=>[l(k,{text:s.state.text,status:t(n).get(s.state.value)},null,8,["text","status"])]),_:1},8,["request","rowSelection","params"])]),_:1},8,["confirmLoading"])}}});export{U as _};
