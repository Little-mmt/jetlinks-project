import{X as Y,h as $,au as F,o as v,Z as R,fP as j,fQ as q,a2 as H,a3 as J}from"./index-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import X from"./index-1731638920964150.js";import{f as Z,g as z,h as L}from"./auto-1731638920964.js";import{k as h,ab as r,U as m,Z as w,f as a,X as e,u,E as D,W as Q,R as U,_ as o,$ as c,V as P,F as V,Y as W}from"./vue-1731638920964.js";import"./useRequest-1731638920964.js";const G=["src"],K={style:{"font-size":"16px","font-weight":"700"}},ee=o("div",{class:"card-item-content-text"}," 计划ID ",-1),te=o("div",{class:"card-item-content-text"}," 创建时间 ",-1),ae=o("div",{class:"card-item-content-text"}," 录像保存周期（天） ",-1),ne=o("div",{class:"card-item-content-text"}," 录制时段类型 ",-1),ye={__name:"index",setup(se){const _=h(!1),g=h(),b=Y(),f=h(),k=[{title:"ID",dataIndex:"id",key:"id",width:200,fixed:"left",search:{type:"string"},ellipsis:!0},{title:"名称",dataIndex:"name",key:"name",search:{type:"string",first:!0},ellipsis:!0},{title:"状态",dataIndex:"state",key:"state",width:100,search:{type:"select",options:[{label:"正常",value:"enabled"},{label:"禁用",value:"disabled"}]}}],A=(t,y)=>t?[{key:"update",text:"编辑",tooltip:{title:"编辑"},icon:"EditOutlined",onClick:()=>{b.jumpPage("media/AutoVideo/Plan/Detail",{id:t.id},{type:"edit"})}},{key:"action",text:t.state.value==="enabled"?"禁用":"启用",tooltip:{title:t.state.value==="enabled"?"禁用":"启用"},icon:t.state.value==="enabled"?"StopOutlined":"CheckCircleOutlined",popConfirm:{title:`确认${t.state.value==="enabled"?"禁用":"启用"}?`,onConfirm:async()=>{var l;const i={state:t.state.value==="enabled"?"disabled":"enabled"};(await z(t.id,i)).success&&(v("操作成功"),(l=f.value)==null||l.reload())}}},{key:"delete",text:"删除",tooltip:{title:t.state.value==="enabled"?"正常计划无法删除":"删除"},disabled:t.state.value==="enabled",popConfirm:{title:"确认删除?",onConfirm:()=>{const i=L(t.id);return i.then(d=>{var l;d.status===200?(v("操作成功！"),(l=f.value)==null||l.reload()):v("操作失败！","error")}),i}},icon:"DeleteOutlined"}]:[],I=()=>{_.value=!0},S=t=>{g.value=t},T=t=>{b.jumpPage("media/AutoVideo/Plan/Detail",{id:t.id},{type:"view"})};return(t,y)=>{const C=r("pro-search"),i=r("AIcon"),d=R,l=r("Ellipsis"),p=j,B=q,O=H,E=J,M=r("FullPage"),N=r("page-container");return m(),w(V,null,[a(N,null,{default:e(()=>[a(C,{columns:k,target:"auto-video-plan",onSearch:S}),a(M,null,{default:e(()=>[a(E,{ref_key:"tableRef",ref:f,columns:k,model:"CARD",defaultParams:{sorts:[{name:"createTime",order:"desc"}],terms:[{column:"type",value:"video"}]},gridColumn:2,request:u(Z),params:u(g)},{headerTitle:e(()=>[a(d,{type:"primary",onClick:I,hasPermission:"media/AutoVideo/Plan:add"},{icon:e(()=>[a(i,{type:"PlusOutlined"})]),default:e(()=>[D(" 新增计划 ")]),_:1})]),card:e(s=>{var x;return[a(O,Q({onClick:()=>T(s),value:s,actions:A(s,"card")},s,{showStatus:!0,status:s.state.value,statusText:((x=s.state)==null?void 0:x.value)==="enabled"?"正常":"禁用",statusNames:{enabled:"processing",disabled:"error"}}),{img:e(()=>[U(t.$slots,"img",{},()=>[o("img",{src:u($)("/device-media.png")},null,8,G)])]),content:e(()=>[a(l,{style:{width:"calc(100% - 100px)"}},{default:e(()=>[o("span",K,c(s.name),1)]),_:2},1024),a(B,null,{default:e(()=>[a(p,{span:6},{default:e(()=>[ee,a(l,{style:{width:"calc(100% - 20px)"}},{default:e(()=>[o("div",null,c(s.id),1)]),_:2},1024)]),_:2},1024),a(p,{span:6},{default:e(()=>[te,o("div",null,c(u(F)(s.createTime).format("YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024),a(p,{span:6},{default:e(()=>[ae,a(l,{style:{width:"calc(100% - 20px)"}},{default:e(()=>[D(c(s.saveDays),1)]),_:2},1024)]),_:2},1024),a(p,{span:6},{default:e(()=>{var n;return[ne,o("div",null,c(((n=s.others)==null?void 0:n.trigger)==="week"?"按周":"自定义日历"),1)]}),_:2},1024)]),_:2},1024)]),actions:e(n=>[a(d,{disabled:n.disabled,popConfirm:n.popConfirm,tooltip:{...n.tooltip},onClick:n.onClick,hasPermission:"media/AutoVideo/Plan:"+n.key},{default:e(()=>[n.key==="delete"?(m(),P(i,{key:0,type:"DeleteOutlined"})):(m(),w(V,{key:1},[a(i,{type:n.icon},null,8,["type"]),o("span",null,c(n==null?void 0:n.text),1)],64))]),_:2},1032,["disabled","popConfirm","tooltip","onClick","hasPermission"])]),_:2},1040,["onClick","value","actions","status","statusText"])]}),_:3},8,["request","params"])]),_:3})]),_:3}),u(_)?(m(),P(X,{key:0,onCloseModal:y[0]||(y[0]=s=>_.value=!1)})):W("",!0)],64)}}};export{ye as default};
