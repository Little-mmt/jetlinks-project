import{k as B,T as m,L,o as v,dA as U,d as k,as as z,dB as I,g as E}from"./index-1731638920964.js";import{d as T}from"./plugin-17316389209642.js";import{d as V,k as d,U as g,Z as h,f as p,X as b,_ as x,E as y,u as t,F as N,Y as w,af as J,ag as K}from"./vue-1731638920964.js";const Y=l=>(J("data-v-c7b22efc"),l=l(),K(),l),A=Y(()=>x("span",{class:"upload-tip"},"格式要求：.jar .zip",-1)),M=V({name:"FileUpload"}),O=V({...M,props:{modelValue:{type:String,default:()=>""},disabled:{type:Boolean,default:!1},fileName:{type:String,default:void 0}},emits:["update:modelValue","change"],setup(l,{emit:c}){var _;const u=l;(_=B().$state.configInfo.paths)==null||_["base-path"];const S=d(u.modelValue),r=d(u.fileName?[{name:u.fileName}]:[]),s=d(!1),f=d(),C=()=>{r.value=[],c("update:modelValue",""),c("change",{})},F=(e,n)=>{const o=e.name.split("."),a=["jar","zip"].includes(o[o.length-1]);return a?(r.value=n,a):(v("请上传.jar,.zip格式的文件","error"),s.value=!1,!1)},j=async e=>{var n,o;if(s.value=!0,e.file.status==="done"){s.value=!1;const a=(n=e.file.response)==null?void 0:n.result,i=a.accessUrl;v("上传成功！","success"),S.value=i,f.value=e.fileList,c("update:modelValue",a.version),c("change",a)}else e.file.error?(r.value=f.value,U.error({message:"系统提示",description:(o=e.file.response)==null?void 0:o.message}),s.value=!1):e.file.response&&(s.value=!1)};return(e,n)=>{const o=k,a=z,i=I;return g(),h(N,null,[p(a,{name:"file",accept:".jar,.zip",action:t(T),headers:{[t(m)]:t(L).get(t(m))},onChange:j,class:"upload-box","before-upload":F,disabled:t(s),maxCount:1,fileList:t(r),onRemove:C},{default:b(()=>[x("div",null,[p(o,null,{default:b(()=>[y("上传文件")]),_:1}),A])]),_:1},8,["action","headers","disabled","fileList"]),t(s)?(g(),h(N,{key:0},[p(i,{size:"small"}),y(" 上传中 ")],64)):w("",!0)],64)}}});const $=E(O,[["__scopeId","data-v-c7b22efc"]]);export{$ as default};
