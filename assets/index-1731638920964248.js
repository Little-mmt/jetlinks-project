import{au as j,a4 as J,Z as O,e as z,a3 as F,o as q,g as H}from"./index-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import{q as L,f as Z,h as $}from"./dictionary-1731638920964.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-173163892096433.js";import{d as X,k as i,w as G,ab as I,U as f,Z as w,_ as a,E as h,$ as C,f as d,X as c,u,F as B,a1 as K,V as E,Y as Q}from"./vue-1731638920964.js";import"./regular-1731638920964.js";const W={class:"des"},ee={class:"des_head"},te={style:{display:"flex"}},ae={class:"contain"},se=X({__name:"index",props:{data:{type:Object,default:{}}},setup(p){const l=p,b=i(),_=i(),m=i(!1),D=i(0),v=i("add"),k=i(),T=[{title:"检索码",dataIndex:"searchCode",hideInTable:!0,search:{type:"string"}},{title:"name",dataIndex:"name",key:"name",ellipsis:!0,search:{type:"string"}},{title:"value",dataIndex:"value",key:"value",ellipsis:!0,search:{type:"string"}},{title:"text",dataIndex:"text",key:"text",ellipsis:!0,search:{type:"string"}},{title:"操作",dataIndex:"action",key:"action",scopedSlots:!0}],S=(e,s)=>{if(!e)return[];const t=[{key:"update",text:"编辑",tooltip:{title:"编辑"},icon:"EditOutlined",onClick:()=>{m.value=!0,v.value="edit",k.value=e}},{key:"delete",text:"删除",tooltip:{title:"删除"},popConfirm:{title:"确认删除?",onConfirm:async()=>{(await $(e.id)).status===200?(q("操作成功!"),_.value.reload()):q("操作失败!","error")}},icon:"DeleteOutlined"}];return s==="card"?t.filter(r=>r.key!=="view"):t},V=()=>{var e;v.value="add",k.value={},L({paging:!1,sorts:[{name:"ordinal",order:"desc"}],terms:[{column:"dictId",termType:"eq",value:(e=l.data)==null?void 0:e.id}]}).then(s=>{var t;D.value=(t=s.result)!=null&&t.length?s.result[0].ordinal+1:1,m.value=!0})},M=()=>{m.value=!1},N=e=>{b.value=e},Y=()=>{m.value=!1,_.value.reload()},A=async e=>{var s,t;if((s=l.data)!=null&&s.id){const r={...e,sorts:[{name:"ordinal",order:"desc"}],terms:[...e.terms,{column:"dictId",termType:"eq",value:(t=l.data)==null?void 0:t.id}]},o=await Z(r);if(o.status===200){const y=J(o.result.data);return y==null||y.sort((x,g)=>g.ordinal-x.ordinal),{code:o.status,result:o.result,status:o.status}}}else return{code:200,result:{data:[],pageIndex:0,pageSize:0,total:0},status:200}};return G(()=>{var e;return(e=l==null?void 0:l.data)==null?void 0:e.id},()=>{_.value.reload()}),(e,s)=>{var P;const t=I("Ellipsis"),r=I("pro-search"),o=O,y=I("AIcon"),x=z,g=F;return f(),w(B,null,[a("div",W,[a("div",ee,[a("div",null,[h("字典ID："),a("span",null,C(p.data.id),1)]),a("div",te,[h("说明："),d(t,{style:{width:"calc(100% - 200px)"}},{default:c(()=>[a("span",null,C(p.data.describe),1)]),_:1})]),a("div",null,[h("创建日期："),a("span",null,C(u(j)((P=p.data)==null?void 0:P.createTime).format("YYYY-MM-DD HH:mm:ss")),1)])]),a("div",ae,[d(r,{columns:T,onSearch:N,target:"system_dictionary"}),d(g,{columns:T,model:"TABLE",request:A,params:u(b),ref_key:"tableRef",ref:_},{headerTitle:c(()=>[d(o,{type:"primary",onClick:V,hasPermission:"system/Dictionary:add"},{default:c(()=>[h(" 新增 ")]),_:1})]),action:c(R=>[d(x,{size:16},{default:c(()=>[(f(!0),w(B,null,K(S(R,"table"),n=>(f(),E(o,{key:n.key,disabled:n.disabled,popConfirm:n.popConfirm,tooltip:{...n.tooltip},onClick:n.onClick,type:"link",style:{padding:"0 5px"},danger:n.key==="delete",hasPermission:"system/Dictionary:"+n.key},{icon:c(()=>[d(y,{type:n.icon},null,8,["type"])]),_:2},1032,["disabled","popConfirm","tooltip","onClick","danger","hasPermission"]))),128))]),_:2},1024)]),_:1},8,["params"])])]),u(m)?(f(),E(U,{key:0,dicId:p.data.id,type:u(v),data:u(k),sort:u(D),onCloseModal:M,onRefresh:Y},null,8,["dicId","type","data","sort"])):Q("",!0)],64)}}});const _e=H(se,[["__scopeId","data-v-5436b78c"]]);export{_e as default};
