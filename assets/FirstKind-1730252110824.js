import{g as D,aH as E,ds as H,$ as Q,aT as R,y as J}from"./index-1730252110824.js";import"./index-1730252110824282.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import{c as $,e as A,f as G}from"./accessConfig-1730252110824.js";import{d as O,N as X,P as N,C as Y,a as Z}from"./data-17302521108246.js";import I from"./index-1730252110824133.js";import{k as g,o as z,U as n,Z as l,f as p,u as a,V as k,X as h,_ as W,F as j,a1 as tt,$ as L,Y as u,E as et}from"./vue-1730252110824.js";import"./index-1730252110824288.js";const at={class:"other"},st={key:0},ot={key:3},rt={__name:"FirstKind",props:{data:{type:Object}},setup(_){const i=_,o=g(),v=g(),c=g(),b=g([]),C=g([]);function P(){var t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var s=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(e==="x"?s:s&3|8).toString(16)})}const S=t=>{let e="";return t.upstream&&t.downstream?e="上行、下行":t.upstream?e="上行":t.downstream&&(e="下行"),e},V=async()=>{var e,s;const t=await $(X.get((e=i.data)==null?void 0:e.provider),(s=i.data)==null?void 0:s.channelId,{});t.status===200&&(o.value=t.result.find(r=>{var d;return r.id===((d=i.data)==null?void 0:d.channelId)}))},q=async()=>{var e;const t=await A(N.get((e=i.data)==null?void 0:e.provider),{"sorts[0].name":"createTime","sorts[0].order":"desc",paging:!1});t.status===200&&(v.value=t.result.find(s=>{var r;return s.id===((r=i.data)==null?void 0:r.protocol)}))},B=async()=>{const t=await G(i.data.protocol,N.get(i.data.provider));if(t.success){c.value=t.result;const e={title:"分组",dataIndex:"group",key:"group",ellipsis:!0,align:"center",width:100,customCell:(s,r)=>{var m;const d={children:s,rowSpan:0},f=((m=c.value)==null?void 0:m.routes)||[],w=f.filter(y=>y.group===s.group);return(r===0||f[r-1].group!==s.group)&&(d.rowSpan=w.length),d}};b.value=[e,...Y],C.value=[e,...Z]}},F=t=>t.health===-1?"error":"processing",K=t=>{let e="";return t.forEach(s=>{e=e+" "+s.address}),e};return z(()=>{V(),q(),B()}),(t,e)=>{var T,m,y,M;const s=E,r=H,d=Q,f=R,w=J;return n(),l("div",null,[p(s,{data:"网络组件"}),a(o)?(n(),k(I,{key:0,data:{...a(o),description:(T=a(o))!=null&&T.description?a(o).description:a(O)[(m=_.data)==null?void 0:m.provider],type:"network"}},{other:h(()=>[W("div",at,[p(d,{placement:"top",title:K(a(o).addresses)},{default:h(()=>[(n(!0),l(j,null,tt((a(o).addresses||[]).slice(0,1),x=>(n(),l("div",{key:x.address,class:"item"},[p(r,{status:F(x),text:x.address},null,8,["status","text"]),(a(o).addresses||[]).length>1?(n(),l("span",st,"等"+L(a(o).addresses.length)+"条",1)):u("",!0)]))),128))]),_:1},8,["title"])])]),_:1},8,["data"])):u("",!0),p(s,{data:"消息协议",style:{"margin-top":"20px"}}),a(v)?(n(),k(I,{key:1,data:{...a(v),type:"protocol"}},null,8,["data"])):u("",!0),(y=a(c))!=null&&y.routes&&a(c).routes.length>0?(n(),k(s,{key:2,data:_.data.provider==="mqtt-server-gateway"||_.data.provider==="mqtt-client-gateway"?"topic":"URL信息",style:{"margin-top":"20px"}},null,8,["data"])):u("",!0),(M=a(c))!=null&&M.routes&&a(c).routes.length>0?(n(),l("div",ot,[p(w,{height:"350"},{default:h(()=>[p(f,{pagination:!1,rowKey:P(),"data-source":a(c).routes||[],bordered:"",columns:a(c).id==="MQTT"?a(b):a(C),scroll:{y:400}},{bodyCell:h(({column:x,text:nt,record:U})=>[x.dataIndex==="stream"?(n(),l(j,{key:0},[et(L(S(U)),1)],64)):u("",!0)]),_:1},8,["rowKey","data-source","columns"])]),_:1})])):u("",!0)])}}},ft=D(rt,[["__scopeId","data-v-b13a0cb7"]]);export{ft as default};
