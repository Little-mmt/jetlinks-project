import{fY as V,fZ as B,aF as b,I as N,v as U,d as A,aT as F,F as O,g as S}from"./index-1730252110824.js";import"./index-1730252110824282.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import{d as Y,k as x,r as D,w as J,U as c,Z as K,f as s,X as d,u as r,V as h,Y as L,E as P}from"./vue-1730252110824.js";const R={class:"table-wrapper"},Z=Y({__name:"EditTable",props:{headers:{type:Array,default:()=>[]}},emits:["update:headers"],setup(v,{expose:y,emit:$}){const l=v,_=x(),u=x(),k=[{title:"KEY",dataIndex:"key"},{title:"VALUE",dataIndex:"value"},{title:"操作",dataIndex:"operation",width:80,fixed:"right"}],p=e=>e.map(a=>({...a,_key:b()})),t=D({table:l.headers.length>0?p(l.headers):[]});J(()=>JSON.stringify(l.headers),()=>{t.table=p(l.headers)});const g=e=>{const a=t.table.findIndex(n=>n.id===e);t.table.splice(a,1)},I=()=>{_.value=t.table.map(e=>{const{_key:a,...n}=e;return n})},w=()=>{t.table.push({_key:b(),key:"",value:""})};return y({validate:()=>new Promise((e,a)=>{t.table?u.value.validate().then(()=>{I(),e(_.value)}).catch(n=>{console.log(n),a(!1)}):e([])})}),(e,a)=>{const n=N,C=U,m=A,E=F,T=O;return c(),K("div",R,[s(T,{model:r(t).table,ref_key:"tableRef",ref:u},{default:d(()=>[s(E,{columns:k,"data-source":r(t).table,bordered:"",pagination:!1,rowKey:"_key"},{bodyCell:d(({column:o,text:H,record:i,index:j})=>[["key","value"].includes(o.dataIndex)?(c(),h(C,{key:0,name:[j,o.dataIndex],rules:[{max:64,message:"最多可输入64个字符"},{required:!0,message:`请输入${o.title}`,trigger:"blur"}]},{default:d(()=>[s(n,{value:i[o.dataIndex],"onUpdate:value":f=>i[o.dataIndex]=f},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"])):o.dataIndex==="operation"?(c(),h(m,{key:1,type:"text"},{icon:d(()=>[s(r(V),{onClick:f=>g(i.id)},null,8,["onClick"])]),_:2},1024)):L("",!0)]),_:1},8,["data-source"]),s(m,{type:"dashed",onClick:w,style:{width:"100%","margin-top":"5px"}},{icon:d(()=>[s(r(B))]),default:d(()=>[P(" 添加 ")]),_:1})]),_:1},8,["model"])])}}});const ee=S(Z,[["__scopeId","data-v-e125bd75"]]);export{ee as default};
