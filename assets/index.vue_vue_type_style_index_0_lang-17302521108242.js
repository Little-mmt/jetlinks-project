import{a4 as j,au as $,eJ as L,d as w,a3 as B,aa as D}from"./index-1730252110824.js";import"./index-1730252110824278.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./index-1730252110824282.js";import"./index-1730252110824283.js";import{u as N}from"./instance-1730252110824.js";import{J as V}from"./vue-json-viewer-1730252110824.js";import{d as Y,k as p,s as A,ab as f,U as M,Z as O,f as n,u as s,a8 as P,a1 as F,X as o,_ as H,$ as S,E as I,G as R,F as U}from"./vue-1730252110824.js";const q=["onClick"],se=Y({__name:"index",props:{data:{type:Object,default:()=>{}}},setup(C){const v=C,T=N(),y=[{title:"时间",dataIndex:"timestamp",key:"timestamp",scopedSlots:!0,search:{type:"date"}},{title:"操作",dataIndex:"action",key:"action",scopedSlots:!0}],r=p([...y]),x=p({}),c=p(!1),h=p({}),k=p([]),E=a=>L(T.current.id||"",v.data.id||"",a);A(()=>{var a,l,d;r.value=[...y],((l=(a=v.data)==null?void 0:a.valueType)==null?void 0:l.type)==="object"?j(((d=v.data.valueType)==null?void 0:d.properties)||[]).reverse().map(e=>{var i,u,m;((i=e.valueType)==null?void 0:i.type)==="object"?(k.value.push({key:e.id,dataIndex:`${e.id}_format`}),r.value.splice(0,0,{key:e.id,title:e.name,dataIndex:`${e.id}_format`,search:{type:((u=e==null?void 0:e.valueType)==null?void 0:u.type)||"string",rename:e.id},scopedSlots:!0})):r.value.splice(0,0,{key:e.id,title:e.name,dataIndex:`${e.id}_format`,search:{type:((m=e==null?void 0:e.valueType)==null?void 0:m.type)||"string",rename:e.id},ellipsis:!0,scopedSlots:!0})}):r.value.splice(0,0,{title:"数据",dataIndex:"value"})});const J=a=>{x.value=a},g=a=>{h.value=a,c.value=!0};return(a,l)=>{const d=f("pro-search"),b=f("Ellipsis"),e=f("AIcon"),i=w,u=B,m=D;return M(),O(U,null,[n(d,{class:"device-running-search",columns:s(r),target:"device-instance-running-events",onSearch:J},null,8,["columns"]),n(u,{ref:"eventsRef",columns:s(r),request:E,model:"TABLE",params:s(x),bodyStyle:{padding:"0 0 0 24px"}},P({timestamp:o(t=>[I(S(s($)(t.timestamp).format("YYYY-MM-DD HH:mm:ss")),1)]),action:o(t=>[n(i,{type:"link",onClick:_=>g(t)},{default:o(()=>[n(e,{type:"SearchOutlined"})]),_:2},1032,["onClick"])]),_:2},[F(s(k),t=>({name:t.key,fn:o(_=>[n(b,null,{default:o(()=>[H("span",{onClick:G=>g(_[t.dataIndex])},S(JSON.stringify(_[t.dataIndex])),9,q)]),_:2},1024)])}))]),1032,["columns","params"]),n(m,{width:600,visible:s(c),"onUpdate:visible":l[1]||(l[1]=t=>R(c)?c.value=t:null),title:"详情",class:"device-running-event-modal"},{footer:o(()=>[n(i,{type:"primary",onClick:l[0]||(l[0]=t=>c.value=!1)},{default:o(()=>[I("关闭")]),_:1})]),default:o(()=>[n(s(V),{value:s(h),style:{"max-height":"calc(100vh - 400px)",overflow:"auto"}},null,8,["value"])]),_:1},8,["visible"])],64)}}});export{se as _};
