import{X as z,h as Z,ax as L,o as v,Z as M,$ as X,a0 as U,a1 as W,a2 as G,e as K,a3 as Q,g as Y}from"./index-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import{q as ee,b as te,h as oe,a as ne,i as se}from"./type-17316389209644.js";import{d as B,k as w,ab as y,U as h,V as S,X as e,_ as u,f as a,u as I,E as _,W as ae,R as ie,$ as p,Z as O,F as E,a1 as le,af as ce,ag as re}from"./vue-1731638920964.js";const D=g=>(ce("data-v-d5d65ad9"),g=g(),re(),g),de=["src"],pe={class:"card-item-content"},ue={style:{"font-size":"18px","font-weight":"800","line-height":"22px"}},_e=D(()=>u("div",{class:"card-item-content-text-title"}," 类型 ",-1)),me={class:"card-item-content-text"},fe=D(()=>u("div",{class:"card-item-content-text-title"}," 详情 ",-1)),ye={class:"card-item-content-text"},he=B({name:"TypePage"}),ge=B({...he,setup(g){const b=z(),x=w({}),T=w({}),$=w([]),P=[{title:"名称",dataIndex:"name",key:"name",ellipsis:!0,width:250,fixed:"left",search:{type:"string"}},{title:"类型",dataIndex:"type",key:"type",ellipsis:!0,width:150,search:{type:"select",options:async()=>{const n=await te();return $.value=n.result.map(m=>({value:m.id,label:m.name}))}},scopedSlots:!0},{title:"集群",dataIndex:"shareCluster",key:"shareCluster",width:120,ellipsis:!0,scopedSlots:!0,search:{type:"select",options:[{label:"共享配置",value:"true"},{label:"独立配置",value:"false"}]}},{title:"详情",dataIndex:"details",key:"details",ellipsis:!0,scopedSlots:!0},{title:"状态",dataIndex:"state",key:"state",width:100,ellipsis:!0,scopedSlots:!0,search:{type:"select",options:[{label:"正常",value:"enabled"},{label:"禁用",value:"disabled"}]}},{title:"说明",dataIndex:"description",key:"description",ellipsis:!0,search:{type:"string"}},{title:"操作",key:"action",fixed:"right",width:200,scopedSlots:!0}],j=(n,m)=>{if(!n)return[];const r=n.state.value,l=r==="enabled"?"禁用":"启用",s=[{key:"view",text:"查看",tooltip:{title:"查看"},icon:"EyeOutlined",onClick:async()=>{H(n.id)}},{key:"update",text:"编辑",tooltip:{title:"编辑"},icon:"EditOutlined",onClick:()=>{J(n.id)}},{key:"action",text:l,tooltip:{title:l,placement:"topRight"},icon:r==="enabled"?"StopOutlined":"CheckCircleOutlined",popConfirm:{title:`确认${l}?`,onConfirm:()=>{let i=r==="enabled"?oe(n.id):ne(n.id);return i.then(c=>{var d;c.success&&(v("操作成功","success"),(d=x.value)==null||d.reload())}),i}}},{key:"delete",text:"删除",disabled:r==="enabled",tooltip:{title:r==="enabled"?"请先禁用该组件，再删除。":"删除"},popConfirm:{title:"确认删除?",onConfirm:()=>{const i=se(n.id);return i.then(c=>{c.status===200?(v("操作成功","success"),x.value.reload()):v(c==null?void 0:c.message,"error")}),i}},icon:"DeleteOutlined"}];return m==="table"?s:s.filter(i=>i.key!=="view")},A=()=>{b.jumpPage("link/Type/Detail",{id:":id"},{view:!1})},H=n=>{b.jumpPage("link/Type/Detail",{id:n},{view:!0})},J=n=>{b.jumpPage("link/Type/Detail",{id:n},{view:!1})},C=n=>{const{typeObject:m,shareCluster:r,configuration:l,cluster:s}=n,i=m.name.replace(/[^j-zA-Z]/g,"").toLowerCase()+"://",c=r?(l.publicHost||l.remoteHost)+":"+(l.publicPort||l.remotePort):(s[0].configuration.publicHost||s[0].configuration.remoteHost)+":"+(s[0].configuration.publicPort||s[0].configuration.remotePort);let d="远程:";if(r?l.publicHost&&(d="公网:"):s[0].configuration.publicHos&&(d="公网:"),!r&&s.length>1){const k=(s[0].configuration.publicHost||s[0].configuration.remoteHost)+":"+(s[0].configuration.publicPort||s[0].configuration.remotePort);let f="远程";return s[0].configuration.publicHos&&(f="公网:"),s.length>2?d+i+c+" "+f+i+k+"。。。":d+i+c+" "+f+i+k}return d+i+c},N=n=>{T.value=n};return(n,m)=>{const r=y("pro-search"),l=y("AIcon"),s=M,i=y("Ellipsis"),c=X,d=U,k=W,f=G,R=K,q=Q,F=y("FullPage"),V=y("page-container");return h(),S(V,null,{default:e(()=>[u("div",null,[a(r,{columns:P,target:"search-type",onSearch:N}),a(F,null,{default:e(()=>[a(q,{ref_key:"tableRef",ref:x,columns:P,gridColumn:3,request:I(ee),defaultParams:{sorts:[{name:"createTime",order:"desc"}]},params:I(T)},{headerTitle:e(()=>[a(s,{type:"primary",onClick:A,hasPermission:"link/Type:add"},{icon:e(()=>[a(l,{type:"PlusOutlined"})]),default:e(()=>[_(" 新增 ")]),_:1})]),card:e(t=>[a(f,ae({showStatus:!0,value:t,actions:j(t,"card")},t,{status:t.state.value,statusText:t.state.text,statusNames:{enabled:"processing",disabled:"error"},onClick:o=>H(t.id)}),{img:e(()=>[ie(n.$slots,"img",{},()=>[u("img",{src:I(Z)("/network.png")},null,8,de)],!0)]),content:e(()=>[u("div",pe,[a(i,{style:{width:"calc(100% - 100px)","margin-bottom":"20px"}},{default:e(()=>[u("span",ue,p(t.name),1)]),_:2},1024),a(k,{class:"card-item-content-box"},{default:e(()=>[a(d,{span:8},{default:e(()=>[_e,u("div",me,[a(c,null,{title:e(()=>[_(p(t.type),1)]),default:e(()=>[_(" "+p(t.type),1)]),_:2},1024)])]),_:2},1024),a(d,{span:16},{default:e(()=>[fe,u("div",ye,[a(c,null,{title:e(()=>[_(p(C(t)),1)]),default:e(()=>[_(" "+p(C(t)),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024)])]),actions:e(o=>[a(s,{disabled:o.disabled,popConfirm:o.popConfirm,tooltip:{...o.tooltip},onClick:o.onClick,hasPermission:"link/Type:"+o.key},{default:e(()=>[o.key==="delete"?(h(),S(l,{key:0,type:"DeleteOutlined"})):(h(),O(E,{key:1},[a(l,{type:o.icon},null,8,["type"]),u("span",null,p(o==null?void 0:o.text),1)],64))]),_:2},1032,["disabled","popConfirm","tooltip","onClick","hasPermission"])]),_:2},1040,["value","actions","status","statusText","onClick"])]),action:e(t=>[a(R,{size:16},{default:e(()=>[(h(!0),O(E,null,le(j(t,"table"),o=>(h(),S(s,{key:o.key,disabled:o.disabled,popConfirm:o.popConfirm,tooltip:{...o.tooltip},style:{padding:"0px"},onClick:o.onClick,type:"link",danger:o.key==="delete",hasPermission:"link/Type:"+o.key},{icon:e(()=>[a(l,{type:o.icon},null,8,["type"])]),_:2},1032,["disabled","popConfirm","tooltip","onClick","danger","hasPermission"]))),128))]),_:2},1024)]),state:e(t=>[a(L,{text:t.state.text,status:t.state.value,statusNames:{enabled:"processing",disabled:"error"}},null,8,["text","status"])]),shareCluster:e(t=>[_(p(t.shareCluster===!0?"共享配置":"独立配置"),1)]),type:e(t=>[_(p(t.typeObject.name),1)]),details:e(t=>[_(p(C(t)),1)]),_:3},8,["request","params"])]),_:3})])]),_:3})}}});const Pe=Y(ge,[["__scopeId","data-v-d5d65ad9"]]);export{Pe as default};
