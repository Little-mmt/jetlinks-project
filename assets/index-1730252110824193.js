import{f as u,E as l,d as tu,ad as fu,ac as Cu,k as _,w as K,s as cu,ab as X,U as d,V as A,X as n,u as t,Z as D,F as f,a1 as I,$ as h,Y as g,_ as m,G as yu}from"./vue-1730252110824.js";import{h as k,du as U,F as Z,ap as bu,T as z,L as _u,o as ku,aD as hu,a6 as Tu,v as wu,I as Iu,fJ as xu,$ as Uu,a0 as ju,a1 as Nu,as as Pu,a7 as Ou,a9 as qu,dD as Su,aK as $u,d as Lu,aI as Ru}from"./index-1730252110824.js";import"./index-1730252110824288.js";import"./index-1730252110824279.js";import{M as Qu,N as Mu,R as Vu,V as Wu,T as uu}from"./const-17302521108242.js";import{T as x}from"./template-1730252110824.js";import"./index-1730252110824308.js";import{M as Hu}from"./index-1730252110824305.js";import Ju from"./Attachments-1730252110824.js";import Yu from"./VariableDefinitions-1730252110824.js";import{_ as eu}from"./ToUser.vue_vue_type_script_setup_true_lang-1730252110824.js";import{_ as lu}from"./ToOrg.vue_vue_type_script_setup_true_lang-1730252110824.js";import{_ as Gu}from"./ToTag.vue_vue_type_script_setup_true_lang-1730252110824.js";import{p as L}from"./validate-1730252110824.js";import"./index-1730252110824282.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import"./regular-1730252110824.js";const Ku=()=>{const C=k("/notice/doc/template/dingTalk-message/01-Agentid.jpg"),y="{name}";return u("div",{class:"doc"},[u("div",{class:"url"},[l("钉钉开放平台："),u("a",{href:"https://open-dev.dingtalk.com",target:"_blank",rel:"noopener noreferrer"},[l("https://open-dev.dingtalk.com")]),u("br",null,null),l("钉钉管理后台："),u("a",{href:"https://www.dingtalk.com",target:"_blank",rel:"noopener noreferrer"},[l("https://www.dingtalk.com")])]),u("h1",null,[l("1. 概述")]),u("div",null,[l("通知模板结合通知配置为告警消息通知提供支撑。通知模板只能调用同一类型的通知配置服务。"),u("div",null,[l("使用钉钉消息通知时需在钉钉开放平台中创建好对应的应用")])]),u("h1",null,[l(" 2.模板配置说明")]),u("h2",null,[l(" 1、绑定配置")]),u("div",null,[l(" 使用固定的通知配置发送此通知模板")]),u("h2",null,[l(" 2、Agentid")]),u("div",null,[l(" 应用唯一标识")]),u("div",null,[l(" 获取路径：“钉钉开放平台”--“应用开发”--“查看应用”")]),u("div",{class:"image"},[u(U,{width:"100%",src:C},null)]),u("h2",null,[l(" 3、收信人、收信部门")]),u("div",null,[l("若不填写收信人，则在模板调试和配置告警通知时手动填写。")]),u("h2",null,[l(" 4、模板内容")]),u("div",null,[l("支持填写带变量的动态模板。变量填写规范示例：$"),y,l("。填写动态参数后，可对变量的名称、类型、格式进行配置，以便告警通知时填写。")])])},Xu=Ku,Zu=()=>{const C="{name}";return u("div",{class:"doc"},[u("div",{class:"url"},[l("钉钉开放平台："),u("a",{href:"https://open-dev.dingtalk.com",target:"_blank",rel:"noopener noreferrer"},[l("https://open-dev.dingtalk.com")])]),u("h1",null,[l("1. 概述")]),u("div",null,[l("通知模板结合通知配置为告警消息通知提供支撑。通知模板只能调用同一类型的通知配置服务。")]),u("div",null,[l("使用钉钉群机器人消息通知时需在钉钉开放平台中创建好对应的机器人，再到钉钉客户端在对应的群中绑定智能机器人。")]),u("h1",null,[l("2.模板配置说明")]),u("div",null,[u("h2",null,[l(" 1、绑定配置")]),u("div",null,[l(" 使用固定的通知配置发送此通知模板")]),u("h2",null,[l(" 2、消息类型")]),u("div",null,[l(" 目前支持text、markdown、link3种。")]),u("h2",null,[l(" 3、模板内容")]),u("div",null,[l("支持填写带变量的动态模板。变量填写规范示例：$"),C,l("。填写动态参数后，可对变量的名称、类型、格式进行配置，以便告警通知时填写。")])])])},zu=Zu,ue=()=>u("div",{class:"doc"},[u("div",{class:"url"},[l("阿里云短信服务平台："),u("a",{href:"https://dysms.console.aliyun.com",target:"_blank",rel:"noopener noreferrer"},[l("https://dysms.console.aliyun.com")])]),u("h1",null,[l("1. 概述")]),u("div",null,[l("通知模板结合通知配置为告警消息通知提供支撑。通知模板只能调用同一类型的通知配置服务。 使用阿里云短信时需先在阿里云短信服务平台创建短信模板。")]),u("h1",null,[l("2.模板配置说明")]),u("div",null,[u("h2",null,[l(" 1、绑定配置")]),u("div",null,[l(" 使用固定的通知配置发送此通知模板")]),u("h2",null,[l(" 2、模板")]),u("div",null,[l(" 阿里云短信平台自定义的模板名称")]),u("h2",null,[l(" 3、收信人")]),u("div",null,[" ",l("当前仅支持国内手机号，此处若不填，则在模板调试和配置告警通知时手动填写")]),u("h2",null,[l(" 4、签名")]),u("div",null,[l(" 用于短信内容签名信息显示，需在阿里云短信进行配置。")]),u("h2",null,[l(" 5、变量属性")]),u("div",null,[l("需要在当前页面手动设置与阿里云短信模板中一样的变量，否则会导致发送异常。")])])]),ee=ue,le=()=>u("div",{class:"doc"},[u("div",{class:"url"},[l("阿里云语音服务平台："),u("a",{href:"https://account.console.aliyun.com",target:"_blank",rel:"noopener noreferrer"},[l("https://account.console.aliyun.com")])]),u("h1",null,[l("1. 概述")]),u("div",null,[l("通知模板结合通知配置为告警消息通知提供支撑。通知模板只能调用同一类型的通知配置服务。 使用阿里云语音时需先在阿里云语音服务平台创建语音模板。")]),u("h1",null,[l("2.模板配置说明")]),u("div",null,[u("h2",null,[l("1、绑定配置")]),u("div",null,[l(" 使用固定的通知配置发送此通知模板")]),u("h2",null,[l("2、类型")]),u("div",null,[l(" 阿里云语音通知类型，当类型为验证码类型时可配置变量。")]),u("h2",null,[l(" 3、模板ID/语音ID")]),u("div",null,[l(" 阿里云语音对每一条语音验证码/语音通知分配的唯一ID标识")]),u("h2",null,[l(" 4、被叫号码")]),u("div",null,[l(" 当前仅支持国内手机号，此处若不填，则在模板调试和配置告警通知时手动填写。")]),u("h2",null,[l(" 5、被叫显号")]),u("div",null,[l(" 用户呼叫号码显示，必须是在阿里云购买的号码。")]),u("div",null,[l("若您使用的语音通知文件为公共模式外呼，则该参数值不填。")]),u("div",null,[l("若您使用的语音通知文件为专属模式外呼，则必须传入已购买的号码，仅支持一个号码。")]),u("h2",null,[l(" 6、播放次数")]),u("div",null,[l(" 最多可播放3次")]),u("h2",null,[l(" 7、模板内容")]),u("div",null,[l("仅当通知类型为验证码类型时可进行配置，变量标识需要阿里云模板中的标识一致，支持填写带变量的动态模板。 变量填写规范示例：$"),"{name}",l("。填写动态参数后，可对变量的名称、类型、格式进行配置，以便告警通知是填写。")])])]),te=le,ae=()=>{const C="{标题}",y="{name}";return u("div",{class:"doc"},[u("h1",null,[l("1. 概述")]),u("div",null,[l("通知模板结合通知配置为告警消息通知提供支撑。通知模板只能调用同一类型的通知配置服务。 服务器地址支持自定义输入。")]),u("h1",null,[l("2.模板配置说明")]),u("div",null,[u("h2",null,[l(" 1、标题")]),u("div",null,[l("支持输入变量，变量格式$"),C]),u("h2",null,[l(" 2、收件人")]),u("div",null,[l(" 支持录入多个邮箱地址，可填写变量参数。")]),u("h2",null,[l(" 3、模板内容")]),u("div",null,[l("支持填写带变量的动态模板。变量填写规范示例：$"),y,l("。填写动态参数后，可对变量的名称、类型、格式进行配置，以便告警通知时填写。")])])])},ne=ae,oe=()=>u("div",{class:"doc"},[u("h1",null,[l("1. 概述")]),u("div",null,[l("通知模板结合通知配置为告警消息通知提供支撑。通知模板只能调用同一类型的通知配置服务。")]),u("h1",null,[l("2.模板配置说明")]),u("div",null,[l("1、请求体 请求体中的数据来自于发送通知时指定的所有变量,也可通过自定义的方式进行变量配置。 使用webhook通知时，系统会将该事件通过您指定的URL地址，以POST方式发送。")])]),ie=oe,se=()=>{const C=k("/notice/doc/template/weixin-official/02-mini-Program-Appid.png");return u("div",{class:"doc"},[u("div",{class:"url"},[l("企业微信管理后台："),u("a",{href:"https://work.weixin.qq.com",target:"_blank",rel:"noopener noreferrer"},[l("https://work.weixin.qq.com")])]),u("h1",null,[l("1. 概述")]),u("div",null,[l("通知模板结合通知配置为告警消息通知提供支撑。通知模板只能调用同一类型的通知配置服务。")]),u("h1",null,[l("2.模板配置说明")]),u("div",null,[u("h2",null,[l("1、绑定配置")]),u("div",null,[l("使用固定的通知配置发送此通知模板")])]),u("div",null,[u("h2",null,[l("2、用户标签")]),u("div",null,[l("以标签的维度通知该标签下所有用户")])]),u("div",null,[u("h2",null,[l("3、消息模板")]),u("div",null,[l("微信公众号中配置的消息模板")])]),u("div",null,[u("h2",null,[l("4、模板跳转链接")]),u("div",null,[l("点击消息之后进行页面跳转")])]),u("div",null,[u("h2",null,[l("5、跳转小程序Appid")]),u("div",null,[l("点击消息之后打开对应的小程序")])]),u("div",null,[u("h2",null,[l("6、跳转小程序具体路径")]),u("div",null,[l("点击消息之后跳转到小程序的具体页面")]),u("div",{class:"image"},[u(U,{width:"100%",src:C},null)])]),u("div",null,[u("h2",null,[l("7、模板内容")]),u("div",null,[l("支持填写带变量的动态模板。变量填写规范示例：$"),name,l("。填写动态参数后，可对变量的名称、类型、格式进行配置，以便告警通知时填写。")])])])},de=se,re=()=>{const C=k("/notice/doc/template/weixin-corp/01-Agentid.jpg"),y=k("/notice/doc/template/weixin-corp/02-userID.jpg"),v=k("/notice/doc/template/weixin-corp/03-toDept.jpg"),N=k("/notice/doc/template/weixin-corp/04-toTags.jpg");return u("div",{class:"doc"},[u("div",{class:"url"},[l("企业微信管理后台："),u("a",{href:"https://work.weixin.qq.com",target:"_blank",rel:"noopener noreferrer"},[l("https://work.weixin.qq.com")])]),u("h1",null,[l("1. 概述")]),u("div",null,[l("通知模板结合通知配置为告警消息通知提供支撑。通知模板只能调用同一类型的通知配置服务。")]),u("h1",null,[l("2.模板配置说明")]),u("div",null,[u("h2",null,[l(" 1、绑定配置")]),u("div",null,[l(" 使用固定的通知配置发送此通知模板")]),u("h2",null,[l(" 2、Agentid")]),u("div",null,[l(" 应用唯一标识")]),u("div",null,[l(" 获取路径：“企业微信”管理后台--“应用管理”--“应用”--“查看应用”")]),u("div",{class:"image"},[u(U,{width:"100%",src:C},null)]),u("h2",null,[l(" 3、收信人ID、收信部门ID、标签推送")]),u("div",null,[l("接收通知的3种方式，3个字段若在此页面都没有填写，则在模板调试和配置告警通知时需要手动填写")]),u("div",null,[l(" 收信人ID获取路径：【通讯录】-"),">",l("【成员信息】查看成员账号")]),u("div",null,[l(" 收信组织ID获取路径：【通讯录】-"),">",l("【部门信息】查看部门ID")]),u("div",{class:"image"},[u(U,{width:"100%",src:y},null),u(U,{width:"100%",src:v},null),u(U,{width:"100%",src:N},null)])])])},Fe=re,pe=tu({name:"Doc",props:{docData:{type:Object,default:()=>({})}},setup(C){const y={weixin:{corpMessage:u(Fe,null,null),officialMessage:u(de,null,null)},dingTalk:{dingTalkMessage:u(Xu,null,null),dingTalkRobotWebHook:u(zu,null,null)},voice:{aliyun:u(te,null,null)},sms:{aliyunSms:u(ee,null,null)},email:{embedded:u(ne,null,null)},webhook:{http:u(ie,null,null)}};return()=>{var v;return(v=y==null?void 0:y[C.docData.type])==null?void 0:v[C.docData.provider]}}}),me={key:1,style:{height:"400px"}},je=tu({__name:"index",setup(C){const y=fu(),v=Cu();Z.useForm;const N=_(),T=_(!0),w=_(!1),q=_([{label:"钉钉消息",value:"dingTalkMessage",logo:k("/notice/dingtalk.png")},{label:"群机器人消息",value:"dingTalkRobotWebHook",logo:k("/notice/dingTalk-rebot.png")}]),e=_({template:{subject:"",sendTo:[],attachments:[],message:"",text:""},name:"",type:"email",provider:"embedded",description:"",variableDefinitions:[],configId:""}),R=()=>{var i,a;switch(e.value.template={},e.value.provider){case"dingTalkMessage":e.value.template.agentId=void 0,e.value.template.message=void 0,e.value.template.departmentIdList=void 0,e.value.template.userIdList=void 0;break;case"dingTalkRobotWebHook":e.value.template.message=void 0,e.value.template.messageType="markdown",e.value.template.markdown={text:void 0,title:void 0};break;case"corpMessage":e.value.template.agentId=void 0,e.value.template.message=void 0,e.value.template.toParty=void 0,e.value.template.toUser=void 0,e.value.template.toTag=void 0;break;case"embedded":e.value.template.subject=void 0,e.value.template.message=void 0,e.value.template.text=void 0,e.value.template.sendTo=[],e.value.template.attachments=[];break;case"aliyun":e.value.template.templateType="tts",e.value.template.templateCode=void 0,e.value.template.ttsCode=void 0,e.value.template.ttsmessage=void 0,e.value.template.playTimes=1,e.value.template.calledShowNumbers=void 0,e.value.template.calledNumber=void 0;break;case"aliyunSms":e.value.template.code=void 0,e.value.template.message=void 0,e.value.template.phoneNumber=void 0,e.value.template.signName=void 0;break;case"http":e.value.template.contextAsBody=!0,e.value.template.body=void 0;break}(i=v.query)!=null&&i.notifierId?(e.value.configId=(a=v.query)==null?void 0:a.notifierId,w.value=!0):e.value.configId=void 0,e.value.variableDefinitions=[],Q()};K(()=>e.value.type,i=>{var a,r;q.value=Qu[i],e.value.provider=v.params.id!==":id"?e.value.provider:(r=(a=q.value)==null?void 0:a[0])==null?void 0:r.value,i!=="email"&&V(),i==="sms"&&(H(),Y())});const au={type:[{required:!0,message:"请选择通知方式"}],name:[{required:!0,message:"请输入名称"},{max:64,message:"最多可输入64个字符"}],provider:[{required:!0,message:"请选择类型"}],configId:[{required:!0,message:"请选择绑定配置"}],template:{agentId:[{required:!0,message:"请输入AgentId"},{max:64,message:"最多可输入64个字符"}],messageType:[{required:!0,message:"请选择消息类型"}],markdown:{title:[{required:!0,message:"请输入标题"},{max:64,message:"最多可输入64个字符"}]},link:{title:[{required:!0,message:"请输入标题"},{max:64,message:"最多可输入64个字符"}]},subject:[{required:!0,message:"请输入标题"},{max:64,message:"最多可输入64个字符"}],sendTo:[{validator(i,a){const r=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;let E;return a&&a.some(s=>r.test(s)?!1:(E=s,!0)),E?Promise.reject(E?`${E}邮件格式错误`:""):Promise.resolve()}}],templateType:[{required:!0,message:"请选择类型"}],templateCode:[{required:!0,message:"请输入模板ID"}],calledNumber:[{max:64,message:"最多可输入64个字符"},{validator(i,a){return a?L(a)?Promise.resolve():Promise.reject("请输入有效号码"):Promise.resolve()}}],calledShowNumbers:[{max:64,message:"最多可输入64个字符"},{validator(i,a){return a?L(a)?Promise.resolve():Promise.reject("请输入有效号码"):Promise.resolve()}}],playTimes:[{validator(i,a){return a<1||a>3?Promise.reject("仅支持1～3次"):Promise.resolve()}}],code:[{required:!0,message:"请选择模板"}],signName:[{required:!0,message:"请选择签名"}],phoneNumber:[{max:64,message:"最多可输入64个字符"},{validator(i,a){return a?L(a)?Promise.resolve():Promise.reject("该字段不是有效的手机号"):Promise.resolve()}}],message:[{required:!0,message:"请输入模板内容"},{max:500,message:"最多可输入500个字符"}],ttsmessage:[{max:500,message:"最多可输入500个字符"}]},description:[{max:200,message:"最多可输入200个字符"}]};K([()=>{var i;return(i=e.value.template.markdown)==null?void 0:i.title},()=>{var i;return(i=e.value.template.link)==null?void 0:i.title},()=>e.value.template.subject,()=>e.value.template.message,()=>e.value.template.ttsmessage,()=>e.value.template.body],()=>{iu()});const nu=()=>{e.value.template.ttsmessage=void 0,e.value.variableDefinitions=[]},ou=()=>{var a,r;let i=e.value.template.message;return e.value.provider==="dingTalkRobotWebHook"&&(e.value.template.messageType==="markdown"&&(i+=(a=e.value.template.markdown)==null?void 0:a.title),e.value.template.messageType==="link"&&(i+=(r=e.value.template.link)==null?void 0:r.title)),e.value.provider==="embedded"&&(i+=e.value.template.subject),e.value.provider==="http"&&(i+=e.value.template.body),e.value.provider==="aliyun"&&(i+=e.value.template.ttsmessage),i||""},iu=()=>{var P,p;const i=ou(),a=(P=e.value.variableDefinitions)==null?void 0:P.map(F=>F.id),r=new RegExp("(?<=\\$\\{).*?(?=\\})","g"),E=(p=i.match(r))==null?void 0:p.filter(F=>F),s=[...new Set(E)],B=s==null?void 0:s.map(F=>a.includes(F)?e.value.variableDefinitions.find(c=>c.id===F):{id:F,name:"",type:"string",format:"%s"});e.value.variableDefinitions=B},Q=()=>{e.value.type==="dingTalk"&&(delete e.value.template.markdown,delete e.value.template.link,delete e.value.template.text,e.value.template.messageType==="link"&&(e.value.template.link={title:"",picUrl:"",messageUrl:"",text:e.value.template.message}),e.value.template.messageType==="markdown"&&(e.value.template.markdown={title:"",text:e.value.template.message}),e.value.template.messageType==="text"&&(e.value.template.text={content:e.value.template.message}))};(async()=>{if(v.params.id!==":id"){const i=await x.detail(v.params.id);Object.assign(e.value,i.result),e.value.provider==="aliyun"&&(e.value.template.ttsmessage=i.result.template.message)}})();const M=_(),V=async()=>{const i=[{column:"type$IN",value:e.value.type},{column:"provider",value:e.value.provider}],{result:a}=await x.getConfig({terms:i,sorts:[{name:"createTime",order:"desc"}]});M.value=a},W=()=>{setTimeout(()=>{e.value.template=uu[e.value.type][e.value.provider],R()},0)},su=()=>{e.value.template=uu[e.value.type][e.value.provider],V(),R()},du=i=>{var a;i.file.status==="done"&&(e.value.template.link.picUrl=(a=i.file.response)==null?void 0:a.result)},ru=()=>{H(),Y()},S=_(),H=async()=>{if(!e.value.configId)return;const i=e.value.configId||void 0,a=await x.getAliTemplate(i).catch(()=>{T.value=!1});a.status===200&&(T.value=!0,S.value=a.result)},Fu=()=>{var i;e.value.template.message=(i=S.value.find(a=>e.value.template.code===a.templateCode))==null?void 0:i.templateContent},J=_(),Y=async()=>{if(!e.value.configId)return;const i=e.value.configId||void 0,{result:a}=await x.getSigns(i);J.value=a},$=_(!1),pu=()=>{var i,a;e.value.variableDefinitions.length&&e.value.variableDefinitions.some(r=>!r.name)||(e.value.type==="email"&&(e.value.template.text=e.value.template.message,delete e.value.configId),e.value.template.messageType==="markdown"&&delete e.value.template.link,e.value.template.messageType==="link"&&delete e.value.template.markdown,e.value.provider==="aliyun"&&(e.value.template.ttsCode=e.value.template.templateCode,e.value.template.message=e.value.template.ttsmessage,delete e.value.template.ttsmessage),e.value.provider==="dingTalkRobotWebHook"&&(((i=e.value.template)==null?void 0:i.messageType)==="text"&&(e.value.template.text.content=e.value.template.message),e.value.template.messageType==="markdown"&&(e.value.template.markdown.text=e.value.template.message),e.value.template.messageType==="link"&&(e.value.template.link.text=e.value.template.message)),(a=N.value)==null||a.validate().then(async()=>{var E;$.value=!0;const r=e.value.id?await x.update(e.value):await x.save(e.value);r!=null&&r.success&&(ku("保存成功"),(E=v.query)!=null&&E.notifyType?window.onTabSaveSuccess&&(window.onTabSaveSuccess(r.result),setTimeout(()=>window.close(),300)):y.back())}).catch(r=>{console.log("err: ",r)}).finally(()=>{$.value=!1}))};return cu(()=>{var i,a,r;(i=v.query)!=null&&i.notifyType&&(e.value.type=v.query.notifyType,v.query.notifyType==="dingTalk"?(e.value.provider="dingTalkMessage",w.value=!0):w.value=!1,W()),(a=v.query)!=null&&a.notifierId&&(e.value.configId=(r=v.query)==null?void 0:r.notifierId,w.value=!0)}),(i,a)=>{const r=hu,E=Tu,s=wu,B=Iu,P=xu,p=X("AIcon"),F=Uu,c=ju,j=Nu,mu=Pu,Eu=Ou,O=qu,G=Su,vu=$u,Au=Lu,Du=Z,gu=Ru,Bu=X("page-container");return d(),A(Bu,null,{default:n(()=>[u(gu,null,{default:n(()=>[u(j,null,{default:n(()=>[u(c,{span:10},{default:n(()=>[u(Du,{layout:"vertical",rules:au,ref_key:"formRef",ref:N,model:t(e)},{default:n(()=>[u(s,{label:"通知方式",name:"type"},{default:n(()=>[u(E,{value:t(e).type,"onUpdate:value":a[0]||(a[0]=o=>t(e).type=o),placeholder:"请选择通知方式",disabled:!!t(e).id,onChange:W},{default:n(()=>[(d(!0),D(f,null,I(t(Mu),(o,b)=>(d(),A(r,{key:b,value:o.value},{default:n(()=>[l(h(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1}),u(s,{label:"名称",name:"name"},{default:n(()=>[u(B,{value:t(e).name,"onUpdate:value":a[1]||(a[1]=o=>t(e).name=o),placeholder:"请输入名称"},null,8,["value"])]),_:1}),t(e).type!=="email"&&t(e).type!=="webhook"?(d(),A(s,{key:0,label:"类型",name:"provider"},{default:n(()=>[u(P,{options:t(q),modelValue:t(e).provider,"onUpdate:modelValue":a[2]||(a[2]=o=>t(e).provider=o),onChange:su,disabled:t(w)},null,8,["options","modelValue","disabled"])]),_:1})):g("",!0),t(e).type!=="email"?(d(),A(s,{key:1,name:t(e).provider==="dingTalkRobotWebHook"?"":"configId"},{label:n(()=>[m("span",null,[l(" 绑定配置 "),u(F,{title:"使用固定的通知配置来发送此通知模板"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(E,{value:t(e).configId,"onUpdate:value":a[3]||(a[3]=o=>t(e).configId=o),placeholder:"请选择绑定配置",onChange:ru,disabled:t(w)},{default:n(()=>[(d(!0),D(f,null,I(t(M),(o,b)=>(d(),A(r,{key:b,value:o.id},{default:n(()=>[l(h(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","disabled"])]),_:1},8,["name"])):g("",!0),t(e).type==="dingTalk"?(d(),D(f,{key:2},[t(e).provider==="dingTalkMessage"?(d(),D(f,{key:0},[u(s,{name:["template","agentId"]},{label:n(()=>[m("span",null,[l(" AgentId "),u(F,{title:"应用唯一标识"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(B,{value:t(e).template.agentId,"onUpdate:value":a[4]||(a[4]=o=>t(e).template.agentId=o),placeholder:"请输入AgentId"},null,8,["value"])]),_:1}),u(j,{gutter:10},{default:n(()=>[u(c,{span:12},{default:n(()=>[u(s,{label:"收信人部门"},{default:n(()=>[u(lu,{toParty:t(e).template.departmentIdList,"onUpdate:toParty":a[5]||(a[5]=o=>t(e).template.departmentIdList=o),type:t(e).type,"config-id":t(e).configId},null,8,["toParty","type","config-id"])]),_:1})]),_:1}),u(c,{span:12},{default:n(()=>[u(s,null,{label:n(()=>[m("span",null,[l(" 收信人 "),u(F,{title:"如果不填写该字段，将在使用此模板发送通知时进行指定"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(eu,{toUser:t(e).template.userIdList,"onUpdate:toUser":a[6]||(a[6]=o=>t(e).template.userIdList=o),canSave:t(T),"onUpdate:canSave":a[7]||(a[7]=o=>yu(T)?T.value=o:null),type:t(e).type,"config-id":t(e).configId},null,8,["toUser","canSave","type","config-id"])]),_:1})]),_:1})]),_:1})],64)):g("",!0),t(e).provider==="dingTalkRobotWebHook"?(d(),D(f,{key:1},[u(s,{label:"消息类型",name:["template","messageType"]},{default:n(()=>[u(E,{value:t(e).template.messageType,"onUpdate:value":a[8]||(a[8]=o=>t(e).template.messageType=o),placeholder:"请选择消息类型",onChange:Q},{default:n(()=>[(d(!0),D(f,null,I(t(Vu),(o,b)=>(d(),A(r,{key:b,value:o.value},{default:n(()=>[l(h(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),t(e).template.messageType==="markdown"?(d(),A(s,{key:0,label:"标题",name:["template","markdown","title"]},{default:n(()=>[u(B,{value:t(e).template.markdown.title,"onUpdate:value":a[9]||(a[9]=o=>t(e).template.markdown.title=o),placeholder:"请输入标题"},null,8,["value"])]),_:1})):g("",!0),t(e).template.messageType==="link"?(d(),D(f,{key:1},[u(s,{label:"标题",name:["template","link","title"]},{default:n(()=>[u(B,{value:t(e).template.link.title,"onUpdate:value":a[10]||(a[10]=o=>t(e).template.link.title=o),placeholder:"请输入标题"},null,8,["value"])]),_:1}),u(s,{label:"图片链接"},{default:n(()=>[u(B,{value:t(e).template.link.picUrl,"onUpdate:value":a[12]||(a[12]=o=>t(e).template.link.picUrl=o),placeholder:"请输入图片链接"},{addonAfter:n(()=>[u(mu,{name:"file",action:t(bu),headers:{[t(z)]:t(_u).get(t(z))},showUploadList:!1,onChange:a[11]||(a[11]=o=>du(o))},{default:n(()=>[u(p,{type:"UploadOutlined"})]),_:1},8,["action","headers"])]),_:1},8,["value"])]),_:1}),u(s,{label:"内容链接"},{default:n(()=>[u(B,{value:t(e).template.link.messageUrl,"onUpdate:value":a[13]||(a[13]=o=>t(e).template.link.messageUrl=o),placeholder:"请输入内容链接"},null,8,["value"])]),_:1})],64)):g("",!0)],64)):g("",!0)],64)):g("",!0),t(e).type==="weixin"?(d(),D(f,{key:3},[u(s,{name:["template","agentId"]},{label:n(()=>[m("span",null,[l(" AgentId "),u(F,{title:"应用唯一标识"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(B,{value:t(e).template.agentId,"onUpdate:value":a[14]||(a[14]=o=>t(e).template.agentId=o),placeholder:"请输入AgentId"},null,8,["value"])]),_:1}),u(j,{gutter:10},{default:n(()=>[u(c,{span:12},{default:n(()=>[u(s,null,{label:n(()=>[m("span",null,[l(" 收信人 "),u(F,{title:"如果不填写该字段,将在使用此模板发送通知时进行指定。"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(eu,{toUser:t(e).template.toUser,"onUpdate:toUser":a[15]||(a[15]=o=>t(e).template.toUser=o),type:t(e).type,"config-id":t(e).configId},null,8,["toUser","type","config-id"])]),_:1})]),_:1}),u(c,{span:12},{default:n(()=>[u(s,{label:"收信人部门"},{default:n(()=>[u(lu,{toParty:t(e).template.toParty,"onUpdate:toParty":a[16]||(a[16]=o=>t(e).template.toParty=o),type:t(e).type,"config-id":t(e).configId},null,8,["toParty","type","config-id"])]),_:1})]),_:1})]),_:1}),u(s,null,{label:n(()=>[m("span",null,[l(" 收信人标签 "),u(F,{title:"本企业微信的标签ID列表,最多支持100个,如果不填写该字段,将在使用此模板发送通知时进行指定"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(Gu,{toTag:t(e).template.toTag,"onUpdate:toTag":a[17]||(a[17]=o=>t(e).template.toTag=o),type:t(e).type,"config-id":t(e).configId},null,8,["toTag","type","config-id"])]),_:1})],64)):g("",!0),t(e).type==="email"?(d(),D(f,{key:4},[u(s,{name:["template","subject"]},{label:n(()=>[m("span",null,[l(" 标题 "),u(F,{title:"邮件标题"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(B,{value:t(e).template.subject,"onUpdate:value":a[18]||(a[18]=o=>t(e).template.subject=o),placeholder:"请输入标题"},null,8,["value"])]),_:1}),u(s,{name:["template","sendTo"]},{label:n(()=>[m("span",null,[l(" 收件人 "),u(F,{title:"多个收件人用换行分隔 最大支持1000个号码"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(E,{mode:"tags",value:t(e).template.sendTo,"onUpdate:value":a[19]||(a[19]=o=>t(e).template.sendTo=o),placeholder:"请输入收件人邮箱,多个收件人用换行分隔"},null,8,["value"])]),_:1}),u(s,null,{label:n(()=>[m("span",null,[l(" 附件信息 "),u(F,{title:"附件只输入文件名称将在发送邮件时进行文件上传"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(Ju,{attachments:t(e).template.attachments,"onUpdate:attachments":a[20]||(a[20]=o=>t(e).template.attachments=o)},null,8,["attachments"])]),_:1})],64)):g("",!0),t(e).type==="voice"?(d(),D(f,{key:5},[u(s,{name:["template","templateType"]},{label:n(()=>[m("span",null,[l(" 类型 "),u(F,{title:"语音验证码类型可配置变量，并且只支持数字和英文字母"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(E,{value:t(e).template.templateType,"onUpdate:value":a[21]||(a[21]=o=>t(e).template.templateType=o),placeholder:"请选择类型",onChange:nu},{default:n(()=>[(d(!0),D(f,null,I(t(Wu),(o,b)=>(d(),A(r,{key:b,value:o.value},{default:n(()=>[l(h(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),u(j,{gutter:10},{default:n(()=>[u(c,{span:12},{default:n(()=>[u(s,{name:["template","templateCode"]},{label:n(()=>[m("span",null,[l(h(t(e).template.templateType==="voice"?"语音ID":"模板ID")+" ",1),u(F,{title:"阿里云内部分配的唯一ID标识"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(B,{value:t(e).template.templateCode,"onUpdate:value":a[22]||(a[22]=o=>t(e).template.templateCode=o),placeholder:"请输入模板ID"},null,8,["value"])]),_:1})]),_:1}),u(c,{span:12},{default:n(()=>[u(s,{name:["template","calledNumber"]},{label:n(()=>[m("span",null,[l(" 被叫号码 "),u(F,{title:"仅支持中国大陆号码"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(B,{value:t(e).template.calledNumber,"onUpdate:value":a[23]||(a[23]=o=>t(e).template.calledNumber=o),placeholder:"请输入被叫号码"},null,8,["value"])]),_:1})]),_:1})]),_:1}),u(s,{name:["template","calledShowNumbers"]},{label:n(()=>[m("span",null,[l(" 被叫显号 "),u(F,{title:"必须是已购买的号码,用于呼叫号码显示"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(B,{value:t(e).template.calledShowNumbers,"onUpdate:value":a[24]||(a[24]=o=>t(e).template.calledShowNumbers=o),placeholder:"请输入被叫显号"},null,8,["value"])]),_:1}),u(s,{name:["template","playTimes"]},{label:n(()=>[m("span",null,[l(" 播放次数 "),u(F,{title:"语音文件的播放次数"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(Eu,{value:t(e).template.playTimes,"onUpdate:value":a[25]||(a[25]=o=>t(e).template.playTimes=o),placeholder:"请输入播放次数",style:{width:"100%"}},null,8,["value"])]),_:1}),t(e).template.templateType==="tts"?(d(),A(s,{key:0,name:["template","ttsmessage"]},{label:n(()=>[m("span",null,[l(" 模板内容 "),u(F,{title:"语音验证码内容输入框，用于渲染验语音证码变量。"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(O,{value:t(e).template.ttsmessage,"onUpdate:value":a[26]||(a[26]=o=>t(e).template.ttsmessage=o),rows:5,placeholder:"内容中的变量将用于阿里云语音验证码"},null,8,["value"])]),_:1})):g("",!0)],64)):g("",!0),t(e).type==="sms"?(d(),D(f,{key:6},[u(j,{gutter:10},{default:n(()=>[u(c,{span:12},{default:n(()=>[u(s,{name:["template","code"]},{label:n(()=>[m("span",null,[l(" 模板 "),u(F,{title:"阿里云短信平台自定义的模板名称"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(E,{value:t(e).template.code,"onUpdate:value":a[27]||(a[27]=o=>t(e).template.code=o),placeholder:"请选择模板",onChange:Fu},{default:n(()=>[(d(!0),D(f,null,I(t(S),(o,b)=>(d(),A(r,{key:b,value:o.templateCode},{default:n(()=>[l(h(o.templateName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),u(c,{span:12},{default:n(()=>[u(s,{name:["template","phoneNumber"]},{label:n(()=>[m("span",null,[l(" 收信人 "),u(F,{title:"仅支持中国大陆号码"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(B,{value:t(e).template.phoneNumber,"onUpdate:value":a[28]||(a[28]=o=>t(e).template.phoneNumber=o),placeholder:"请输入收信人"},null,8,["value"])]),_:1})]),_:1})]),_:1}),u(s,{name:["template","signName"]},{label:n(()=>[m("span",null,[l(" 签名 "),u(F,{title:"用于短信内容签名信息显示"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(E,{value:t(e).template.signName,"onUpdate:value":a[29]||(a[29]=o=>t(e).template.signName=o),placeholder:"请选择签名"},{default:n(()=>[(d(!0),D(f,null,I(t(J),(o,b)=>(d(),A(r,{key:b,value:o.signName},{default:n(()=>[l(h(o.signName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})],64)):g("",!0),t(e).type==="webhook"?(d(),A(s,{key:7,label:"请求体"},{default:n(()=>[u(vu,{value:t(e).template.contextAsBody,"onUpdate:value":a[30]||(a[30]=o=>t(e).template.contextAsBody=o),style:{"margin-bottom":"20px"}},{default:n(()=>[u(G,{value:!0},{default:n(()=>[l("默认")]),_:1}),u(G,{value:!1},{default:n(()=>[l("自定义")]),_:1})]),_:1},8,["value"]),t(e).template.contextAsBody?(d(),A(O,{key:0,placeholder:"请求体中的数据来自于发送通知时指定的所有变量",disabled:"",rows:5})):(d(),D("div",me,[u(Hu,{theme:"vs",modelValue:t(e).template.body,"onUpdate:modelValue":a[31]||(a[31]=o=>t(e).template.body=o),language:"JavaScript"},null,8,["modelValue"])]))]),_:1})):g("",!0),t(e).type!=="webhook"&&t(e).type!=="voice"?(d(),A(s,{key:8,name:["template","message"]},{label:n(()=>[m("span",null,[l(" 模板内容 "),u(F,{title:"发送的内容，支持录入变量"},{default:n(()=>[u(p,{type:"QuestionCircleOutlined",style:{"margin-left":"2px"}})]),_:1})])]),default:n(()=>[u(O,{value:t(e).template.message,"onUpdate:value":a[32]||(a[32]=o=>t(e).template.message=o),rows:5,disabled:t(e).type==="sms",placeholder:"变量格式:${name};\r\n    示例:尊敬的${name},${time}有设备触发告警,请注意处理"},null,8,["value","disabled"])]),_:1})):g("",!0),t(e).variableDefinitions&&t(e).variableDefinitions.length?(d(),A(s,{key:9,label:"变量列表"},{default:n(()=>[u(Yu,{variableDefinitions:t(e).variableDefinitions,"onUpdate:variableDefinitions":a[33]||(a[33]=o=>t(e).variableDefinitions=o)},null,8,["variableDefinitions"])]),_:1})):g("",!0),u(s,{label:"说明"},{default:n(()=>[u(O,{value:t(e).description,"onUpdate:value":a[34]||(a[34]=o=>t(e).description=o),"show-count":"",maxlength:200,rows:5,placeholder:"请输入说明"},null,8,["value"])]),_:1}),u(s,null,{default:n(()=>[u(Au,{disabled:!t(T),type:"primary",onClick:pu,loading:t($)},{default:n(()=>[l(" 保存 ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["model"])]),_:1}),u(c,{span:12,push:2},{default:n(()=>[u(t(pe),{docData:t(e)},null,8,["docData"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{je as default};
