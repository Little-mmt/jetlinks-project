import{o as x,K as I,M as B,A as j,d as D,g as K}from"./index-1731638920964.js";import"./index-1731638920964276.js";import M from"./index-1731638920964118.js";import C from"./index-1731638920964121.js";import S from"./index-1731638920964120.js";import G from"./index-1731638920964119.js";import{s as N,g as V}from"./initHome-1731638920964.js";import{d as E,k as i,D as U,U as A,Z as J,_ as e,f as t,X as s,u as d,G as L,E as T,af as X,ag as Z}from"./vue-1731638920964.js";import"./index-1731638920964280.js";import"./baseMenu-1731638920964.js";import"./channel-1731638920964.js";import"./validate-1731638920964.js";import"./regular-1731638920964.js";const a=r=>(X("data-v-abc9acfa"),r=r(),Z(),r),q={class:"page-container"},z=a(()=>e("div",{class:"container-text"},[e("div",{class:"container-title"},"系统初始化")],-1)),F={class:"container-box"},H={class:"container-main"},O={class:"container-right"},P=a(()=>e("span",{class:"title"},"基本信息",-1)),Q=a(()=>e("span",{class:"sub-title"},"配置平台名称、登录背景图、主题色等基本信息",-1)),W=a(()=>e("span",{class:"title"},"菜单初始化",-1)),Y=a(()=>e("span",{class:"sub-title"},"初始化菜单数据",-1)),$=a(()=>e("span",{class:"title"},"角色初始化",-1)),ee=a(()=>e("span",{class:"sub-title"},"初始化内置角色与权限数据",-1)),te=a(()=>e("span",{class:"title"},"初始化数据",-1)),se=a(()=>e("span",{class:"sub-title"},"初始化设备接入示例数据",-1)),ae=E({__name:"index",setup(r){const m=i(),f=i(),v=i(),h=i(),n=i(!1),p=i("1"),R=i(!1),g=()=>{window.location.href="/"},b=async()=>{n.value=!0;const c=await m.value.submitBasic();if(!c){n.value=!1;return}const l=await h.value.updataMenu();if(!l){n.value=!1;return}const o=await f.value.submitRole();if(!o){n.value=!1;return}const _=await f.value.submitRoleGroup();if(!_){n.value=!1;return}const u=await v.value.save();if(!u){n.value=!1;return}n.value=!1,c&&l&&o&&_&&u&&(x("保存成功"),(await N()).status===200&&g())},k=async()=>{const c=await V();c.status===200&&c.result.length};return U(()=>{k()}),(c,l)=>{const o=I,_=B,u=j,y=D;return A(),J("div",q,[z,e("div",F,[e("div",H,[e("div",O,[t(u,{spinning:d(R)},{default:s(()=>[t(_,{activeKey:d(p),"onUpdate:activeKey":l[0]||(l[0]=w=>L(p)?p.value=w:null),accordion:""},{default:s(()=>[t(o,{key:"1"},{header:s(()=>[P,Q]),default:s(()=>[t(M,{ref_key:"basicRef",ref:m},null,512)]),_:1}),t(o,{key:"2",forceRender:""},{header:s(()=>[W,Y]),default:s(()=>[t(S,{ref_key:"menuRef",ref:h},null,512)]),_:1}),t(o,{key:"3",forceRender:""},{header:s(()=>[$,ee]),default:s(()=>[t(C,{ref_key:"roleRef",ref:f},null,512)]),_:1}),t(o,{key:"4",forceRender:""},{header:s(()=>[te,se]),default:s(()=>[t(G,{ref_key:"initDataRef",ref:v},null,512)]),_:1})]),_:1},8,["activeKey"])]),_:1},8,["spinning"]),t(y,{type:"primary",class:"btn-style",onClick:b,loading:d(n)},{default:s(()=>[T("确定")]),_:1},8,["loading"])])])])])}}});const he=K(ae,[["__scopeId","data-v-abc9acfa"]]);export{he as default};
