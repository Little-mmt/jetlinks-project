import{u as g,J as k,d as x,g as I}from"./index-1731638920964.js";import{b as B}from"./notificationSubscription-1731638920964.js";import{d as j,k as w,e as D,o as N,U as l,Z as d,u as s,f as a,X as r,E as c,$ as f,_ as P}from"./vue-1731638920964.js";const T={style:{width:"300px"}},E={key:0,class:"tip"},J={key:1,class:"tip"},U={key:2,class:"tip"},V={key:3,class:"tip"},L={class:"btn"},O=j({__name:"Detail",props:{data:{type:Object,default:()=>{}},current:{type:Object,default:()=>{}}},emits:["infoChange","unsubscribe","bindChange"],setup(v,{emit:_}){const u=v,m=g(),p=w(null),h=D(()=>{var n;return(n=u.current)==null?void 0:n.channelProvider}),C=()=>{var n;["notifier-voice","notifier-sms","notifier-email"].includes((n=u.current)==null?void 0:n.channelProvider)?_("bindChange"):_("infoChange")},b=async()=>{var n;if(!["notifier-voice","notifier-sms","notifier-email"].includes((n=u.current)==null?void 0:n.channelProvider)){const i=await B(),e=((i==null?void 0:i.result)||[]).find(o=>{var t,y;return((y=(t=u.current)==null?void 0:t.channelConfiguration)==null?void 0:y.notifierId)===(o==null?void 0:o.provider)});e&&(p.value=(e==null?void 0:e.providerName)||(e==null?void 0:e.thirdPartyUserId))}};return N(()=>{b()}),(n,i)=>{const e=k,o=x;return l(),d("div",T,[s(h)==="notifier-dingTalk"?(l(),d("div",E,[a(e,{lineClamp:2},{default:r(()=>[c("绑定账号："+f(s(p)),1)]),_:1})])):s(h)==="notifier-weixin"?(l(),d("div",J,[a(e,{lineClamp:2},{default:r(()=>[c("绑定账号："+f(s(p)),1)]),_:1})])):s(h)==="notifier-email"?(l(),d("div",U,[a(e,{lineClamp:2},{default:r(()=>{var t;return[c("绑定账号："+f((t=s(m).userInfos)==null?void 0:t.email),1)]}),_:1})])):(l(),d("div",V,[a(e,{lineClamp:2},{default:r(()=>{var t;return[c("绑定账号："+f((t=s(m).userInfos)==null?void 0:t.telephone),1)]}),_:1})])),P("div",L,[a(o,{onClick:i[0]||(i[0]=t=>_("unsubscribe",v.current))},{default:r(()=>[c("取消订阅")]),_:1}),a(o,{onClick:C,type:"primary"},{default:r(()=>[c("更换绑定账号")]),_:1})])])}}});const X=I(O,[["__scopeId","data-v-44f3e382"]]);export{X as default};
