import{aT as h}from"./index-1730252110824.js";import"./index-1730252110824282.js";import"./index-1730252110824279.js";import"./index-1730252110824280.js";import"./index-1730252110824281.js";import{_ as x}from"./FunctionItem.vue_vue_type_script_setup_true_name_FunctionItem_lang-1730252110824.js";import{d as I,k as v,s as K,U as s,V as y,X as k,Z as m,$ as f,u as U}from"./vue-1730252110824.js";const w={key:0},T={key:1},j=I({__name:"EditTable",props:{value:{type:Array,default:()=>{}},builtInList:{type:Array,default:()=>[]},functions:{type:Array,default:()=>[]},columnMap:{type:Object,default:()=>({})}},emits:["update:value","update:columnMap"],setup(c,{emit:d}){const l=c,_=[{title:"参数名称",dataIndex:"name",with:"33%"},{title:"类型",dataIndex:"valueType",with:"33%"},{title:"值",dataIndex:"value",with:"34%"}],r=v([]),i=v(l.columnMap||{});K(()=>{const p=(l.functions||[]).map(a=>{var t;const u=((t=l.value)==null?void 0:t.find(n=>n.name===(a==null?void 0:a.id)))||{};return{...a,name:u.id,...u.value,name:a.name}});r.value=p});const b=(p,a,u,t)=>{i.value[t.id]=p.source==="fixed"?void 0:a.column;const n=[...r.value].map(e=>({name:e.id,value:{source:e.source,upperKey:e.upperKey||e.value,value:e.value}}));d("update:value",n),d("update:columnMap",i.value)};return(p,a)=>{const u=h;return s(),y(u,{rowKey:"id",columns:_,"data-source":U(r),bordered:"",pagination:!1},{bodyCell:k(({column:t,text:n,record:e})=>[t.dataIndex==="name"?(s(),m("span",w,f(n),1)):t.dataIndex==="valueType"?(s(),m("span",T,f(e.valueType.type),1)):(s(),y(x,{key:2,builtInList:c.builtInList,source:e.source,"onUpdate:source":o=>e.source=o,value:e.value,"onUpdate:value":o=>e.value=o,upperKey:e.upperKey,"onUpdate:upperKey":o=>e.upperKey=o,data:e,onChange:b},null,8,["builtInList","source","onUpdate:source","value","onUpdate:value","upperKey","onUpdate:upperKey","data"]))]),_:1},8,["data-source"])}}});export{j as _};
