import{L as x,T as g,aD as T,a6 as $,v as E,aJ as N,aK as A,F as B,aa as F}from"./index-1731638920964.js";import"./index-1731638920964279.js";import{q as P}from"./product-17316389209644.js";import{p as S}from"./encodeQuery-1731638920964.js";import{d as U,r as V,k as K,w as X,e as q,ab as D,U as i,V as b,X as t,_ as d,f as s,E as r,u as c,Z as I,F as J,a1 as R,$ as M}from"./vue-1731638920964.js";const Q={style:{"background-color":"rgb(236, 237, 238)"}},Y={style:{padding:"10px"}},Z={style:{"margin-top":"20px"}},oe=U({__name:"index",props:{data:{type:Object,default:void 0}},emits:["close"],setup(y,{emit:u}){const m=y,a=V({product:void 0,fileType:"xlsx"}),h=(e,o)=>o.label.toLowerCase().indexOf(e.toLowerCase())>=0,p=K([]);X(()=>m.data,()=>{P({paging:!1}).then(e=>{e.status===200&&(p.value=e.result)})},{immediate:!0,deep:!0}),q(()=>{var e;return console.log(a.product),((e=p.value.find(o=>o.id===a.product))==null?void 0:e.name)||""});const w=async()=>{const e=S(m.data),o=new URLSearchParams;Object.keys(e).forEach(l=>{e[l]&&o.append(l,e[l])});const _=a.product?`${origin}/api/device-instance/${a.product}/export.xlsx?:X_Access_Token=${x.get(g)}&${o}`:`${origin}/api/device-instance/export.xlsx?:X_Access_Token=${x.get(g)}&${o}`;window.open(_),u("close")},k=()=>{u("close")};return(e,o)=>{const _=D("AIcon"),l=T,C=$,f=E,v=N,j=A,O=B,L=F;return i(),b(L,{maskClosable:!1,width:"800px",visible:!0,title:"导出",onOk:w,onCancel:k},{default:t(()=>[d("div",Q,[d("p",Y,[s(_,{type:"ExclamationCircleOutlined"}),r(" 选择单个产品时可导出其下属设备的详细数据,不选择产品时导出所有设备的基础数据。 ")])]),d("div",Z,[s(O,{layout:"vertical"},{default:t(()=>[s(f,{label:"产品"},{default:t(()=>[s(C,{"show-search":"","filter-option":h,value:c(a).product,"onUpdate:value":o[0]||(o[0]=n=>c(a).product=n),placeholder:"请选择产品",allowClear:""},{default:t(()=>[(i(!0),I(J,null,R(c(p),n=>(i(),b(l,{value:n.id,key:n.id,label:n.name},{default:t(()=>[r(M(n.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value"])]),_:1}),s(f,{label:"文件格式"},{default:t(()=>[s(j,{"button-style":"solid",value:c(a).fileType,"onUpdate:value":o[1]||(o[1]=n=>c(a).fileType=n),placeholder:"请选择文件格式"},{default:t(()=>[s(v,{value:"xlsx"},{default:t(()=>[r("xlsx")]),_:1}),s(v,{value:"csv"},{default:t(()=>[r("csv")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})])]),_:1})}}});export{oe as _};
