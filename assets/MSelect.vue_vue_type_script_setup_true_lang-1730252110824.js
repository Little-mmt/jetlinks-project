import{dK as C,dL as I,aD as S,a6 as V}from"./index-1730252110824.js";import{d as h,k as u,s as d,U as r,V as i,X as c,Z as k,F as x,a1 as O,u as p,E as L,$ as P,G as b}from"./vue-1730252110824.js";const N=h({__name:"MSelect",props:{modelValue:{type:String,default:void 0},type:{type:String,default:"POINT"},id:{type:String,default:""},edgeId:{type:String,default:""}},emits:["update:modelValue"],setup(f,{emit:m}){const a=f,_=(e,t)=>t.label.toLowerCase().indexOf(e.toLowerCase())>=0,o=u([]),n=u(void 0);d(()=>{n.value=a.modelValue});const g=e=>{m("update:modelValue",e)},v=async e=>{var t;if(e){const l=await C(a.edgeId,{terms:[{terms:[{column:"channelId",value:e}]}]});l.status===200&&(o.value=((t=l.result)==null?void 0:t[0])||[])}else return[]},y=async e=>{var t;if(e){const l=await I(a.edgeId,{terms:[{terms:[{column:"collectorId",value:e}]}]});l.status===200&&(o.value=((t=l.result)==null?void 0:t[0])||[])}else return[]};return d(()=>{a.id?a.type==="POINT"?y(a.id):v(a.id):o.value=[]}),(e,t)=>{const l=S,w=V;return r(),i(w,{allowClear:"",value:p(n),"onUpdate:value":t[0]||(t[0]=s=>b(n)?n.value=s:null),onChange:g,placeholder:"请选择",style:{width:"100%"}},{default:c(()=>[(r(!0),k(x,null,O(p(o),s=>(r(),i(l,{key:s.id,value:s.id,label:s.name,"filter-option":_},{default:c(()=>[L(P(s.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value"])}}});export{N as _};
