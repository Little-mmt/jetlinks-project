import{X as w,I as O,v as V,F as x,aa as C}from"./index-1731638920964.js";import S from"./TriggerWay-1731638920964.js";import{m as F,s as M}from"./scene-1731638920964.js";import{d as U,k as p,r as q,s as B,e as g,U as I,V as R,X as i,f as r,u as o}from"./vue-1731638920964.js";const L=U({__name:"save",props:{data:{type:Object,default:()=>({})}},emits:["close"],setup(_,{emit:f}){const t=_,m=p(!1),v=w(),s=q({name:"",trigger:{type:"device"}}),u=p();B(()=>{Object.assign(s,t.data)});const y=g(()=>{var a;return(a=t.data)!=null&&a.id?"编辑":"新增"}),b=g(()=>{var a;return!!((a=t.data)!=null&&a.id)}),j=async()=>{var a;if(u.value){const e=await u.value.validateFields();let n={...e};t.data.id&&(n={...t.data,name:e.name}),m.value=!0;const l=t.data.id?await F(t.data.id,n):await M(n);if(m.value=!1,l.success){f("close");const c=((a=t.data)==null?void 0:a.id)||l.result.id;v.jumpPage("rule-engine/Scene/Save",{},{triggerType:e.trigger.type,id:c})}}};return(a,e)=>{const n=O,l=V,c=x,k=C;return I(),R(k,{visible:"",title:o(y),width:750,"confirm-loading":o(m),maskClosable:!1,onCancel:e[2]||(e[2]=d=>f("close")),onOk:j},{default:i(()=>[r(c,{layout:"vertical",name:"scene-save",ref_key:"formRef",ref:u,model:o(s)},{default:i(()=>[r(l,{name:"name",label:"名称",rules:[{required:!0,message:"请输入名称"},{max:64,message:"最多输入64个字符"}]},{default:i(()=>[r(n,{value:o(s).name,"onUpdate:value":e[0]||(e[0]=d=>o(s).name=d),placeholder:"请输入名称"},null,8,["value"])]),_:1}),r(l,{name:["trigger","type"],label:"触发方式",rules:[{required:!0,message:"请选择触发方式"}]},{default:i(()=>[r(S,{modelValue:o(s).trigger.type,"onUpdate:modelValue":e[1]||(e[1]=d=>o(s).trigger.type=d),disabled:o(b)},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","confirm-loading"])}}});export{L as _};
