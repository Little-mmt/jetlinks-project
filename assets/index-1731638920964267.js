import{Z as u,o as y,e as C,a3 as N,g as I}from"./index-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import{g as w,E as D,a as g,d as j}from"./EditDialog-17316389209643.js";import{d as x,k as v,r as B,ab as d,U as h,V as b,X as i,_ as E,f as s,u as l,E as V,Y as $}from"./vue-1731638920964.js";const O={class:"relationship-container"},q=x({name:"Relationship"}),A=x({...q,setup(L){const c="system/Relationship",_=[{title:"正向关系名称",dataIndex:"name",key:"name",ellipsis:!0,fixed:"left",search:{type:"string"}},{title:"反向关系名称",dataIndex:"reverseName",key:"reverseName",ellipsis:!0,fixed:"left",search:{type:"string"}},{title:"关联方",dataIndex:"objectTypeName",key:"objectTypeName",ellipsis:!0,fixed:"left",search:{rename:"objectType",type:"select",options:async()=>{var e;return(e=(await g()).result)==null?void 0:e.map(t=>({label:t.name,value:t.id}))}}},{title:"被关联方",dataIndex:"targetTypeName",key:"targetTypeName",ellipsis:!0,fixed:"left",search:{rename:"targetType",type:"select",options:async()=>{var e;return(e=(await g()).result)==null?void 0:e.map(t=>({label:t.name,value:t.id}))}}},{title:"说明",dataIndex:"description",key:"description",ellipsis:!0,fixed:"left",search:{type:"string"}},{title:"操作",dataIndex:"action",key:"action",scopedSlots:!0,width:100}],f=v({}),m=v({}),p={openDialog:(n={})=>{o.selectRow={...n},o.visible=!0},clickDel:n=>{const e=j(n.id);return e.then(t=>{var r;t.status===200?((r=m.value)==null||r.reload(),y("操作成功!")):y(t.message,"error")}),e},refresh:()=>{m.value.reload()}},o=B({selectRow:{},visible:!1});return(n,e)=>{const t=d("pro-search"),r=d("AIcon"),k=C,P=N,R=d("FullPage"),T=d("page-container");return h(),b(T,null,{default:i(()=>[E("div",O,[s(t,{columns:_,target:"system-relationship",onSearch:e[0]||(e[0]=a=>f.value={...a})}),s(R,null,{default:i(()=>[s(P,{ref_key:"tableRef",ref:m,columns:_,request:l(w),model:"TABLE",params:l(f),defaultParams:{sorts:[{name:"createTime",order:"desc"}]}},{headerTitle:i(()=>[s(u,{type:"primary",hasPermission:`${c}:add`,onClick:e[1]||(e[1]=a=>p.openDialog(void 0))},{default:i(()=>[s(r,{type:"PlusOutlined"}),V("新增 ")]),_:1},8,["hasPermission"])]),action:i(a=>[s(k,{size:16},{default:i(()=>[s(u,{hasPermission:`${c}:update`,type:"link",tooltip:{title:"编辑"},onClick:S=>p.openDialog(a)},{default:i(()=>[s(r,{type:"EditOutlined"})]),_:2},1032,["hasPermission","onClick"]),s(u,{danger:!0,hasPermission:`${c}:delete`,type:"link",tooltip:{title:"删除"},popConfirm:{title:"确认删除",onConfirm:()=>p.clickDel(a)},disabled:a.status},{default:i(()=>[s(r,{type:"DeleteOutlined"})]),_:2},1032,["hasPermission","popConfirm","disabled"])]),_:2},1024)]),_:1},8,["request","params"])]),_:1}),l(o).visible?(h(),b(D,{key:0,visible:l(o).visible,"onUpdate:visible":e[2]||(e[2]=a=>l(o).visible=a),data:l(o).selectRow,onRefresh:p.refresh},null,8,["visible","data","onRefresh"])):$("",!0)])]),_:1})}}});const H=I(A,[["__scopeId","data-v-e8e742ed"]]);export{H as default};
