import{C as x,aG as C,d3 as b}from"./index-1731638920964.js";import w from"./Time-1731638920964.js";import{d as g,k as m,r as L,w as A,o as S,U as V,V as j,X as f,_ as u,f as p,E as B}from"./vue-1731638920964.js";const N={style:{display:"flex"}},O={style:{"margin-top":"12px"}},T=g({name:"Setting"}),G=g({...T,props:{data:{type:Object,default:()=>({})},options:{type:Array,default:()=>[]},type:{type:String,default:"auto"},trigger:{type:String,default:"week"}},emits:["save","close"],setup(r,{emit:h}){const c=r,l=m(),o=L({indeterminate:!0,checkAll:!1,checkedList:[]}),d=m(c.data.times||[]),k=n=>{var e,a;const t=(e=l.value)==null?void 0:e.map(s=>s.value);Object.assign(o,{checkedList:n.target.checked?t:[(a=c.data)==null?void 0:a.value],indeterminate:!1})},v=n=>{if(c.type==="auto"){const t=n.map(e=>{var a;if(e.from)return{trigger:c.trigger,when:[(a=c.data)==null?void 0:a.value],from:e.from,to:e.to}});d.value=t}else{const t=n.map(e=>{var s;const a={trigger:c.trigger,when:[(s=c.data)==null?void 0:s.value],mod:e.mod};return e.mod==="period"&&(a.period=e.period),e.mod==="once"&&(a.once=e.once),a});d.value=t}},_=()=>{const n=o.checkedList.filter(t=>t!=="all");h("save",d.value,n)},y=()=>{h("close")};return A(()=>o.checkedList,n=>{o.indeterminate=!!n.length&&n.length<l.value.length,o.checkAll=n.length===l.value.length}),S(()=>{var t;const n=c.options.map(e=>{var a;return{...e,disabled:e.value===((a=c.data)==null?void 0:a.value)}});l.value=n,o.checkedList=[(t=c.data)==null?void 0:t.value]}),(n,t)=>{const e=x,a=C,s=b;return V(),j(s,{maskClosable:!1,width:"750px",visible:!0,title:"设置",onOk:_,onCancel:y},{default:f(()=>[u("div",null,[u("div",N,[p(e,{checked:o.checkAll,"onUpdate:checked":t[0]||(t[0]=i=>o.checkAll=i),indeterminate:o.indeterminate,style:{width:"80px"},onChange:k},{default:f(()=>[B(" 全部 ")]),_:1},8,["checked","indeterminate"]),p(a,{value:o.checkedList,"onUpdate:value":t[1]||(t[1]=i=>o.checkedList=i),options:l.value},null,8,["value","options"])]),u("div",O,[p(w,{type:r.type,value:r.data.times,onChange:v},null,8,["type","value"])])])]),_:1})}}});export{G as _};
