import{g as j,au as K,Z as M,I as q,cY as F,aR as H,ah as S,ai as U}from"./index-1731638920964.js";import"./index-1731638920964300.js";import{_ as Z}from"./index.vue_vue_type_style_index_0_lang-17316389209645.js";import z from"./index-1731638920964180.js";import J from"./index-1731638920964181.js";import{d as X,f as G}from"./auto-1731638920964.js";import{k as r,ac as Q,p as T,o as W,ab as y,U as c,V as w,X as t,_ as b,Z as h,E as u,$ as p,f as a,Y as ee,u as te,a5 as ae,d as oe}from"./vue-1731638920964.js";import"./index-1731638920964306.js";import"./index-1731638920964157.js";import"./Setting.vue_vue_type_script_setup_true_name_Setting_lang-1731638920964.js";import"./Time-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import"./index-1731638920964292.js";import"./index-1731638920964293.js";import"./Bind-17316389209643.js";import"./index-1731638920964158.js";import"./cascade-1731638920964.js";import"./index-1731638920964166.js";import"./index-1731638920964289.js";import"./mediaTool-1731638920964.js";import"./RadioButton-1731638920964.js";import"./channel-17316389209642.js";import"./Share-1731638920964.js";import"./Preset.vue_vue_type_script_setup_true_lang-1731638920964.js";import"./unionBy-1731638920964.js";import"./index-1731638920964186.js";import"./Preview-1731638920964.js";import"./useRequest-1731638920964.js";import"./logView-17316389209642.js";import"./index-1731638920964299.js";import"./vue-json-viewer-1731638920964.js";import"./index-1731638920964307.js";const se={class:"title"},ne={key:0},ie={key:1},le={key:0,class:"tips"},re={style:{padding:"24px",height:"100%"}},ue=oe({name:"Detail"}),me=Object.assign(ue,{setup(ce){const _=r(!1),m=r("Rule"),k=r(!0),s=r({schedules:[],saveDays:"",others:{times:[],trigger:"week"}}),C=Q(),v=r(!1),i=r(),l=r();T("video-tags",{tag:m,terms:[]});const N=[{key:"Rule",tab:"抓拍规则"},{key:"Channel",tab:"关联通道"},{key:"Log",tab:"执行日志"}],P={Rule:Z,Channel:z,Log:J},x=e=>{m.value=e,k.value=!1},D=async e=>{l.value||(e?_.value=e:(v.value=!0,(await X({id:C.params.id,name:i.value,type:"screenshot"}).finally(()=>{v.value=!1,_.value=e})).status===200&&B()))},B=async()=>{var o,d;const e=await G({terms:[{column:"id",termType:"eq",value:C.params.id}]});e.success&&(s.value=Object.assign({schedules:[],saveDays:1,others:{times:[],trigger:"week"}},(o=e.result.data)==null?void 0:o[0]),i.value=(d=s.value)==null?void 0:d.name)},Y=()=>{i.value?i.value.length>64?l.value="最多可输入64位字符":l.value="":l.value="计划名称不能为空"},$=()=>{var e;_.value=!1,l.value="",i.value=(e=s.value)==null?void 0:e.name};return W(()=>{B()}),T("detail",s),(e,o)=>{const d=y("AIcon"),I=M,A=q,R=F,V=H,f=S,E=U,L=y("FullPage"),O=y("page-container");return c(),w(O,{tabList:N,showBack:!0,tabActiveKey:m.value,onTabChange:x},{title:t(()=>{var n;return[b("div",se,[_.value?(c(),h("div",ie,[a(V,null,{default:t(()=>[b("div",null,[a(A,{value:i.value,"onUpdate:value":o[1]||(o[1]=g=>i.value=g),onChange:Y},null,8,["value"]),l.value?(c(),h("div",le,p(l.value),1)):ee("",!0)]),a(R,{onClick:$},{default:t(()=>[u("取消")]),_:1}),a(I,{type:"primary",onClick:o[2]||(o[2]=g=>D(!1))},{default:t(()=>[u("确认")]),_:1})]),_:1})])):(c(),h("div",ne,[u(p(((n=s.value)==null?void 0:n.name)||"-")+" ",1),a(I,{type:"link",hasPermission:!0,loading:v.value,onClick:o[0]||(o[0]=g=>D(!0))},{default:t(()=>[a(d,{type:"EditOutlined"})]),_:1},8,["loading"])]))])]}),content:t(()=>[a(E,{size:"small",column:4},{default:t(()=>[a(f,{label:"计划ID"},{default:t(()=>{var n;return[u(p((n=s.value)==null?void 0:n.id),1)]}),_:1}),a(f,{label:"创建人"},{default:t(()=>[u(p(s.value.creatorName),1)]),_:1}),a(f,{label:"创建时间"},{default:t(()=>{var n;return[u(p((n=s.value)!=null&&n.createTime?te(K)(s.value.createTime).format("YYYY-MM-DD HH:mm:ss"):""),1)]}),_:1})]),_:1})]),default:t(()=>[a(L,null,{default:t(()=>[b("div",re,[(c(),w(ae(P[m.value]),{onOnJump:x,key:m.value,first:k.value},null,40,["first"]))])]),_:1})]),_:1},8,["tabActiveKey"])}}}),Je=j(me,[["__scopeId","data-v-b27c7afc"]]);export{Je as default};
