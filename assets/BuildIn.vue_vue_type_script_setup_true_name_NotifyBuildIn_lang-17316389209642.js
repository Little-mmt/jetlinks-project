import{a6 as I,fz as Y,dj as D,a7 as K,I as N,fI as B}from"./index-1731638920964.js";import{a as H}from"./noticeRule-1731638920964.js";import{d as k,e as M,k as w,w as b,U as o,V as s,X as F,f as O,u as v,G as V,Z as S,F as U}from"./vue-1731638920964.js";const $=k({name:"NotifyBuildIn"}),G=k({...$,props:{value:{type:Object,default:()=>({source:"fixed",value:void 0,upperKey:void 0})},item:{type:Object,default:()=>{}},name:{type:Number,default:0},providerId:{type:String,default:""}},emits:["update:value"],setup(l,{emit:m}){var y;const u=l,f=M(()=>{var e;return((e=u.value)==null?void 0:e.source)||"fixed"}),_=w([]),p=w((y=u.value)==null?void 0:y.upperKey),x=e=>{m("update:value",{...u.value,source:e,value:void 0})},i=(e,a)=>{m("update:value",{...u.value,value:e,upperKey:a})};return b(()=>f.value,e=>{e==="upper"&&H(u.providerId).then(r=>{if(r.status===200){const c=[...new Set(r.result.map(t=>t==null?void 0:t.id)).values()].map(t=>r.result.reverse().find(d=>d.id===t));_.value=c.map(t=>({...t,id:"detail."+t.id}))}})},{deep:!0,immediate:!0}),b(()=>u.value.upperKey,e=>{p.value=e},{immediate:!0}),(e,a)=>{const r=I,g=Y,c=D,t=K,h=N,d=B;return o(),s(d,{compact:""},{default:F(()=>{var C;return[O(r,{options:[{label:"手动输入",value:"fixed"},{label:"内置参数",value:"upper"}],style:{width:"120px"},value:(C=l.value)==null?void 0:C.source,onChange:x},null,8,["value"]),v(f)==="upper"?(o(),s(g,{key:0,value:v(p),"onUpdate:value":a[0]||(a[0]=n=>V(p)?p.value=n:null),treeData:v(_),placeholder:"请选择参数",style:{width:"calc(100% - 120px)"},fieldNames:{label:"name",value:"id"},onChange:a[1]||(a[1]=n=>i(void 0,n))},null,8,["value","treeData"])):(o(),S(U,{key:1},[l.item.type==="date"?(o(),s(c,{key:0,value:l.value.value,allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD HH:mm:ss",style:{width:"calc(100% - 120px)"},onChange:a[2]||(a[2]=(n,j)=>i(j))},null,8,["value"])):l.item.type==="number"?(o(),s(t,{key:1,value:l.value.value,allowClear:"",style:{width:"calc(100% - 120px)"},placeholder:`请输入${l.item.name}`,onChange:i},null,8,["value","placeholder"])):(o(),s(h,{key:2,value:l.value.value,allowClear:"",style:{width:"calc(100% - 120px)"},placeholder:`请输入${l.item.name}`,onChange:a[3]||(a[3]=n=>i(n.target.value))},null,8,["value","placeholder"]))],64))]}),_:1})}}});export{G as _};
