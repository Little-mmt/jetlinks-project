import{d as x,k as c,w as M,ab as U,U as t,Z as o,_ as u,a0 as h,f as V,X as I,u as a,F as _,B as L,V as b,Y as p,W as O}from"./vue-1731638920964.js";import{ap as E,T as S,L as N,aq as T,o as g,ar as j,as as A,g as F}from"./index-1731638920964.js";const P={class:"upload-image-warp"},$=["src"],D={key:0,class:"upload-image-mask"},K=["onClick"],Y={key:0,class:"upload-loading-mask"},q={key:1,class:"upload-loading-mask"},J=x({name:"JProUpload"}),W=x({...J,props:{modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1},accept:{type:String,default:void 0},borderStyle:{type:Object,default:void 0},defaultValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(m,{emit:d}){const e=m,f=c(!1),l=c((e==null?void 0:e.modelValue)||""),z=e.types?e.types:["image/jpeg","image/png"],y=c(),i=c(!1);M(()=>e.modelValue,s=>{l.value=s},{deep:!0,immediate:!0});const w=()=>{d("update:modelValue",e.defaultValue||""),d("change",e.defaultValue||"")},B=s=>{const r=z.includes(s.type),n=e.size||2;return r?s.size/1024/1024<n?(j(s,k=>{y.value=k,i.value=!0}),!1):(g(`图片大小必须小于${n}M`,"error"),!1):(e.errorMessage?g(e.errorMessage,"error"):g("请上传正确格式的图片","error"),!1)},C=s=>{i.value=!1,l.value=s,d("update:modelValue",s),d("change",s)};return(s,r)=>{const n=U("AIcon"),v=A;return t(),o(_,null,[u("div",P,[u("div",{class:"upload-image-border",style:h(m.borderStyle)},[V(v,O({name:"file","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,"before-upload":B,action:a(E),headers:{[a(S)]:a(N).get(a(S))}},e),{default:I(()=>[u("div",{class:"upload-image-content",style:h(e.style)},[a(l)?(t(),o(_,{key:0},[u("img",{src:a(l),width:"100%",class:"upload-image"},null,8,$),a(l)===m.defaultValue?(t(),o("div",D,"替换图标")):(t(),o("div",{key:1,onClick:L(w,["stop"]),class:"upload-image-mask"},"删除图标",8,K))],64)):(t(),o(_,{key:1},[a(f)?(t(),b(n,{key:0,type:"LoadingOutlined",style:{"font-size":"20px"}})):p("",!0)],64))],4)]),_:1},16,["action","headers"]),e.disabled?(t(),o("div",Y)):p("",!0),a(l)&&a(f)?(t(),o("div",q,[V(n,{type:"LoadingOutlined",style:{"font-size":"20px"}})])):p("",!0)],4)]),a(i)?(t(),b(T,{key:0,img:a(y),onCancel:r[0]||(r[0]=k=>i.value=!1),onOk:C,title:"更改图标"},null,8,["img"])):p("",!0)],64)}}});const G=F(W,[["__scopeId","data-v-2db3b550"]]);export{G as default};
