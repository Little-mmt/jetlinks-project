import{ek as N,o as O,d as R,$ as S,dw as $,v as E,F as U,el as D}from"./index-1730252110824.js";import"./index-1730252110824302.js";import{u as L}from"./instance-1730252110824.js";import{d as M,k as Q,r as X,s as Y,ab as Z,U as l,V as f,X as s,_ as m,f as u,E as h,u as g,Z as v,F as b,a1 as C,$ as z,Y as G,J as H}from"./vue-1730252110824.js";const K={style:{display:"flex","justify-content":"space-between","align-items":"center"}},P={style:{"margin-right":"5px"}},ne=M({__name:"Save",props:{config:{type:Array,default:[]}},emits:["close","save"],setup(j,{emit:k}){const i=j,y=Q(),p=X({}),_=L(),w=e=>{var n,t,r,c,d;if(e.type.type==="enum")return(((n=e.type)==null?void 0:n.elements)||[]).map(a=>({label:a==null?void 0:a.text,value:a==null?void 0:a.value}));if(e.type.type==="boolean")return[{label:(t=e.type)==null?void 0:t.falseText,value:(r=e.type)==null?void 0:r.falseValue},{label:(c=e.type)==null?void 0:c.trueText,value:(d=e.type)==null?void 0:d.trueValue}]};Y(()=>{var n;const e=(n=_.current)==null?void 0:n.configuration;e&&Object.keys(e).length&&((i==null?void 0:i.config)||[]).map(t=>{Array.isArray(t.properties)&&(t!=null&&t.properties.length)&&t.properties.map(r=>{p[r.property]=e[r.property]})})});const B=()=>{k("close"),y.value.resetFields()},T=()=>{y.value.validate().then(async e=>{var n,t;if(e){const r=H(p);(await N(((n=_.current)==null?void 0:n.id)||"",{id:(t=_.current)==null?void 0:t.id,configuration:{...r}})).status===200&&(O("操作成功！"),k("save"))}})};return(e,n)=>{const t=Z("AIcon"),r=R,c=S,d=$,a=E,q=U,A=D;return l(),f(A,{placement:"right",closable:!1,visible:!0},{title:s(()=>[m("div",K,[m("span",null,[u(t,{type:"CloseOutlined",style:{"margin-right":"5px"},onClick:B}),h("编辑配置")]),u(r,{type:"primary",onClick:T},{default:s(()=>[h("保存")]),_:1})])]),default:s(()=>[u(q,{layout:"vertical",ref_key:"formRef",ref:y,model:g(p)},{default:s(()=>[(l(!0),v(b,null,C(i.config||[],(F,I)=>(l(),v(b,{key:I},[(l(!0),v(b,null,C(F.properties,o=>{var x,V;return l(),f(a,{name:o.property,key:o.property,required:!!((x=o.type.expands)!=null&&x.required),rules:(V=o.type.expands)!=null&&V.required?[{required:!0,message:`请输入${o.name}`}]:[]},{label:s(()=>[m("span",P,z(o.name),1),o.description?(l(),f(c,{key:0,title:o.description},{default:s(()=>[u(t,{type:"QuestionCircleOutlined"})]),_:2},1032,["title"])):G("",!0)]),default:s(()=>[u(d,{modelValue:g(p)[o.property],"onUpdate:modelValue":J=>g(p)[o.property]=J,itemType:o.type.type,options:w(o)},null,8,["modelValue","onUpdate:modelValue","itemType","options"])]),_:2},1032,["name","required","rules"])}),128))],64))),128))]),_:1},8,["model"])]),_:1})}}});export{ne as _};
