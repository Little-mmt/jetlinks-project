import{o as p,I as P,v as U,aJ as C,aK as M,a9 as q,F as L,aa as S}from"./index-1730252110824.js";import"./index-1730252110824279.js";import{i as V}from"./regular-1730252110824.js";import{c as B,v as F}from"./dictionary-1730252110824.js";import{d as J,k as g,r as N,o as O,U as R,V as E,X as n,f as a,u as s,E as v}from"./vue-1730252110824.js";const A=J({__name:"index",props:{type:{type:String,default:"add"},data:{type:Object,default:{}}},emits:["closeSave","success"],setup(d,{emit:c}){const r=d,m=g(!1),_=g(),t=N({id:"",name:"",describe:"",status:1}),b=async(i,e)=>{if(e)if(V(e)){if(r.type==="add"){const l=await F(e);return l.status===200&&l.result?Promise.reject("该字典ID已存在"):Promise.resolve()}}else return Promise.reject("请输入英文或者数字或者-或者_");else return Promise.resolve()},y={id:[{required:!0,message:"请输入ID",trigger:"blur"},{max:64,message:"最多可输入64位字符",trigger:"change"},{validator:(i,e)=>e&&e.length<=64?b(i,e):Promise.reject(),trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{max:64,message:"最多可输入64位字符",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],description:[{max:200,message:"最多可输入200位字符",trigger:"blur"}]},j=()=>{_.value.validate().then(async()=>{m.value=!0,(await B(t)).status===200?(p("保存成功!"),c("success",t.id)):p("操作失败!","error"),m.value=!1})},x=()=>{c("closeSave")};return O(()=>{r.type==="edit"&&r.data&&(t.describe=r.data.describe,t.id=r.data.id,t.name=r.data.name,t.status=r.data.status)}),(i,e)=>{const l=P,u=U,f=C,I=M,k=q,w=L,D=S;return R(),E(D,{title:d.type==="add"?"新增字典":"编辑字典",visible:"",onCancel:x,onOk:j,width:"650px",maskClosable:!1,confirmLoading:s(m)},{default:n(()=>[a(w,{layout:"vertical",rules:y,ref_key:"formRef",ref:_,model:s(t)},{default:n(()=>[a(u,{label:"字典ID",name:"id"},{default:n(()=>[a(l,{value:s(t).id,"onUpdate:value":e[0]||(e[0]=o=>s(t).id=o),disabled:d.type==="edit"},null,8,["value","disabled"])]),_:1}),a(u,{label:"字典名称",name:"name"},{default:n(()=>[a(l,{value:s(t).name,"onUpdate:value":e[1]||(e[1]=o=>s(t).name=o)},null,8,["value"])]),_:1}),a(u,{label:"状态",name:"status"},{default:n(()=>[a(I,{value:s(t).status,"onUpdate:value":e[2]||(e[2]=o=>s(t).status=o)},{default:n(()=>[a(f,{value:1},{default:n(()=>[v("启用")]),_:1}),a(f,{value:0},{default:n(()=>[v("禁用")]),_:1})]),_:1},8,["value"])]),_:1}),a(u,{label:"说明",name:"describe"},{default:n(()=>[a(k,{rows:4,maxlength:200,value:s(t).describe,"onUpdate:value":e[3]||(e[3]=o=>s(t).describe=o)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","confirmLoading"])}}});export{A as _};
