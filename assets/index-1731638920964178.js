import{X as J,h as N,o as S,Z as V,$ as q,a0 as H,a1 as M,a2 as X,a3 as Z,g as z}from"./index-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import{b as U,d as W,e as G,r as K}from"./stream-1731638920964.js";import{d as T,k as I,ab as _,U as v,V as w,X as t,_ as s,f as n,u as b,E as l,W as L,R as Q,$ as c,Z as Y,F as ee,af as te,ag as ne}from"./vue-1731638920964.js";const y=m=>(te("data-v-be9054c8"),m=m(),ne(),m),ae=["src"],oe={class:"card-item-content"},se={style:{"font-size":"18px","font-weight":"800","line-height":"22px"}},ie=y(()=>s("div",{class:"card-item-content-text"}," 服务商 ",-1)),ce={class:"card-item-content-text"},le=y(()=>s("div",{class:"card-item-content-text"}," RTP IP ",-1)),de={class:"card-item-content-text"},re=y(()=>s("div",{class:"card-item-content-text"}," API HOST ",-1)),pe={class:"card-item-content-text"},ue=T({name:"StreamPage"}),_e=T({...ue,setup(m){const h=J(),g=I({}),C=I({}),k=[{title:"名称",dataIndex:"name",key:"name",search:{type:"string"},scopedSlots:!0},{title:"状态",dataIndex:"state",key:"state",search:{type:"select",options:[{label:"禁用",value:"disabled"},{label:"正常",value:"enabled"}]},scopedSlots:!0}],j=a=>{if(!a)return[];const d=a.state.value,p=d==="enabled"?"禁用":"启用";return[{key:"update",text:"编辑",tooltip:{title:"编辑"},icon:"EditOutlined",onClick:()=>{D(a.id)}},{key:"action",text:p,tooltip:{title:p},icon:d==="enabled"?"StopOutlined":"CheckCircleOutlined",popConfirm:{title:`确认${p}?`,onConfirm:()=>{let i=d==="enabled"?W(a.id):G(a.id);return i.then(u=>{var r;u.success&&(S("操作成功","success"),(r=g.value)==null||r.reload())}),i}}},{key:"delete",text:"删除",disabled:d==="enabled",tooltip:{title:d==="enabled"?"正常的流媒体不能删除":"删除"},popConfirm:{title:"确认删除?",onConfirm:()=>{const i=K(a.id);return i.then(u=>{u.success&&(S("操作成功","success"),g.value.reload())}),i}},icon:"DeleteOutlined"}]},B=()=>{h.jumpPage("media/Stream/Detail",{id:":id"},{view:!1})},D=a=>{h.jumpPage("media/Stream/Detail",{id:a},{view:!1})},E=a=>{h.jumpPage("media/Stream/Detail",{id:a},{view:!0})},O=a=>{C.value=a};return(a,d)=>{const p=_("pro-search"),f=_("AIcon"),i=V,u=_("Ellipsis"),r=q,x=H,A=M,P=X,R=Z,$=_("FullPage"),F=_("page-container");return v(),w(F,null,{default:t(()=>[s("div",null,[n(p,{columns:k,target:"search-stream",onSearch:O}),n($,null,{default:t(()=>[n(R,{ref_key:"tableRef",ref:g,model:"CARD",columns:k,gridColumn:2,gridColumns:[1,2],request:b(U),defaultParams:{sorts:[{name:"id",order:"desc"}]},params:b(C)},{headerTitle:t(()=>[n(i,{type:"primary",onClick:B,hasPermission:"media/Stream:add"},{icon:t(()=>[n(f,{type:"PlusOutlined"})]),default:t(()=>[l(" 新增 ")]),_:1})]),card:t(o=>[n(P,L({showStatus:!0,value:o,actions:j(o)},o,{status:o.state.value,statusText:o.state.text,statusNames:{enabled:"processing",disabled:"error"},onClick:e=>E(o.id)}),{img:t(()=>[Q(a.$slots,"img",{},()=>[s("img",{src:b(N)("/stream.png")},null,8,ae)],!0)]),content:t(()=>[s("div",oe,[n(u,{style:{width:"calc(100% - 100px)","margin-bottom":"10px"}},{default:t(()=>[s("span",se,c(o.name),1)]),_:2},1024),n(A,{class:"card-item-content-box"},{default:t(()=>[n(x,{span:8,class:"card-item-content-text"},{default:t(()=>[ie,s("div",ce,[n(r,null,{title:t(()=>[l(c(o.provider),1)]),default:t(()=>[l(" "+c(o.provider),1)]),_:2},1024)])]),_:2},1024),n(x,{span:8},{default:t(()=>[le,s("div",de,[n(r,null,{title:t(()=>{var e;return[l(c((e=o.configuration)==null?void 0:e.rtpIp),1)]}),default:t(()=>{var e;return[l(" "+c((e=o.configuration)==null?void 0:e.rtpIp),1)]}),_:2},1024)])]),_:2},1024),n(x,{span:8},{default:t(()=>[re,s("div",pe,[n(r,null,{title:t(()=>{var e;return[l(c((e=o.configuration)==null?void 0:e.apiHost),1)]}),default:t(()=>{var e;return[l(" "+c((e=o.configuration)==null?void 0:e.apiHost),1)]}),_:2},1024)])]),_:2},1024)]),_:2},1024)])]),actions:t(e=>[n(i,{disabled:e.disabled,popConfirm:e.popConfirm,tooltip:{...e.tooltip},onClick:e.onClick,hasPermission:"media/Stream:"+e.key},{default:t(()=>[e.key==="delete"?(v(),w(f,{key:0,type:"DeleteOutlined"})):(v(),Y(ee,{key:1},[n(f,{type:e.icon},null,8,["type"]),s("span",null,c(e==null?void 0:e.text),1)],64))]),_:2},1032,["disabled","popConfirm","tooltip","onClick","hasPermission"])]),_:2},1040,["value","actions","status","statusText","onClick"])]),_:3},8,["request","params"])]),_:3})])]),_:3})}}});const ke=z(_e,[["__scopeId","data-v-be9054c8"]]);export{ke as default};
