import{ay as u}from"./index-1730252110824.js";import{u as d}from"./useRequest-1730252110824.js";import{k as i,c as g,e as f}from"./vue-1730252110824.js";const R=e=>u.post("/area/_all/tree",e),I=e=>u.remove(`/area/${e}`),M=e=>u.patch("/area",e),h=e=>u.post("/area/builtin/_all/tree",e),P=()=>{const e=i(new Map),s=(a=[],t)=>{var n;for(let r=0;r<a.length;r++){const c=a[r];e.value.set(c.code,{parentId:t,name:c.name}),(n=c.children)!=null&&n.length&&s(c.children,c.code)}},{data:o}=d(h,{onSuccess(a){s(a==null?void 0:a.result)},defaultParams:[{paging:!1,sorts:[{name:"sortIndex",order:"asc"}]}]});return{areaTree:o,areaMap:e,getParentNameById:a=>{let t=a;const n=[];for(;t;){const r=e.value.get(t);r&&n.unshift(r.name),t=r==null?void 0:r.parentId}return n}}},p=Symbol("region_key"),T=()=>g(p,{edit:!1,type:void 0}),_=()=>{const e=i([]),s=n=>{e.value.push(n),e.value.length>10&&(e.value=e.value.slice(1))},o=()=>{if(a.value)return e.value.length&&e.value.pop(),l()},l=()=>e.value[e.value.length-1],a=f(()=>e.value.length>1);return{revoke:o,getLastHistory:l,addRecord:s,reset:()=>{e.value=[]},hasHistory:a}},b={rectangle:"rectangle",polygon:"polygon",circle:"circle",tool:"tool",district:"district",geoJson:"geoJson"},k=(e,s)=>{const o=(l,a=[])=>{let t=[];return a.some(n=>n.code===l?(t=n.children,!0):n.children?(t=o(l,n.children),t==null?void 0:t.length):!1),t==null?void 0:t.map(n=>(n.children=[],n))};return o(e,s)};export{b as M,p as R,P as a,M as b,_ as c,I as d,R as g,k as s,T as u};
