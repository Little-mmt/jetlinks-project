import{aF as v,aO as C}from"./index-1730252110824.js";import{_ as D}from"./TermsItem.vue_vue_type_script_setup_true_name_TermsItem_lang-1730252110824.js";import{u as g}from"./scene-17302521108242.js";import F from"./DropdownButton-1730252110824.js";import"./Menus-1730252110824.js";import"./Time.vue_vue_type_style_index_0_lang-1730252110824.js";import{d as w,ai as L,k as S,e as M,ab as O,U as c,Z as d,_ as h,f as i,u as m,Y as y,X as T,F as V,a1 as $,V as A}from"./vue-1730252110824.js";const U={class:"terms-params"},W={class:"terms-params-warp"},j={key:0,class:"term-type-warp"},q={class:"terms-content"},E=h("span",null,"分组",-1),P=w({name:"WhenItem"}),J=w({...P,props:{isFirst:{type:Boolean,default:!0},data:{type:Object,default:()=>({when:[],shakeLimit:{},then:[]})},showDeleteBtn:{type:Boolean,default:!0},class:{type:String,default:""},name:{type:Number,default:0},branchName:{type:Number,default:0},branches_Index:{type:Number,default:0},isLast:{type:Boolean,default:!0}},setup(t){const e=t,_=g(),{data:a}=L(_),p=S(!1),N=()=>{e.showDeleteBtn&&(p.value=!0)},k=()=>{e.showDeleteBtn&&(p.value=!1)},f=M(()=>e.data.terms),B=o=>{a.value.options.when[e.name].terms[e.name].termType=o.label},I=()=>{var o,n,s;(s=(n=(o=a.value.branches)==null?void 0:o[e.branchName])==null?void 0:n.when)==null||s.splice(e.name,1),a.value.options.when[e.branches_Index].terms.splice(e.name,1)},x=()=>{var n,s,u,r,l,b;const o={type:"and",terms:[{column:void 0,value:{source:"manual",value:void 0},termType:void 0,key:`params_${v()}`,type:"and"}],key:`terms_${v()}`};(u=(s=(n=a.value.branches)==null?void 0:n[e.branchName])==null?void 0:s.when)==null||u.push(o),a.value.options.when[e.branches_Index]||(a.value.options.when[e.branches_Index]={terms:[{terms:[["","","","并且"]]}]}),(b=(l=(r=a.value.options)==null?void 0:r.when)==null?void 0:l[e.branches_Index])==null||b.terms.push({termType:"并且",terms:[["","eq","","and"]]})};return(o,n)=>{const s=O("AIcon"),u=C;return c(),d("div",U,[h("div",W,[t.isFirst?y("",!0):(c(),d("div",j,[i(m(F),{options:[{label:"并且",value:"and"},{label:"或者",value:"or"}],type:"type",value:m(a).branches[t.branchName].when[t.name].type,"onUpdate:value":n[0]||(n[0]=r=>m(a).branches[t.branchName].when[t.name].type=r),onSelect:B},null,8,["value"])])),h("div",{class:"terms-params-content",onMouseover:N,onMouseout:k},[i(u,{title:"确认删除？",onConfirm:I,show:m(p),className:"terms-params-delete"},{default:T(()=>[i(s,{type:"CloseOutlined"})]),_:1},8,["show"]),(c(!0),d(V,null,$(m(f),(r,l)=>(c(),A(D,{key:r.key,branchName:t.branchName,branches_Index:t.branches_Index,whenName:e.name,name:l,showDeleteBtn:m(f).length>1,isFirst:l===0,isLast:l===m(f).length-1,data:r},null,8,["branchName","branches_Index","whenName","name","showDeleteBtn","isFirst","isLast","data"]))),128))],32),t.isLast?(c(),d("div",{key:1,class:"terms-group-add",onClick:x},[h("div",q,[i(s,{type:"PlusOutlined"}),E])])):y("",!0)])])}}});export{J as _};
