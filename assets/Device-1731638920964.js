import{dG as N,h as j,ab as A,x as B,a0 as V,a1 as q,a2 as F,a3 as L,g as $}from"./index-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import"./index-1731638920964287.js";import{d as S,k as x,o as z,s as G,ab as I,U as M,Z as O,f as n,X as c,R as Q,_ as i,u as b,$ as p,E as U,F as X,af as Z,ag as H}from"./vue-1731638920964.js";const w=l=>(Z("data-v-17d45b50"),l=l(),H(),l),K=["src"],W={style:{width:"calc(100% - 100px)"}},Y={style:{"font-size":"16px","font-weight":"600"}},P=w(()=>i("div",{class:"card-item-content-text"},"设备类型",-1)),ee=w(()=>i("div",{class:"card-item-content-text"},"产品名称",-1)),te=S({name:"Product"}),ae=S({...te,props:{value:{type:Array,default:[]},detail:{type:Object,default:()=>({})},productId:{type:String,default:""}},emits:["update:value","change"],setup(l,{emit:u}){const t=l,C=x(),r=x({terms:[]}),_=[{title:"ID",dataIndex:"id",width:300,search:{type:"string"}},{title:"设备名称",dataIndex:"name",search:{type:"string",first:!0}},{title:"创建时间",dataIndex:"createTime",key:"createTime",scopedSlots:!0,search:{type:"date"}},{title:"状态",dataIndex:"state",key:"state",scopedSlots:!0,search:{type:"select",options:[{label:"禁用",value:"notActive"},{label:"离线",value:"offline"},{label:"在线",value:"online"}]}}],T=e=>{r.value={...e,terms:[...e.terms,{terms:[{column:"productId",value:t==null?void 0:t.productId}]}]}},k=e=>{var s,o;const a=[];return(s=t.value[0])!=null&&s.value&&a.push({name:"id",value:(o=t.value[0])==null?void 0:o.value}),a.push({name:"createTime",order:"desc"}),e.sorts=a,A(e)},D=e=>{var a,s;((s=(a=t.value)==null?void 0:a[0])==null?void 0:s.value)===e.id?(u("update:value",void 0),u("change",{})):(u("update:value",[{value:e.id,name:e.name}]),u("change",e))};return z(()=>{var e,a,s,o;(a=(e=t.value)==null?void 0:e[0])!=null&&a.value&&N((o=(s=t.value)==null?void 0:s[0])==null?void 0:o.value).then(m=>{u("change",m.result)})}),G(()=>{var e;r.value={...r.value,terms:(e=r.value)!=null&&e.terms?[...r.value.terms||[],{terms:[{column:"productId",value:t==null?void 0:t.productId}]}]:[{terms:[{column:"productId",value:t==null?void 0:t.productId}]}]}}),(e,a)=>{const s=I("pro-search"),o=B,m=I("Ellipsis"),v=V,R=q,E=F,J=L;return M(),O(X,null,[n(s,{columns:_,type:"simple",onSearch:T,class:"scene-search",target:"scene-trigger-device-device"}),n(o,{style:{margin:"0"}}),n(J,{ref_key:"actionRef",ref:C,model:"CARD",columns:_,params:b(r),request:k,gridColumn:2,bodyStyle:{paddingRight:0,paddingLeft:0}},{card:c(d=>{var f,h,g;return[n(E,{value:d,onClick:D,active:((f=l.value[0])==null?void 0:f.value)===d.id,status:(h=d.state)==null?void 0:h.value,statusText:(g=d.state)==null?void 0:g.text,statusNames:{online:"processing",offline:"error",notActive:"warning"}},{img:c(()=>[Q(e.$slots,"img",{},()=>[i("img",{src:b(j)("/device/instance/device-card.png")},null,8,K)],!0)]),content:c(()=>[i("div",W,[n(m,null,{default:c(()=>[i("span",Y,p(d.name),1)]),_:2},1024)]),n(R,{style:{"margin-top":"20px"}},{default:c(()=>[n(v,{span:12},{default:c(()=>{var y;return[P,i("div",null,p((y=d.deviceType)==null?void 0:y.text),1)]}),_:2},1024),n(v,{span:12},{default:c(()=>[ee,n(m,{style:{width:"100%"}},{default:c(()=>[U(p(d.productName),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value","active","status","statusText"])]}),_:3},8,["params"])],64)}}});const me=$(ae,[["__scopeId","data-v-17d45b50"]]);export{me as default};
