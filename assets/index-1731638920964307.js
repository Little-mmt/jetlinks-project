import{O as b,P as g,u as k,ac as R,ad as x,a2 as O,q as Q,w as W}from"./vue-1731638920964.js";function _(e){return b()?(g(e),!0):!1}function p(e){return typeof e=="function"?e():k(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const c=new WeakMap;function G(e,n,l={}){const{mode:y="replace",route:i=R(),router:u=x(),transform:q=o=>o}=l;c.has(u)||c.set(u,new Map);const s=c.get(u);let r=i.query[e];_(()=>{r=void 0});let a;const d=O((o,f)=>(a=f,{get(){return o(),q(r!==void 0?r:p(n))},set(t){r!==t&&(r=t===n||t===null?void 0:t,s.set(e,t===n||t===null?void 0:t),f(),Q(()=>{if(s.size===0)return;const h=Object.fromEntries(s.entries());s.clear();const{params:m,query:w,hash:S}=i;u[p(y)]({params:m,query:{...w,...h},hash:S})}))}}));return W(()=>i.query[e],o=>{r!==o&&(r=o,a())},{flush:"sync"}),d}export{G as u};
