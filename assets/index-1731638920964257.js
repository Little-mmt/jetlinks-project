import{dp as F,C as K,d as $,e as M,dv as U,J as X,a3 as Y,y as Z,g as z}from"./index-1731638920964.js";import"./index-1731638920964278.js";import"./index-1731638920964279.js";import"./index-1731638920964280.js";import"./index-1731638920964281.js";import"./index-1731638920964282.js";import"./index-1731638920964283.js";import{q as G}from"./noticeRule-1731638920964.js";import{d as H,k as h,e as v,o as O,s as Q,U as u,Z as f,F as E,f as t,_ as d,X as l,u as a,E as _,V as W,$ as x,Y as N}from"./vue-1731638920964.js";const P={class:"role"},ee={class:"role-alert"},te={class:"header"},ae={key:1,class:"role-alert",style:{"margin-bottom":"10px"}},ne={style:{"justify-content":"space-between",display:"flex","align-items":"center"}},le={class:"card"},se=H({__name:"index",props:{modelValue:{type:Array,default:()=>[]},gridColumn:{type:Number,default:3},type:{type:String,default:""}},emits:["update:modelValue"],setup(m,{emit:y}){const p=m,C=h(),n=h([]),b=h(),g=v(()=>{var e;return((e=b.value)==null?void 0:e._dataSource)||[]}),S=h({sorts:[{name:"id",order:"asc",value:"id"}]});O(()=>{p.modelValue.forEach(e=>{S.value.sorts.push({name:"id",order:"asc",value:e})})});const w=v(()=>g.value.some(e=>n.value.includes(e.id))&&!k.value),k=v(()=>g.value.every(e=>n.value.includes(e.id)));Q(()=>{n.value=(p==null?void 0:p.modelValue)||[]});const q=[{title:"标识",dataIndex:"id",key:"id",ellipsis:!0,fixed:"left"},{title:"名称",dataIndex:"name",key:"name",ellipsis:!0,search:{type:"string"}},{title:"说明",key:"description",ellipsis:!0,dataIndex:"description"}],V=e=>{C.value={terms:[{column:"name",termType:"like",value:`%${e}%`}]}},j=()=>{n.value=[],y("update:modelValue",[])},I=(e,r)=>{const s=new Set(n.value);e.target.checked?s.add(r.id):s.delete(r.id),y("update:modelValue",[...s.values()]),console.log("")},R=e=>{const r=e.target.checked,s=new Set(n.value),c=g.value.map(o=>o==null?void 0:o.id);r?c.map(o=>{s.add(o)}):c.map(o=>{s.delete(o)}),y("update:modelValue",[...s.values()])};return(e,r)=>{const s=F,c=K,o=$,J=M,B=U,L=X,A=Y,T=Z;return u(),f("div",P,[m.type!=="add"?(u(),f(E,{key:0},[t(s,{allowClear:"",onSearch:V,placeholder:"请输入名称"}),d("div",ee,[t(B,{type:"info"},{message:l(()=>[d("div",te,[t(c,{indeterminate:a(w),checked:a(k),onChange:R},{default:l(()=>[_("全选")]),_:1},8,["indeterminate","checked"]),a(n).length?(u(),W(J,{key:0},{default:l(()=>[d("span",null,"已选择"+x(a(n).length)+"项",1),t(o,{style:{padding:"0",height:"22px"},type:"link",onClick:j},{default:l(()=>[_("取消选择")]),_:1})]),_:1})):N("",!0)])]),_:1})])],64)):(u(),f("div",ae,[t(B,{type:"info"},{message:l(()=>[d("div",ne,[t(s,{allowClear:"",onSearch:V,placeholder:"请输入名称",style:{width:"300px"}}),t(J,null,{default:l(()=>[a(n).length?(u(),f(E,{key:0},[d("span",null,"已选择"+x(a(n).length)+"项",1),t(o,{style:{padding:"0",height:"22px"},type:"link",onClick:j},{default:l(()=>[_("取消选择")]),_:1})],64)):N("",!0),t(c,{indeterminate:a(w),checked:a(k),onChange:R},{default:l(()=>[_("全选")]),_:1},8,["indeterminate","checked"])]),_:1})])]),_:1})])),t(T,{height:m.gridColumn<=2?"320px":"250px"},{default:l(()=>[t(A,{ref_key:"tableRef",ref:b,columns:q,request:a(G),model:"CARD",params:a(C),bodyStyle:{padding:0},gridColumn:m.gridColumn,alertRender:!1,defaultParams:a(S),rowSelection:{selectedRowKeys:a(n)}},{card:l(i=>[d("div",le,[t(c,{checked:a(n).includes(i==null?void 0:i.id),onChange:D=>I(D,i)},{default:l(()=>[t(L,null,{default:l(()=>[_(x(i.name),1)]),_:2},1024)]),_:2},1032,["checked","onChange"])])]),_:1},8,["request","params","gridColumn","defaultParams","rowSelection"])]),_:1},8,["height"])])}}});const he=z(se,[["__scopeId","data-v-f0abac3e"]]);export{he as default};
