import{X as K,f$ as z,ax as A,g0 as w,dq as E,cY as G,g as F}from"./index-1730252110824.js";import O from"./BranchesTabs-1730252110824.js";import{t as M,h as X,a as Y}from"./utils-17302521108243.js";import{d as T,k as q,e as h,ab as D,U as c,Z as d,_ as t,u as s,E as f,$ as y,a0 as g,f as p,X as i,F as H,a1 as L,V as _,Y as k,R,a4 as C,af as U,ag as Z}from"./vue-1730252110824.js";import"./Actions-1730252110824.js";import"./util-1730252110824.js";import"./config-17302521108242.js";import"./util-17302521108242.js";import"./scene-1730252110824.js";import"./scene-17302521108242.js";import"./util-17302521108243.js";const J=e=>(U("data-v-48a7bcc1"),e=e(),Z(),e),P={class:"card-type"},Q={class:"card-type-text"},W=["src"],ee={class:"card-content",style:{paddingTop:"40px"}},te={class:"card-content-body"},ae={class:"card-item-avatar"},se=["src"],oe={class:"card-item-body"},ce={style:{"font-size":"16px","font-weight":"600"}},ne={key:0},le={class:"subTitle"},de={key:0,class:"card-content-tabs"},ie={class:"card-state-content"},re={class:"mask-content"},ue=J(()=>t("div",null,"该场景为禁用状态,无法触发告警",-1)),me={key:1,class:"card-mask mask-full",style:{"background-color":"rgba(0, 0, 0, 0.2)"}},ve=T({name:"SceneCardBox"}),he=T({...ve,props:{value:{type:Object,default:()=>({})},statusText:{type:String,default:"正常"},status:{type:[String,Number],default:"default"},statusNames:{type:Object,default:()=>({started:"processing",disable:"error"})},disabled:{type:Boolean,default:!1},alarmId:{type:String,default:void 0},activeKeys:{type:Array,default:()=>[]},showBranches:{type:Boolean,default:!0},showBindTags:{type:Boolean,default:!1},maskStyle:{type:Object,default:void 0},selected:{type:Boolean,default:void 0}},emits:["click","change","reload"],setup(e,{emit:b}){const n=e,r=q(!1),I=K(),x=h(()=>{const a=n.statusNames[n.status],o=w[a]||w.default;return{background:`linear-gradient(
                  188.4deg,
                  rgba(${o}, 0.03) 30%,
                  rgba(${o}, 0) 80%
              )`}}),u=h(()=>M.get(n.value.triggerType)||{}),B=h(()=>{var a;return X(n.value.branches,((a=n.value.options)==null?void 0:a.when)||[])}),S=h(()=>{const{data:a,invalid:o}=Y(B.value,n.activeKeys);return r.value=o,console.log(r.value,"isInvalid"),a}),N=(a,o)=>{b("change",a,o)},$=()=>{b("click")},V=()=>{var l;const a=(l=I.menus["rule-engine/Scene/Save"])==null?void 0:l.path,o=window.open(`${window.location.origin+window.location.pathname}#${a}?triggerType=${n.value.triggerType}&id=${n.value.id}`);o.onTabSaveSuccess=m=>{console.log("",m),m.success&&b("reload")}};return(a,o)=>{const l=D("Ellipsis"),m=E,j=G;return c(),d("div",{class:C(["card j-table-card-box",{selectedCard:e.selected}]),onClick:$},[t("div",{class:C(["card-warp",{disabled:e.disabled}])},[t("div",P,[t("div",Q,[t("img",{height:16,src:s(u).icon,style:{"margin-right":"5px"}},null,8,W),f(" "+y(s(u).text),1)])]),t("div",ee,[t("div",{class:"card-content-bg-item card-content-bg1",style:g(s(x))},null,4),t("div",{class:"card-content-bg-item card-content-bg2",style:g(s(x))},null,4),t("div",te,[t("div",ae,[t("img",{src:s(u).img},null,8,se)]),t("div",oe,[t("div",null,[p(l,{style:{width:"calc(100% - 100px)"}},{default:i(()=>[t("span",ce,y(e.value.name),1)]),_:1}),e.showBindTags&&s(S).length?(c(),d("div",ne,[(c(!0),d(H,null,L(s(S),v=>(c(),_(m,null,{default:i(()=>[p(l,{style:{"max-width":"120px"}},{default:i(()=>[f(y(v),1)]),_:2},1024)]),_:2},1024))),256))])):(c(),_(l,{key:1},{default:i(()=>{var v;return[t("div",le," 说明："+y(((v=e.value)==null?void 0:v.description)||s(u).tip),1)]}),_:1}))])])]),e.showBranches?(c(),d("div",de,[(c(),_(O,{branchesGroup:s(B),alarmId:e.alarmId,branchesId:e.value.id,activeKeys:e.activeKeys,key:e.value.id,onChange:N},null,8,["branchesGroup","alarmId","branchesId","activeKeys"]))])):k("",!0),t("div",{class:"card-state",style:g({backgroundColor:s(z)(e.statusNames[e.status])})},[t("div",ie,[p(A,{status:e.status,text:e.statusText,statusNames:e.statusNames},null,8,["status","text","statusNames"])])],4)]),e.status==="disable"&&!s(r)?(c(),d("div",{key:0,class:"card-mask mask-hover",style:g(e.maskStyle)},[t("div",re,[R(a.$slots,"mask",{},()=>[ue],!0)])],4)):k("",!0),s(r)?(c(),d("div",me,[p(j,{style:{"font-size":"16px"},type:"link",onClick:V},{default:i(()=>[f("无效数据，请重新保存场景")]),_:1})])):k("",!0)],2)],2)}}});const Ce=F(he,[["__scopeId","data-v-48a7bcc1"]]);export{Ce as default};
