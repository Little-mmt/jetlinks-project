import{ac as M,k as r,o as Y,w as k,U as u,Z as _,f as w,X as B,_ as i,u as e,G as F,F as I,a1 as R,V as S,Y as V,af as D,ag as H}from"./vue-1731638920964.js";import{g as N,dr as O,fX as U,fH as X,d3 as j}from"./index-1731638920964.js";import E from"./Preview-1731638920964.js";import{l as G}from"./auto-1731638920964.js";import"./index-1731638920964292.js";import"./index-1731638920964293.js";const J=c=>(D("data-v-939fd4a9"),c=c(),H(),c),L={class:"datePicker"},Q=J(()=>i("span",null,"选择日期：",-1)),Z={key:0},A={class:"thumbnailContainer"},K={class:"thumbnail"},W=["src","onClick"],ee={class:"custom-pagination"},te={__name:"index",props:{data:{type:Object,default:()=>({})},viewType:{type:String,default:"record"}},emits:["close"],setup(c,{emit:x}){const v=c,C=M(),g=r(0),n=r(0),s=r(20),d=r(),h=r([]),f=r(!1),T=r(),p=async t=>{const a=v.viewType==="record"?{pageIndex:n.value,pageSize:s.value,sorts:[{name:"createTime",order:"desc"}],terms:[{column:"channelId",value:v.data.channelId,termType:"eq",type:"and"},{column:"fileType",value:"screenshot",termType:"eq",type:"and"}]}:{pageIndex:n.value,pageSize:s.value,sorts:[{name:"createTime",order:"desc"}],terms:[{column:"channelId",value:v.data.channelId,termType:"eq",type:"and"},{column:"fileType",value:"screenshot",termType:"eq",type:"and"},{column:"recordId",value:C.params.id,termType:"eq",type:"and"}]};t&&a.terms.push(t);const l=await G(a);l.success&&(h.value=l.result.data,n.value=l.result.pageIndex,s.value=l.result.pageSize,g.value=l.result.total)},z=(t,a)=>{console.log("page====",t,a),n.value=t-1,s.value=a};Y(()=>{p()}),k(()=>[n.value,s.value],()=>{p()}),k(()=>d.value,t=>{console.log("val====",t),t?p({column:"createTime",termType:"btw",value:t}):p()});const b=t=>{f.value=!0,T.value=t};return(t,a)=>{const l=O,P=U,q=X,$=j;return u(),_(I,null,[w($,{visible:"",footer:null,width:800,onCancel:a[1]||(a[1]=o=>x("close")),maskClosable:!1,title:"抓拍文件"},{default:B(()=>[i("div",L,[Q,w(l,{value:e(d),"onUpdate:value":a[0]||(a[0]=o=>F(d)?d.value=o:null),valueFormat:"YYYY-MM-DD HH:mm:ss","show-time":""},null,8,["value"])]),e(h).length?(u(),_("div",Z,[i("div",A,[(u(!0),_(I,null,R(e(h),o=>{var m;return u(),_("div",K,[i("img",{src:(m=o.others)==null?void 0:m.thumbnailPath,alt:"",onClick:y=>b(o)},null,8,W)])}),256))]),i("div",ee,[w(P,{showQuickJumper:!1,showSizeChanger:!0,total:e(g),current:e(n)+1,pageSize:e(s),pageSizeOptions:["20","40","60","100"],showTotal:o=>{const m=e(n)*e(s)+1,y=(e(n)+1)*e(s);return`第 ${m} - ${y>o?o:y} 条/总共 ${e(g)} 条`},onChange:z},null,8,["total","current","pageSize","showTotal"])])])):(u(),S(q,{key:1}))]),_:1}),e(f)?(u(),S(E,{key:0,onClosePreview:a[2]||(a[2]=o=>f.value=!1),record:e(T),channel:c.data},null,8,["record","channel"])):V("",!0)],64)}}},ce=N(te,[["__scopeId","data-v-939fd4a9"]]);export{ce as default};
